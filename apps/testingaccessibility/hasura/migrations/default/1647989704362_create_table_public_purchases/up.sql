CREATE TABLE "public"."purchases" ("id" uuid NOT NULL DEFAULT gen_random_uuid(), "user_id" uuid, "price" numeric, "stripe_id" text NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "ip_address" text, "city" text, "state" text, "country" text, "coupon_id" uuid, "upgraded_from_purchase_id" uuid NOT NULL, PRIMARY KEY ("id") , FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("coupon_id") REFERENCES "public"."coupons"("id") ON UPDATE restrict ON DELETE cascade, UNIQUE ("id"));
CREATE EXTENSION IF NOT EXISTS pgcrypto;

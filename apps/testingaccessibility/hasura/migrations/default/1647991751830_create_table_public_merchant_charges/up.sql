CREATE TABLE "public"."merchant_charges" ("id" uuid NOT NULL DEFAULT gen_random_uuid(), "status" integer NOT NULL DEFAULT 0, "identifier" text, "user_id" uuid NOT NULL, "merchant_account_id" uuid NOT NULL, "merchant_product_id" uuid NOT NULL, "purchase_id" uuid NOT NULL, "created_at" timestamptz NOT NULL DEFAULT now(), "price_id" uuid NOT NULL, "merchant_price_id" uuid NOT NULL, PRIMARY KEY ("id") , FOREIGN KEY ("user_id") REFERENCES "public"."users"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("merchant_account_id") REFERENCES "public"."merchant_accounts"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("merchant_product_id") REFERENCES "public"."merchant_products"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("purchase_id") REFERENCES "public"."purchases"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("merchant_price_id") REFERENCES "public"."prices"("id") ON UPDATE restrict ON DELETE cascade, FOREIGN KEY ("price_id") REFERENCES "public"."merchant_prices"("id") ON UPDATE restrict ON DELETE cascade, UNIQUE ("id"));
CREATE EXTENSION IF NOT EXISTS pgcrypto;

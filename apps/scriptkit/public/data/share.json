[{"name":"OpenAI Replace","description":"","shortcut":"cmd ctrl s","avatar":"https://avatars.githubusercontent.com/u/13864?v=4","user":"foeken","author":"Andre Foeken","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/954","url":"https://gist.githubusercontent.com/foeken/d43c929d5b27cd38ef694f17604b3fa5/raw/60d3841f721c2f990a9e7113f01018e8628269f9/openai-replace.js","title":"Tana GPT-3 integration","command":"tana-gpt-3-integration","content":"This script allows for Tana to call GPT-3 and return the results in the Tana paste format, you can also add native fields fields below the copied node to act as parameters for the GPT-3 query\r\n\r\n<img width=\"929\" alt=\"CleanShot 2022-11-28 at 17 46 29@2x\" src=\"https://user-images.githubusercontent.com/13864/204334452-7e308d3d-0a2d-4c57-bead-44d864f57530.png\">\r\n\r\n\r\n[Open openai-replace in Script Kit](https://scriptkit.com/api/new?name=openai-replace&url=https://gist.githubusercontent.com/foeken/d43c929d5b27cd38ef694f17604b3fa5/raw/60d3841f721c2f990a9e7113f01018e8628269f9/openai-replace.js\")\r\n\r\n```js\r\n// Name: OpenAI Replace\r\n// Description: Replace using Open AI's API\r\n// Shortcut: cmd ctrl s\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet { Configuration, OpenAIApi } = await npm(\"openai\")\r\n\r\nlet configuration = new Configuration({\r\n  apiKey: await env(\"OPENAI_API_KEY\"),\r\n})\r\n\r\nlet openai = new OpenAIApi(configuration)\r\nlet complete = async (prompt, maxTokens, temperature) => {\r\n    setTimeout(() => {\r\n        setLoading(true)\r\n    }, 250)\r\n  console.log(maxTokens)\r\n  console.log(temperature)\r\n    console.log(prompt)\r\n    let response = await openai.createCompletion({\r\n        model: \"text-davinci-003\",\r\n        prompt: `${prompt}`,\r\n        temperature: temperature,\r\n        max_tokens: maxTokens,\r\n        top_p: 1,\r\n        frequency_penalty: 0,\r\n        presence_penalty: 0,\r\n    })\r\n    setLoading(false)\r\n    return response?.data?.choices[0]?.text?.trim()  \r\n}\r\n\r\nlet prompt = await getSelectedText()\r\n\r\nlet regexMatch = null\r\n\r\nlet temperature = 0.7\r\nlet temperatureRegex = /\\n  Temperature: ([+-]?([0-9]*[.])?[0-9]+)/\r\n\r\nregexMatch = temperatureRegex.exec(prompt)\r\nif (regexMatch) {    \r\n  temperature = parseFloat(regexMatch[1])\r\n  prompt = prompt.replace(temperatureRegex, \"\")\r\n}\r\n\r\nlet maxTokens = 512\r\nlet maxTokensRegex = /\\n  Max Tokens: ([+-]?([0-9]*[.])?[0-9]+)/\r\n\r\nregexMatch = maxTokensRegex.exec(prompt)\r\nif (regexMatch) {    \r\n  maxTokens = parseInt(regexMatch[1])\r\n  prompt = prompt.replace(maxTokensRegex, \"\")\r\n}\r\n\r\nlet result = \"\"\r\n\r\nwhile (true) {\r\n  if (result != \"\") {\r\n    prompt = await editor(prompt) \r\n  }  \r\n\r\n  div(\"Give me a second ...\", \"text-center text-4xl p-10 font-semibold\")\r\n\r\n  result = await complete(prompt, maxTokens, temperature)\r\n\r\n  let retryOrContinue = await arg(\r\n    {\r\n      placeholder: \"\",\r\n      hint: \"[R]etry another prompt, [E]dit the reply, or continue (enter)\",\r\n      ignoreBlur: true,\r\n    }, div(md(result), 'm-4')\r\n  )        \r\n\r\n    if (retryOrContinue === \"E\") {\r\n        result = await editor(result)\r\n        break\r\n    }\r\n\r\n    if (retryOrContinue === \"\") break\r\n}\r\n\r\nsetSelectedText(\"%%tana%%\\n\" + result)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-28T16:47:14Z"},{"shortcut":"control option q","name":"qrcode","description":"","author":null,"avatar":"https://avatars.githubusercontent.com/u/35342316?u=c00777c4e7fa57a148cdc0f78e5b847041ebdf42&v=4","user":"MinatoHikari","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/952","url":"","title":"generate qrcode","command":"generate-qrcode","content":"\r\n[Open qrcode in Script Kit](https://scriptkit.com/api/new?name=qrcode&url=https://gist.githubusercontent.com/MinatoHikari/ec96d5b1178533bf78aff698aa7afebd/raw/811b632a120b62cdb971aacb3f2464a252218a4b/qrcode.ts\")\r\n\r\n```js\r\n// Shortcut: control option q\r\n// Name: qrcode\r\n// Description: generate qrcode from input and display\r\n// Author: Minatohikari\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport { promisify } from \"util\";\r\n\r\nconst { toDataURL }: typeof import(\"qrcode\") = await npm(\"qrcode\");\r\n\r\nconst text = await arg(\"input text to get qrcode\");\r\nconst width = 300;\r\nconst toDataURLPromise = promisify((...args: Parameters<typeof toDataURL>) =>\r\n  toDataURL(...args)\r\n);\r\n\r\nconst url = await toDataURLPromise(text, { width });\r\n\r\nconst img = `<img src=\"${url}\" alt=\"Generate failed\" width=\"${width}\" height=\"${width}\" />`;\r\n\r\nawait widget(`<div>${img}</div>`, {\r\n  width,\r\n  height: width,\r\n});\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-26T14:38:21Z"},{"name":"Widget Dynamic Lists","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/948","url":"","title":"Widget Dynamic List Demo","command":"widget-dynamic-list-demo","content":"\r\n[Open widget-override in Script Kit](https://scriptkit.com/api/new?name=widget-override&url=https://gist.githubusercontent.com/johnlindquist/479c7798e4b64f9b48ebd1e733b187b1/raw/0d622095155309de60d0644239b6b52dbaf03ee1/widget-override.ts\")\r\n\r\n```js\r\n// Name: Widget Dynamic Lists\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet names = [\"John\", \"Mindy\", \"Ben\", \"Scooter\"]\r\nlet items = _.shuffle(names).map(name => ({ name }))\r\n\r\nlet html = `\r\n  <div class=\"flex flex-col w-screen h-screen justify-around items-center\">\r\n      <button\r\n      class=\"rounded px-4 py-2 bg-black bg-opacity-50 hover:bg-opacity-25 w-1/2\"\r\n      v-for=\"(item, index) in items\" :key=\"item.name\" :data-name=\"item.name\" :data-index=\"index\">{{index}}. {{item.name}}</button>\r\n      <div>{{selected}}</div>\r\n  </div>  \r\n  `\r\n\r\nlet w = await widget(html, {\r\n    state: {\r\n      items,\r\n      selected: items[0].name\r\n    }\r\n  }\r\n)\r\n\r\nw.onClick(event => {\r\n  if (event.dataset.name) {\r\n    w.setState({selected: event.dataset.name})\r\n  }\r\n})\r\n\r\nsetInterval(() => {\r\n  items = _.shuffle(items)\r\n  w.setState({\r\n    items,\r\n  })\r\n}, 1000)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-18T17:19:15Z"},{"name":"Cheat Sheet","avatar":"https://avatars.githubusercontent.com/u/145475?u=d404816da4c61194ad38c14528a16d31763a9e59&v=4","user":"bigredjoe","author":"Joseph Doty","twitter":"josephdoty","discussion":"https://github.com/johnlindquist/kit/discussions/944","url":"","title":"Cheat Sheets from cheat.sh","command":"cheat-sheets-from-cheatsh","content":"\r\n[Open cheat-sheet in Script Kit](https://scriptkit.com/api/new?name=cheat-sheet&url=https://gist.githubusercontent.com/bigredjoe/9df506a5972c9b78f9af64a09e6d5c1b/raw/6da67183a0f9a4b3c8300c839145469e6a128eb5/cheat-sheet.ts\")\r\n\r\n```js\r\n// Name: Cheat Sheet\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nlet topic = await arg(\"Cheat Sheet Topic\", async (input) => {\r\n  if (!input) return;\r\n  let response = await get(`https://cheat.sh/${input}`);\r\n  return response.data;\r\n});\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-11T18:32:07Z"},{"menu":"Chrome History","description":"","author":"John Lindquist","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","discussion":"https://github.com/johnlindquist/kit/discussions/943","url":"https://gist.githubusercontent.com/johnlindquist/30bff9c6310239bf68d05c1648788bbe/raw/8d9b0fb3fba008c05281e74d830d5ed90155946a/chrome-history.js","title":"Search Chrome History","command":"search-chrome-history","content":"\r\n[Open chrome-history in Script Kit](https://scriptkit.com/api/new?name=chrome-history&url=https://gist.githubusercontent.com/johnlindquist/30bff9c6310239bf68d05c1648788bbe/raw/8d9b0fb3fba008c05281e74d830d5ed90155946a/chrome-history.js\")\r\n\r\n```js\r\nimport \"@johnlindquist/kit\"\r\n\r\n// Menu: Chrome History\r\n// Description: Open a url from your history\r\n// Author: John Lindquist\r\n// Twitter: @johnlindquist\r\n\r\nlet historyFilePath = home(\r\n  \"Library/Application Support/Google/Chrome/Default/History\"\r\n)\r\n\r\n// ~/.kenv/tmp/chrome-history/History\r\nlet tmpHistoryPath = tmpPath(\"History\")\r\n\r\n// We make copy of the db each time or you run into a SQL_BUSY if Chrome is open\r\nawait copyFile(historyFilePath, tmpHistoryPath)\r\n\r\nlet sqlite3 = await npm(\"sqlite3\")\r\nlet db = new sqlite3.Database(tmpHistoryPath)\r\nlet limit = 1000\r\nlet sql = `SELECT url, title, last_visit_time FROM urls ORDER BY last_visit_time DESC LIMIT ${limit}`\r\n\r\nlet callback = async (err, rows) => {\r\n  let url = await arg(\r\n    \"Chrome History\",\r\n    rows.map(({ url, title }) => {\r\n      return {\r\n        name: title,\r\n        description: url,\r\n        value: url,\r\n      }\r\n    })\r\n  )\r\n\r\n  open(url)\r\n}\r\n\r\ndb.all(sql, callback)\r\ndb.close()\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-07T03:56:37Z"},{"avatar":"https://avatars.githubusercontent.com/u/50381321?u=48d7fef1f31061d6440a7a78ac793c0a00ab878b&v=4","user":"michalisKout","author":"Michael","twitter":"Mkoutridis","discussion":"https://github.com/johnlindquist/kit/discussions/942","url":"","title":"Greek to Greeklish filenames translation","command":"greek-to-greeklish-filenames-translation","content":"Hello everyone 👋🏻 , I've created a translation widget. It translates any file that matches the selected file type from a specified directory and its sub-directories (check env variables) from Greek letters to Greeklish. It can be helpful when we use apps that strangle to read files with greek characters on their filenames.\r\n\r\nFor example:\r\n![Screenshot 2022-11-07 at 12 14 25 AM](https://user-images.githubusercontent.com/50381321/200198077-7a82d1eb-513a-49ea-ba7e-4ce182ac5cf5.png)\r\nTherefore, we need to have all our files converted to a Greeklish format using Latin characters. \r\n\r\n\r\nI hope some of you find this useful 🤞🏻. \r\n\r\nℹ️ Hint: You can even replace the `greekToGreeklishMap` to a custom translation map and make your own filename renames. \r\n⚠️ **Use this with caution. It may rename a large number of file names and make unwanted changes to your file names.** ⚠️ \r\n\r\nhttps://user-images.githubusercontent.com/50381321/200197611-bde2c6d8-d7a0-468f-9c7e-d050a64aeb1b.mov\r\n\r\nEnvironment variables:\r\n\r\n```env\r\nROOT_TRANSLATION_PATH=/Users/{{user}}\r\nTRANSLATION_VERBOSE_LOGS=yes\r\nREAD_FILES_RECURSIVELY_FOR_CHILDREN_DIRS=true\r\nOVERRIDE_FILE_TRANSLATION_LIMIT=2500\r\n```\r\n\r\n```js\r\nimport '@johnlindquist/kit';\r\nimport fs from 'fs';\r\n// ====== APPLICATION CONFIGURATION START ======\r\n\r\nconst greekToGreeklishMap = [\r\n\t{ find: '́', replace: '' },\r\n\t{ find: 'ΓΧ', replace: 'GX' },\r\n\t{ find: 'γχ', replace: 'gx' },\r\n\t{ find: 'ΤΘ', replace: 'T8' },\r\n\t{ find: 'τθ', replace: 't8' },\r\n\t{ find: '(θη|Θη)', replace: '8h' },\r\n\t{ find: 'ΘΗ', replace: '8H' },\r\n\t{ find: 'αυ', replace: 'au' },\r\n\t{ find: 'Αυ', replace: 'Au' },\r\n\t{ find: 'ΑΥ', replace: 'AY' },\r\n\t{ find: 'ευ', replace: 'eu' },\r\n\t{ find: 'εύ', replace: 'eu' },\r\n\t{ find: 'εϋ', replace: 'ey' },\r\n\t{ find: 'εΰ', replace: 'ey' },\r\n\t{ find: 'Ευ', replace: 'Eu' },\r\n\t{ find: 'Εύ', replace: 'Eu' },\r\n\t{ find: 'Εϋ', replace: 'Ey' },\r\n\t{ find: 'Εΰ', replace: 'Ey' },\r\n\t{ find: 'ΕΥ', replace: 'EY' },\r\n\t{ find: 'ου', replace: 'ou' },\r\n\t{ find: 'ού', replace: 'ou' },\r\n\t{ find: 'οϋ', replace: 'oy' },\r\n\t{ find: 'οΰ', replace: 'oy' },\r\n\t{ find: 'Ου', replace: 'Ou' },\r\n\t{ find: 'Ού', replace: 'Ou' },\r\n\t{ find: 'Οϋ', replace: 'Oy' },\r\n\t{ find: 'Οΰ', replace: 'Oy' },\r\n\t{ find: 'ΟΥ', replace: 'OY' },\r\n\t{ find: 'Α', replace: 'A' },\r\n\t{ find: 'α', replace: 'a' },\r\n\t{ find: 'ά', replace: 'a' },\r\n\t{ find: 'Ά', replace: 'A' },\r\n\t{ find: 'Β', replace: 'B' },\r\n\t{ find: 'β', replace: 'b' },\r\n\t{ find: 'Γ', replace: 'G' },\r\n\t{ find: 'γ', replace: 'g' },\r\n\t{ find: 'Δ', replace: 'D' },\r\n\t{ find: 'δ', replace: 'd' },\r\n\t{ find: 'Ε', replace: 'E' },\r\n\t{ find: 'ε', replace: 'e' },\r\n\t{ find: 'έ', replace: 'e' },\r\n\t{ find: 'Έ', replace: 'E' },\r\n\t{ find: 'Ζ', replace: 'Z' },\r\n\t{ find: 'ζ', replace: 'z' },\r\n\t{ find: 'Η', replace: 'H' },\r\n\t{ find: 'η', replace: 'h' },\r\n\t{ find: 'ή', replace: 'h' },\r\n\t{ find: 'Ή', replace: 'H' },\r\n\t{ find: 'Θ', replace: 'TH' },\r\n\t{ find: 'θ', replace: 'th' },\r\n\t{ find: 'Ι', replace: 'I' },\r\n\t{ find: 'Ϊ', replace: 'I' },\r\n\t{ find: 'ι', replace: 'i' },\r\n\t{ find: 'ί', replace: 'i' },\r\n\t{ find: 'ΐ', replace: 'i' },\r\n\t{ find: 'ϊ', replace: 'i' },\r\n\t{ find: 'Ί', replace: 'I' },\r\n\t{ find: 'Κ', replace: 'K' },\r\n\t{ find: 'κ', replace: 'k' },\r\n\t{ find: 'Λ', replace: 'L' },\r\n\t{ find: 'λ', replace: 'l' },\r\n\t{ find: 'Μ', replace: 'M' },\r\n\t{ find: 'μ', replace: 'm' },\r\n\t{ find: 'Ν', replace: 'N' },\r\n\t{ find: 'ν', replace: 'n' },\r\n\t{ find: 'Ξ', replace: 'KS' },\r\n\t{ find: 'ξ', replace: 'ks' },\r\n\t{ find: 'Ο', replace: 'O' },\r\n\t{ find: 'ο', replace: 'o' },\r\n\t{ find: 'Ό', replace: 'O' },\r\n\t{ find: 'ό', replace: 'o' },\r\n\t{ find: 'Π', replace: 'P' },\r\n\t{ find: 'π', replace: 'p' },\r\n\t{ find: 'Ρ', replace: 'R' },\r\n\t{ find: 'ρ', replace: 'r' },\r\n\t{ find: 'Σ', replace: 'S' },\r\n\t{ find: 'σ', replace: 's' },\r\n\t{ find: 'Τ', replace: 'T' },\r\n\t{ find: 'τ', replace: 't' },\r\n\t{ find: 'Υ', replace: 'Y' },\r\n\t{ find: 'Ύ', replace: 'Y' },\r\n\t{ find: 'Ϋ', replace: 'Y' },\r\n\t{ find: 'ΰ', replace: 'y' },\r\n\t{ find: 'ύ', replace: 'y' },\r\n\t{ find: 'ϋ', replace: 'y' },\r\n\t{ find: 'υ', replace: 'y' },\r\n\t{ find: 'Φ', replace: 'F' },\r\n\t{ find: 'φ', replace: 'f' },\r\n\t{ find: 'Χ', replace: 'X' },\r\n\t{ find: 'χ', replace: 'x' },\r\n\t{ find: 'Ψ', replace: 'Ps' },\r\n\t{ find: 'ψ', replace: 'ps' },\r\n\t{ find: 'Ω', replace: 'w' },\r\n\t{ find: 'ω', replace: 'w' },\r\n\t{ find: 'Ώ', replace: 'w' },\r\n\t{ find: 'ώ', replace: 'w' },\r\n\t{ find: 'ς', replace: 's' },\r\n\t{ find: ';', replace: '?' },\r\n];\r\n\r\nconst extensions = {\r\n\t'1.ada': ['code'],\r\n\t'2.ada': ['code'],\r\n\t'3dm': ['image'],\r\n\t'3ds': ['image'],\r\n\t'3g2': ['video'],\r\n\t'3gp': ['video'],\r\n\t'7z': ['archive'],\r\n\ta: ['archive'],\r\n\taac: ['audio'],\r\n\taaf: ['video'],\r\n\tada: ['code'],\r\n\tadb: ['code'],\r\n\tads: ['code'],\r\n\tai: ['image'],\r\n\taiff: ['audio'],\r\n\tape: ['audio'],\r\n\tapk: ['archive'],\r\n\tar: ['archive'],\r\n\tasf: ['video'],\r\n\tasm: ['code'],\r\n\tau: ['audio'],\r\n\tavchd: ['video'],\r\n\tavi: ['video'],\r\n\tazw: ['book'],\r\n\tazw1: ['book'],\r\n\tazw3: ['book'],\r\n\tazw4: ['book'],\r\n\tazw6: ['book'],\r\n\tbas: ['code'],\r\n\tbash: ['code', 'exec'],\r\n\tbat: ['code', 'exec'],\r\n\tbin: ['exec'],\r\n\tbmp: ['image'],\r\n\tbz2: ['archive'],\r\n\tc: ['code'],\r\n\t'c++': ['code'],\r\n\tcab: ['archive'],\r\n\tcbl: ['code'],\r\n\tcbr: ['book'],\r\n\tcbz: ['book'],\r\n\tcc: ['code'],\r\n\tclass: ['code'],\r\n\tclj: ['code'],\r\n\tcob: ['code'],\r\n\tcommand: ['exec'],\r\n\tcpio: ['archive'],\r\n\tcpp: ['code'],\r\n\tcrx: ['exec'],\r\n\tcs: ['code'],\r\n\tcsh: ['code', 'exec'],\r\n\tcss: ['web'],\r\n\tcsv: ['sheet'],\r\n\tcxx: ['code'],\r\n\td: ['code'],\r\n\tdds: ['image'],\r\n\tdeb: ['archive'],\r\n\tdiff: ['code'],\r\n\tdmg: ['archive'],\r\n\tdoc: ['text'],\r\n\tdocx: ['text'],\r\n\tdrc: ['video'],\r\n\tdwg: ['image'],\r\n\tdxf: ['image'],\r\n\te: ['code'],\r\n\tebook: ['text'],\r\n\tegg: ['archive'],\r\n\tel: ['code'],\r\n\teot: ['font'],\r\n\teps: ['image'],\r\n\tepub: ['book'],\r\n\texe: ['exec'],\r\n\tf: ['code'],\r\n\tf77: ['code'],\r\n\tf90: ['code'],\r\n\tfish: ['code', 'exec'],\r\n\tflac: ['audio'],\r\n\tflv: ['video'],\r\n\tfor: ['code'],\r\n\tfth: ['code'],\r\n\tftn: ['code'],\r\n\tgif: ['image'],\r\n\tgo: ['code'],\r\n\tgpx: ['image'],\r\n\tgroovy: ['code'],\r\n\tgsm: ['audio'],\r\n\tgz: ['archive'],\r\n\th: ['code'],\r\n\thh: ['code'],\r\n\thpp: ['code'],\r\n\ths: ['code'],\r\n\thtm: ['code', 'web'],\r\n\thtml: ['code', 'web'],\r\n\thxx: ['code'],\r\n\tics: ['sheet'],\r\n\tiso: ['archive'],\r\n\tit: ['audio'],\r\n\tjar: ['archive'],\r\n\tjava: ['code'],\r\n\tjpeg: ['image'],\r\n\tjpg: ['image'],\r\n\tjs: ['code', 'web'],\r\n\tjsp: ['code'],\r\n\tjsx: ['code', 'web'],\r\n\tkml: ['image'],\r\n\tkmz: ['image'],\r\n\tksh: ['code', 'exec'],\r\n\tkt: ['code'],\r\n\tless: ['web'],\r\n\tlha: ['archive'],\r\n\tlhs: ['code'],\r\n\tlisp: ['code'],\r\n\tlog: ['text'],\r\n\tlua: ['code'],\r\n\tm: ['code'],\r\n\tm2v: ['video'],\r\n\tm3u: ['audio'],\r\n\tm4: ['code'],\r\n\tm4a: ['audio'],\r\n\tm4p: ['video'],\r\n\tm4v: ['video'],\r\n\tmar: ['archive'],\r\n\tmax: ['image'],\r\n\tmd: ['text'],\r\n\tmid: ['audio'],\r\n\tmkv: ['video'],\r\n\tmng: ['video'],\r\n\tmobi: ['book'],\r\n\tmod: ['audio'],\r\n\tmov: ['video'],\r\n\tmp2: ['video'],\r\n\tmp3: ['audio'],\r\n\tmp4: ['video'],\r\n\tmpa: ['audio'],\r\n\tmpe: ['video'],\r\n\tmpeg: ['video'],\r\n\tmpg: ['video'],\r\n\tmpv: ['video'],\r\n\tmsg: ['text'],\r\n\tmsi: ['exec'],\r\n\tmxf: ['video'],\r\n\tnim: ['code'],\r\n\tnsv: ['video'],\r\n\todp: ['slide'],\r\n\tods: ['sheet'],\r\n\todt: ['text'],\r\n\togg: ['video'],\r\n\togm: ['video'],\r\n\togv: ['video'],\r\n\torg: ['text'],\r\n\totf: ['font'],\r\n\tpages: ['text'],\r\n\tpak: ['archive'],\r\n\tpatch: ['code'],\r\n\tpdf: ['text'],\r\n\tpea: ['archive'],\r\n\tphp: ['code', 'web'],\r\n\tpl: ['code'],\r\n\tpls: ['audio'],\r\n\tpng: ['image'],\r\n\tpo: ['code'],\r\n\tpp: ['code'],\r\n\tppt: ['slide'],\r\n\tps: ['image'],\r\n\tpsd: ['image'],\r\n\tpy: ['code'],\r\n\tqt: ['video'],\r\n\tr: ['code'],\r\n\tra: ['audio'],\r\n\trar: ['archive'],\r\n\trb: ['code'],\r\n\trm: ['video'],\r\n\trmvb: ['video'],\r\n\troq: ['video'],\r\n\trpm: ['archive'],\r\n\trs: ['code'],\r\n\trst: ['text'],\r\n\trtf: ['text'],\r\n\ts: ['code'],\r\n\ts3m: ['audio'],\r\n\ts7z: ['archive'],\r\n\tscala: ['code'],\r\n\tscss: ['web'],\r\n\tsh: ['code', 'exec'],\r\n\tshar: ['archive'],\r\n\tsid: ['audio'],\r\n\tsrt: ['video'],\r\n\tsvg: ['image'],\r\n\tsvi: ['video'],\r\n\tswg: ['code'],\r\n\tswift: ['code'],\r\n\ttar: ['archive'],\r\n\ttbz2: ['archive'],\r\n\ttex: ['text'],\r\n\ttga: ['image'],\r\n\ttgz: ['archive'],\r\n\tthm: ['image'],\r\n\ttif: ['image'],\r\n\ttiff: ['image'],\r\n\ttlz: ['archive'],\r\n\tttf: ['font'],\r\n\ttxt: ['text'],\r\n\tv: ['code'],\r\n\tvb: ['code'],\r\n\tvcf: ['sheet'],\r\n\tvcxproj: ['code'],\r\n\tvob: ['video'],\r\n\twar: ['archive'],\r\n\twasm: ['web'],\r\n\twav: ['audio'],\r\n\twebm: ['video'],\r\n\twebp: ['image'],\r\n\twhl: ['archive'],\r\n\twma: ['audio'],\r\n\twmv: ['video'],\r\n\twoff: ['font'],\r\n\twoff2: ['font'],\r\n\twpd: ['text'],\r\n\twps: ['text'],\r\n\txcf: ['image'],\r\n\txcodeproj: ['code'],\r\n\txls: ['sheet'],\r\n\txlsx: ['sheet'],\r\n\txm: ['audio'],\r\n\txml: ['code'],\r\n\txpi: ['archive'],\r\n\txz: ['archive'],\r\n\tyuv: ['image', 'video'],\r\n\tzip: ['archive'],\r\n\tzipx: ['archive'],\r\n\tzsh: ['code', 'exec'],\r\n};\r\n// ====== APPLICATION CONFIGURATION END ======\r\n\r\n// ====== APPLICATION MAIN CODEBASE START =======\r\n\r\nconst CHECKS = {\r\n\tYES: 'yes',\r\n\tNO: 'no',\r\n};\r\n\r\nconst allExtensionsValues = Object.values(extensions).flatMap((type) => type);\r\nconst allExtensionEntries = Object.entries(extensions);\r\n\r\nlet limitErrorState = {\r\n\thasLimitError: false,\r\n\tlastFilesCount: 0,\r\n};\r\n\r\nlet fileNameConfigList = [];\r\nlet shouldContinueTranslation = CHECKS.YES;\r\nlet shouldContinueNextFolder = CHECKS.YES;\r\n\r\nconst { translationPath, fileType } = await initTranslationApp();\r\nconst fileTranslationLimit = await env('OVERRIDE_FILE_TRANSLATION_LIMIT');\r\nconst shouldLogVerboseLogs = await env('TRANSLATION_VERBOSE_LOGS');\r\nconst shouldReadFilesRecursively = await env('READ_FILES_RECURSIVELY_FOR_CHILDREN_DIRS');\r\nconst fileTranslationLimitNumber = +fileTranslationLimit || 2500;\r\n\r\nconst fileNames = await getFilesNames(\r\n\ttranslationPath,\r\n\tfileType,\r\n\tfileTranslationLimitNumber,\r\n\tshouldReadFilesRecursively === 'true'\r\n);\r\n\r\nconst width = 700;\r\nconst height = 600;\r\nconst initState = {\r\n\terrorMessage: null,\r\n\tsuccessMessage: null,\r\n\tloading: false,\r\n\thasFiles: !!fileNames.length,\r\n\tlimitError: limitErrorState.hasLimitError,\r\n};\r\n\r\nconst widgetConfig = {\r\n\talwaysOnTop: true,\r\n\ttitle: 'Music files translation widget',\r\n\twidth,\r\n\theight,\r\n\tcenter: true,\r\n\tstate: initState,\r\n\tbackgroundColor: '#0284C7',\r\n};\r\n\r\nconst translationWidget = await widget(\r\n\t`\r\n\t<div v-if=\"!limitError\" class=\"flex flex-col\">\r\n\t\t\r\n\t\t<div v-if=\"!hasFiles\">\r\n\t\t  <h1>No files for translation found in the selected directory. 🙁</h1>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div v-if=\"hasFiles\" class=\"p-2\">\r\n\t\t\t<h3 class=\"font-bold text-sky-900 text-center\">Base folder: ${translationPath}</h3>\r\n\r\n\t\t\t<div v-if=\"successMessage\">\r\n\t\t\t\t<span class=\"text-emerald-500 font-bold text-lg\">{{successMessage}}</span>\r\n\t\t\t\t<button id=\"open-translated-dir\" class=\"button bg-amber-100 text-amber-700 p-2 m-4 rounded\">Open directory</button>\r\n\t\t\t</div>\r\n\t\t\t<div v-else>\r\n\t\t\t\t<h1 class=\"text-sky-900 text-center\">⚠️ ${fileNames.length} files will be renamed and translated to greeklish!</h1>\r\n\t\t\t</div>\r\n\t\r\n\t\t\t<div v-if=\"loading\" class=\"loader\">\r\n            \tLoading ...\r\n        \t</div>\r\n\r\n\r\n\t\t\t<div v-if=\"errorMessage\" class=\"text-rose-600 font-bold text-lg\">\r\n\t\t\t\t{{errorMessage}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<hr/>\r\n\t\t\r\n\t\t<div v-if=\"!successMessage && hasFiles\" class=\"overflow-scroll max-h-80\">\r\n\t\t   <h3 class=\"text-sky-900\">Files preview list</h3>\r\n\t\t\t<ul role=\"list\">\r\n\t\t\t\t${fileNames\r\n\t\t\t\t\t.map(\r\n\t\t\t\t\t\t(f) => `<li class=\"list-none drop-shadow-md mb-5 border-b-2 border-neutral-900 border-solid\">\r\n\t\t\t\t\t\t<div class=\"text-amber-100 italic\">${f.oldName}</div>\r\n\t\t\t\t\t\t<strong class=\"text-amber-800\">⚠️ will be renamed to ⚠️</strong>\r\n\t\t\t\t\t\t<div class=\"text-lime-200\">${f.newName}</div>\r\n\t\t\t\t\t</li>`\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.join(' ')}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t\t<div class=\"overflow-scroll max-h-96\" v-else>\r\n\t\t\t\t<ul v-if=\"hasFiles\">\r\n\t\t\t\t\t${fileNames\r\n\t\t\t\t\t\t.map(\r\n\t\t\t\t\t\t\t(f) => `<li class=\"list-none drop-shadow-md mb-5 border-b-2\tborder-neutral-900 border-solid\">\r\n\t\t\t\t\t\t\t<strong>⭐️ New file name ⭐️ </strong>\r\n\t\t\t\t\t\t\t<div class=\"text-orange-200\">${f.newName}</div><hr/>\r\n\t\t\t\t\t\t</li>`\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.join(' ')}\r\n\t\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"!successMessage && !loading && hasFiles\">\r\n\t\t\t<button  id=\"rename-songs\" class=\"button bg-amber-100 text-amber-700 p-2 m-4 rounded\">Translate files</button>\r\n\t\t</div>\r\n\t</div>\r\n\t<div v-else class=\"p-2\">\r\n\t   <h1 class=\"text-rose-500\">MAX LIMIT ERROR: Too many files parsed (${limitErrorState.lastFilesCount})!</h1>\r\n\t\t<p class=\"text-orange-200\">Current limit set to ${fileTranslationLimitNumber}</p>\r\n\t</div>\r\n`,\r\n\twidgetConfig\r\n);\r\n\r\ntranslationWidget.onClick(async (data) => {\r\n\tif (data.targetId === 'open-translated-dir') await $`open ${translationPath}`;\r\n\r\n\tif (data.targetId === 'rename-songs' && !limitErrorState.hasLimitError) {\r\n\t\tconst hasFiles = !!fileNames.length;\r\n\r\n\t\ttry {\r\n\t\t\ttranslationWidget.setState({ ...initState, loading: true, hasFiles });\r\n\r\n\t\t\tlogVerboseInfo(shouldLogVerboseLogs);\r\n\r\n\t\t\trenameMp3Files(fileNames, async () => {\r\n\t\t\t\tconst successMessage = `${fileNames.length} files have been renamed successfully!`;\r\n\r\n\t\t\t\ttranslationWidget.setState({\r\n\t\t\t\t\t...initState,\r\n\t\t\t\t\thasFiles,\r\n\t\t\t\t\tsuccessMessage,\r\n\t\t\t\t\tloading: false,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(successMessage);\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconst errorMessage = `An error has occurred during translation! Error: ${error}`;\r\n\r\n\t\t\ttranslationWidget.setState({\r\n\t\t\t\t...initState,\r\n\t\t\t\terrorMessage,\r\n\t\t\t\thasFiles,\r\n\t\t\t\tloading: false,\r\n\t\t\t});\r\n\r\n\t\t\tconsole.error(errorMessage);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// ====== APPLICATION MAIN CODEBASE END =======\r\n\r\n// ====== APPLICATION UTIL FUNCTIONS START =======\r\n\r\nasync function initTranslationApp() {\r\n\tconst ROOT_TRANSLATION_PATH = await env('ROOT_TRANSLATION_PATH');\r\n\tconst uniqueFileTypes = new Set(allExtensionsValues);\r\n\tconst fileType = await arg('Select a file type to translate.', Array.from(uniqueFileTypes));\r\n\tconst translationPath = await path({\r\n\t\tstartPath: ROOT_TRANSLATION_PATH,\r\n\t\thint: 'Please add the specific folder path of files you want to translate.',\r\n\t\tonlyDirs: true,\r\n\t});\r\n\r\n\treturn { translationPath, fileType };\r\n}\r\n\r\nasync function getFilesNames(dir, fileType, fileTranslationLimit, shouldReadFilesRecursively = true) {\r\n\tif (fileNameConfigList.length >= fileTranslationLimit) {\r\n\t\tlimitErrorState = {\r\n\t\t\t...limitErrorState,\r\n\t\t\thasLimitError: true,\r\n\t\t\tlastFilesCount: fileNameConfigList.length,\r\n\t\t};\r\n\t\treturn [];\r\n\t}\r\n\r\n\tif (shouldContinueNextFolder === CHECKS.NO) {\r\n\t\treturn fileNameConfigList;\r\n\t}\r\n\r\n\tconst files = await readdir(dir);\r\n\r\n\tfor (const fileName of files) {\r\n\t\tif (shouldContinueTranslation === CHECKS.NO) return [];\r\n\r\n\t\tconst nextDir = getNextDir(dir, fileName);\r\n\t\tconst isDirectory = await isDir(nextDir);\r\n\r\n\t\tif (isDirectory && shouldReadFilesRecursively) {\r\n\t\t\tfileNameConfigList = await getFilesNames(nextDir, fileType, fileTranslationLimit);\r\n\t\t} else {\r\n\t\t\tconst isOsxFile = fileName.startsWith('._');\r\n\t\t\tconst shouldAddFileToList = isValidFileExtension(fileName, fileType) && !isOsxFile;\r\n\r\n\t\t\tif (shouldAddFileToList) {\r\n\t\t\t\tconst translatedMp3Name = translateToGreeklish(fileName);\r\n\r\n\t\t\t\tfileNameConfigList.push({\r\n\t\t\t\t\toldName: fileName,\r\n\t\t\t\t\tnewName: translatedMp3Name,\r\n\t\t\t\t\toldSrc: path.join(dir, fileName),\r\n\t\t\t\t\tnewSrc: path.join(dir, translatedMp3Name),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn fileNameConfigList;\r\n}\r\n\r\nfunction getExtensionTypes(fileType) {\r\n\tconst isValidExtensionType = allExtensionsValues.some((type) => type === fileType);\r\n\r\n\tif (isValidExtensionType)\r\n\t\treturn allExtensionEntries\r\n\t\t\t.map(([ext, types]) => {\r\n\t\t\t\tif (types.includes(fileType)) return ext;\r\n\t\t\t\treturn null;\r\n\t\t\t})\r\n\t\t\t.filter((item) => !!item);\r\n}\r\n\r\nfunction replaceText(text, replacementMap, isExactMatch = false, ignoreCharacters = '', regExOptions = 'g') {\r\n\tlet regexString, regex;\r\n\r\n\tif (typeof text === 'string' && text.length > 0) {\r\n\t\treplacementMap.forEach(function (replacementItem) {\r\n\t\t\tif (isExactMatch) {\r\n\t\t\t\tregexString = replacementItem.find;\r\n\t\t\t} else {\r\n\t\t\t\tregexString = '[' + replacementItem.find + ']';\r\n\t\t\t}\r\n\r\n\t\t\tif (ignoreCharacters !== '') {\r\n\t\t\t\tregexString = '(?![' + ignoreCharacters + '])' + regexString;\r\n\t\t\t}\r\n\r\n\t\t\tregex = new RegExp(regexString, regExOptions);\r\n\r\n\t\t\ttext = text.replace(regex, replacementItem.replace);\r\n\t\t});\r\n\t}\r\n\r\n\treturn text;\r\n}\r\n\r\nfunction getNextDir(dirName, fileName) {\r\n\treturn path.join(dirName, fileName);\r\n}\r\n\r\nfunction translateToGreeklish(mp3Text) {\r\n\treturn replaceText(mp3Text, greekToGreeklishMap, true);\r\n}\r\n\r\nfunction isValidFileExtension(fileName, fileType = 'audio') {\r\n\tconst splittedAudioFile = fileName.split('.');\r\n\tif (!splittedAudioFile.length) return false;\r\n\r\n\tconst fileExtension = splittedAudioFile[splittedAudioFile.length - 1];\r\n\r\n\treturn getExtensionTypes(fileType).includes(fileExtension);\r\n}\r\n\r\nfunction renameMp3Files(filesConfigList, onRenamingCompletion) {\r\n\tif (filesConfigList.length)\r\n\t\tfilesConfigList.forEach((f, i) => {\r\n\t\t\tfs.rename(f.oldSrc, f.newSrc, (err) => {\r\n\t\t\t\tif (err) console.error(err);\r\n\t\t\t\tif (i === filesConfigList.length - 1) onRenamingCompletion();\r\n\t\t\t});\r\n\t\t});\r\n}\r\n\r\nfunction logVerboseInfo(shouldLogVerboseLogs) {\r\n\tif (shouldLogVerboseLogs === 'yes') {\r\n\t\tconsole.log(`RENAMING ${fileNames.length} FILES......`);\r\n\r\n\t\tfileNames.forEach((config) => {\r\n\t\t\tconsole.log(`${config.oldName} =====> ${config.newName}`);\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// ====== APPLICATION UTIL FUNCTIONS END =======\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-06T22:38:44Z"},{"avatar":"https://avatars.githubusercontent.com/u/86744469?u=5f51b0d3c0e4cb3c8ecb6ade8a5182ad07389f3d&v=4","user":"jacopo-degattis","author":"Jacopo De Gattis","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/941","url":"","title":"Spotify Lyrics Widget (Musixmatch service)","command":"spotify-lyrics-widget-musixmatch-service","content":"Hi everyone,\r\nIn the last few days I've been implementing a Spotify Lyrics' Widget which provide full lyrics from \"Musixmatch\" service. This also includes the highlighting of the current track line, exactly as it is in the Spotify official lyrics.\r\n\r\nA few details about this project:\r\n - First thing first lyrics are fetched from the Spotify \"Musixmatch\" service, available after their partnership together. I extracted the API from the Official Spotify android version therefore it may be considered an infringement of their Terms of Service. I then suggest you to use this Widget with a secondary account to avoid your primary account begin banned (is really difficult to get banned btw).\r\n - Another important thing to notice is that I made this project for learning purposes only, I wanted to catch the lyrics API and reimplement it inside my widget. As I said earlier I think this may be against Spotify Terms of Service so use it at your own risk.\r\n - If you want to configure your credentials you can simply go inside the state variable and set the `email` and `password` fields inside the `spotifyUser` object.\r\n - The first time you launch the app, the token will be store inside a .json file using the `db` feature of `kit`. However this token will expire and when that happens the  widget will automatically fetch a new one for you.\r\n - You can click on every line to set the current track position to that exact line.\r\n - The currently sang line is highlighted in white inside the widget.\r\n - You can change the background color by switching the color in the `backgroundColor` field inside the state variable.\r\n- Right now if a track doesn't have lyrics the \"Loading...\" text will appear. I'm working for a better solution.\r\n\r\nPreview:\r\n![Screenshot 2022-11-06 at 11 43 54](https://user-images.githubusercontent.com/86744469/200166276-38377773-be61-4058-9c3c-e1065fd585e5.png)\r\n\r\nFeel free to ask me everything in case of any doubts or problem.\r\nHere's the code, enjoy ! \r\n\r\n```ts script\r\nimport \"@johnlindquist/kit\"\r\n\r\nimport { WidgetAPI } from \"@johnlindquist/kit/types/pro\";\r\nimport { ChildProcess, exec as executeCustom } from \"child_process\";\r\nimport { Browser } from \"puppeteer\";\r\n\r\nconst puppeteer = await npm(\"puppeteer\");\r\nconst spotify = await npm(\"spotify-node-applescript\");\r\n\r\nconst credentialsStorage = await db({ accessToken: null })\r\n\r\ninterface Track {\r\n    artist: string,\r\n    album: string,\r\n    disc_number: number,\r\n    duration: number,\r\n    played_count: number,\r\n    track_number: number,\r\n    starred: boolean,\r\n    popularity: number,\r\n    id: string,\r\n    name: string,\r\n    album_artist: string,\r\n    artwork_url: string,\r\n    spotify_url: string\r\n}\r\n\r\ninterface RealtimeLyricsLines {    \r\n    startTimeMs: string,\r\n    words: string,\r\n    syllables: [],\r\n    endTimeMs: string\r\n}\r\n\r\ninterface RealtimeLyrics {\r\n    lyrics: {\r\n        syncType: string,\r\n        lines: Array<RealtimeLyricsLines>,\r\n        provider: string,\r\n        providerLyricsId: string,\r\n        providerDisplayName: string,\r\n        syncLyricsUri: string,\r\n        isDenseTypeface: boolean,\r\n        alternatives: Array<[]>,\r\n        language: string,\r\n        isRtlLanguage: boolean,\r\n        fullscreenAction: string,\r\n    },\r\n    colors: { background: number, text: number, highlightText: number },\r\n    hasVocalRemoval: boolean\r\n}\r\n\r\ninterface State {\r\n    position: number,\r\n    currentLine: number,\r\n    currentLyrics: Array<RealtimeLyricsLines>,\r\n    previousProcess: ChildProcess,\r\n    isProcessLaunched: boolean,\r\n    previousTrack: string,\r\n    backgroundColor: string,\r\n    currentTrack: {\r\n        title: string,\r\n        artist: string,\r\n        isLoading: boolean,\r\n        position: number,\r\n    },\r\n    spotifyUser: {\r\n        email: string,\r\n        password: string,\r\n        tokenMaxAttempts: number\r\n    }\r\n}\r\n\r\nconst state: State = {\r\n    position: 0,\r\n    currentLine: 0,\r\n    currentLyrics: null,\r\n    previousProcess: null,\r\n    isProcessLaunched: false,\r\n    previousTrack: null,\r\n    backgroundColor: \"#984E51\",\r\n    currentTrack: {\r\n        title: \"\",\r\n        artist: \"\",\r\n        isLoading: null,\r\n        position: 0\r\n    },\r\n    spotifyUser: {\r\n        email: \"\",\r\n        password: \"\",\r\n        tokenMaxAttempts: 2\r\n    }\r\n}\r\n\r\nconst wgt: WidgetAPI = await widget(`\r\n    <div class=\"main-container\">\r\n        <header>\r\n            <h2>{{currentTrack.title}} - {{currentTrack.artist}}</h2>\r\n        </header>\r\n        <div v-if=\"currentTrack.isLoading\" class=\"loader\">\r\n            Loading ...\r\n        </div>\r\n        <div class=\"lyrics-container\" v-else>\r\n            <label v-for=\"(line, index) in currentLyrics\">\r\n                <template v-if=\"currentLine === index\">            \r\n                    <div class=\"highlighted\">{{line.words}}</div>\r\n                </template>\r\n                <template v-else>\r\n                    <div :key=\"index\" :data-name=\"index\" :data-index=\"index\" id=\"unfocused-line\" class=\"grayed-out\">{{line.words}}</div>\r\n                </template>\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <style>\r\n        .main-container {\r\n            padding-top: 50px;\r\n            padding-bottom: 50px;\r\n            padding-left: 50px;\r\n            overflow: scroll;\r\n            width: 700px;\r\n            height: 1200px;\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n        \r\n        .lryics-container {\r\n            margin-left: 0px;\r\n            padding-left: 0px;\r\n        }\r\n\r\n        .highlighted {\r\n            color: white;\r\n        }\r\n\r\n        .grayed-out {\r\n            color: #2e2e2e;\r\n        }\r\n\r\n        .grayed-out:hover {\r\n            cursor: pointer;\r\n            transition-duration: 0.2s;\r\n            color: white;\r\n        }\r\n\r\n        .lyrics-container > label {\r\n            display: block;\r\n            font-size: 1.4rem;\r\n            font-weight: 600;\r\n        }\r\n\r\n    </style>\r\n\r\n    <script>\r\n        const handler = (event) => {\r\n            ipcRenderer.send(\"WIDGET_CLICK\", {\r\n                targetId: \"jumpto\",\r\n                index: event.target.dataset.index,\r\n                name: event.target.dataset.name,\r\n                widgetId: window.widgetId,\r\n            })\r\n        }\r\n\r\n        const setupButtons = () => {\r\n            const buttons = document.querySelectorAll(\"#unfocused-line\");\r\n            buttons.forEach((button) => {\r\n                button.removeEventListener(\"click\", handler);\r\n                button.addEventListener(\"click\", handler);\r\n            })\r\n        }\r\n\r\n        setTimeout(setupButtons, 2000);\r\n        window.onSetState = setupButtons;\r\n        \r\n    </script>\r\n`, {\r\n    width: 700,\r\n    height: 1200,\r\n    alwaysOnTop: true,\r\n    backgroundColor: state.backgroundColor\r\n})\r\n\r\nwgt.onClick((event: any) => {\r\n    if (event.targetId === \"jumpto\") {\r\n        const seconds = parseInt(state.currentLyrics[parseInt(event.name)].startTimeMs) / 1000;\r\n        spotify.jumpTo(seconds, () => {});\r\n    }\r\n})\r\n\r\nconst fetchToken = async (browser: Browser) => {\r\n    const page = await browser.newPage();\r\n\r\n    await page.goto(\"https://accounts.spotify.com/en/login?continue=https%3A%2F%2Fopen.spotify.com%2F\", {\r\n        waitUntil: 'networkidle0',\r\n    });\r\n\r\n    if (!await page.$(\"#login-username\")) return;\r\n\r\n    await page.type(\"#login-username\", state.spotifyUser.email);\r\n    await page.type(\"#login-password\", state.spotifyUser.password);\r\n        \r\n    Promise.resolve([\r\n        page.click(\"#login-button\"),\r\n        page.waitForNavigation(),\r\n    ])\r\n\r\n    const scriptTag = await page.waitForSelector('script[id=session]');\r\n    const value = await scriptTag.evaluate(el => el.textContent);\r\n\r\n    return JSON.parse(value);\r\n}\r\n\r\nconst syncLyrics: (\r\n    lyrics: Array<RealtimeLyricsLines>,\r\n    time: number\r\n) => number = (lyrics, time) => {\r\n    const scores = [];\r\n\r\n    lyrics.forEach((lyric) => {\r\n        const score = time - parseInt(lyric.startTimeMs);\r\n\r\n        if (score >= 0) scores.push(score);\r\n    })\r\n\r\n    if (scores.length === 0) return;\r\n\r\n    const closest = Math.min(...scores);\r\n\r\n    return scores.indexOf(closest);\r\n}\r\n\r\nconst fetchRealtimeLyrics: (\r\n    trackId: string,\r\n    browser: Browser,\r\n    attempt: number\r\n) => Promise<RealtimeLyrics> = async (trackId, browser, attempt) => {\r\n    const endpoint = \"https://spclient.wg.spotify.com/color-lyrics/v2/track\";\r\n    \r\n    let token = credentialsStorage.data.accessToken;\r\n\r\n    if (!token) {\r\n        token = await fetchToken(browser);\r\n        credentialsStorage.data.accessToken = token.accessToken;\r\n        credentialsStorage.write();\r\n        token = token.accessToken;\r\n    }\r\n\r\n    if (!token) return;\r\n\r\n    const request = await fetch(`${endpoint}/${trackId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            \"accept\": \"application/json\",\r\n            \"authorization\": `Bearer ${token}`,\r\n            \"user-agent\": \"Spotify/8.7.78.373 Android/29 (Android SDK built for arm64)\",\r\n            \"spotify-app-version\": \"8.7.78.373\"\r\n        }\r\n    })\r\n\r\n    if (request.status === 401 && attempt < state.spotifyUser.tokenMaxAttempts) {\r\n        credentialsStorage.data.accessToken = null;\r\n        return await fetchRealtimeLyrics(trackId, browser, attempt++);\r\n    }\r\n\r\n    if (!(request.status === 200)) return;\r\n\r\n    const data: RealtimeLyrics = await request.json();\r\n\r\n    return data\r\n}\r\n\r\nconst script = `\r\n    tell application \"Spotify\"\r\n        repeat until application \"Spotify\" is not running\r\n            set cstate to ((player position * 1000) as integer)\r\n            log cstate\r\n        end repeat\r\n    end tell\r\n`\r\n\r\nconst pipeCommandOutput = (command: string, callback: (x: any) => void) => {\r\n    if (state.previousProcess) state.previousProcess.kill();\r\n\r\n    const cmd = executeCustom(command);\r\n    cmd.stdout.setEncoding(\"utf8\");\r\n    cmd.stderr.on(\"data\", callback);\r\n    return cmd;\r\n}\r\n\r\nconst browser: Browser = await puppeteer.launch();\r\n\r\nsetInterval(() => {\r\n    spotify.isRunning((err: any, isRunning: boolean) => {\r\n        if (!isRunning || err) return\r\n\r\n        spotify.getTrack(async (err: any, track: Track) => {\r\n            if (err) return\r\n\r\n            if (state.previousTrack !== track.name) {\r\n\r\n                state.previousTrack = track.name;\r\n\r\n                wgt.setState({ ...state, position: 0, currentLine: 0 })\r\n                wgt.setState({ ...state, currentTrack: { isLoading: true }})\r\n\r\n                const data = await fetchRealtimeLyrics(track.id.split(\":\").pop(), browser, 0);\r\n                \r\n                if (!data) return;\r\n\r\n                state.previousProcess = pipeCommandOutput(`osascript -e '${script}'`, (x: any) => {\r\n                    const currIndex = syncLyrics(data.lyrics.lines, x)\r\n                    wgt.setState({ position: x, currentLine: currIndex })\r\n                })\r\n\r\n                wgt.setState({\r\n                    ...state,\r\n                    currentTrack: {\r\n                        title: track.name,\r\n                        artist: track.artist,\r\n                        isLoading: false,\r\n                        position: 0\r\n                    },\r\n                    currentLyrics: data.lyrics.lines\r\n                })\r\n\r\n                state.currentLyrics = data.lyrics.lines;\r\n                state.isProcessLaunched = true;\r\n            }\r\n        })\r\n    })\r\n}, 1000)\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-06T10:44:50Z"},{"menu":"Chrome Snippet runner","description":"","author":"Jacob Cofman","twitter":"JCofman","avatar":"https://avatars.githubusercontent.com/u/2118956?u=dd12813efdeb91151f98fcecd5c078f29bed6ff9&v=4","user":"JCofman","discussion":"https://github.com/johnlindquist/kit/discussions/939","url":"","title":"Run bookmarklets from Script Kit","command":"run-bookmarklets-from-script-kit","content":"I love to run Bookmarklets for custom developer tools like a11y. Thanks to Script Kit I can run them without polluting my bookmarks or having to open dev tools.\r\n\r\nAn example script I love to use. \r\n\r\n```js\r\n//a11y.js\r\n(function () {\r\n  var tota11y = document.createElement('SCRIPT');\r\n  tota11y.type = 'text/javascript';\r\n  tota11y.src = 'https://cdnjs.cloudflare.com/ajax/libs/tota11y/0.1.6/tota11y.min.js';\r\n  document.getElementsByTagName('head')[0].appendChild(tota11y);\r\n})();\r\n```\r\n\r\nThere are many more scripts you can easily add e.g. https://github.com/bgrins/devtools-snippets an older collection I started to create https://github.com/JCofman/ChromeBrowserSnippets\r\n\r\n1. Make sure you allow your mac to run JS from Apple Events. *View > Settings > Developer > Allow JavaScript from Apple Events*\r\n\r\n\r\n[Open chrome-tab-snippet-runner in Script Kit](https://scriptkit.com/api/new?name=chrome-tab-snippet-runner&url=https://gist.githubusercontent.com/JCofman/3898397295547baa6157a1b52af789dc/raw/63e669395fcf7c99bb857233050f834b659f51e4/chrome-tab-snippet-runner.ts\")\r\n\r\n```js\r\n// Menu: Chrome Snippet runner\r\n// Description: List all scripts or bookmarklets you have and runs them inside chrome.\r\n// Author: jcofman\r\n// Twitter: @jcofman\r\nimport \"@johnlindquist/kit\";\r\nimport { readdirSync, readFileSync } from \"fs\";\r\n\r\nlet SNIPPETS_FOLDER = await env(\"SNIPPET_FOLDER\", {\r\n  hint: md(\r\n    `Path to folder e.g. /Users/jacobcofman/Documents/chrome-snippets`\r\n  ),\r\n  ignoreBlur: true,\r\n  secret: false,\r\n})\r\n\r\nlet snippetsFolder = await env(\"SNIPPET_FOLDER\")\r\n\r\nif (!(await isDir(snippetsFolder))) {\r\n  mkdir(\"-p\", snippetsFolder)\r\n}\r\n\r\nconst getSnippets = (folder) => {\r\n  const snippets = [];\r\n  const files = readdirSync(folder);\r\n  files.forEach((file) => {\r\n    if (file.endsWith(\".js\")) {\r\n      snippets.push(file);\r\n    }\r\n  });\r\n  return snippets;\r\n};\r\n\r\n\r\nlet snippetsToRun = getSnippets(SNIPPETS_FOLDER);\r\n\r\n\r\nlet snippetFileToRun = await arg(\r\n  \"Select Snippet to run:\",\r\n  snippetsToRun.map((file) => file)\r\n);\r\n\r\nconst snippetFileContentToRun = readFileSync(\r\n  SNIPPETS_FOLDER + \"/\" + snippetFileToRun,\r\n  \"utf8\"\r\n);\r\n\r\nconst runSnippet = async () => {\r\n  await applescript(String.raw`\r\n  tell application \"Google Chrome\"\r\n      execute front window's active tab javascript \"${snippetFileContentToRun}\"\r\n  end tell\r\n  `);\r\n}\r\n\r\nawait runSnippet();\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-02T21:21:28Z"},{"name":"Base64","avatar":"https://avatars.githubusercontent.com/u/119617?v=4","user":"gavriguy","author":"Gavri (Gabriel) Guy","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/937","url":"https://gist.githubusercontent.com/gavriguy/542168d906cd297dffffa7fd2fe8d482/raw/c5c828ad89f3f93db5ff3d599b5f65643bb256dd/base-64.js","title":"Base64 encode & decode","command":"base64-encode-and-decode","content":"[Open Base64 in Script Kit](https://scriptkit.com/api/new?name=base-64&url=https://gist.githubusercontent.com/gavriguy/542168d906cd297dffffa7fd2fe8d482/raw/c5c828ad89f3f93db5ff3d599b5f65643bb256dd/base-64.js)\r\n\r\n```js\r\n// Name: Base64\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nonTab(\"Base64 Encode\", async () => {\r\n  const stringToEncode = await arg();\r\n  editor(Buffer.from(stringToEncode, \"utf8\").toString(\"base64\"));\r\n});\r\n\r\nonTab(\"Base64 Decode\", async () => {\r\n  const base64String = await arg();\r\n  const buff = Buffer.from(base64String, \"base64\");\r\n  editor(buff.toString(\"utf-8\"));\r\n});\r\n\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-01T19:11:21Z"},{"name":"Get Data from a Widget","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/935","url":"","title":"Widget State with Events Example","command":"widget-state-with-events-example","content":"\r\n[Open get-data-from-a-widget in Script Kit](https://scriptkit.com/api/new?name=get-data-from-a-widget&url=https://gist.githubusercontent.com/johnlindquist/7fc0d54ef98763ff55a5c0a39eae9a61/raw/c099b8f98603367d4d5c1f88f02adedda9dfa104/get-data-from-a-widget.ts\")\r\n\r\n```js\r\n// Name: Get Data from a Widget\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet state = {\r\n  firstName: \"\",\r\n  lastName: \"\",\r\n  fullName: \"\",\r\n}\r\n\r\nlet w = await widget(\r\n  `\r\n<div class=\"flex flex-col justify-center items-center text-white\">\r\n    <form class=\"flex flex-col\">\r\n        <input id=\"first\" type=\"text\" class=\"text-black\" placeholder=\"First Name\" autofocus>\r\n        <input id=\"last\" type=\"text\" class=\"text-black\" placeholder=\"Last Name\">\r\n        <button id=\"submit\" type=\"submit\">Submit</button>\r\n    </form>\r\n    <div class=\"flex flex-col\">\r\n        <div>{{firstName}} {{lastName}}</div>        \r\n        <div>{{fullName}}</div>\r\n    </div>\r\n</div>\r\n`,\r\n  {\r\n    height: 360,\r\n    width: 360,\r\n    state,\r\n  }\r\n)\r\n\r\nw.onInput(event => {\r\n  if (event.targetId === \"first\") {\r\n    state.firstName = event.value\r\n  }\r\n  if (event.targetId === \"last\") {\r\n    state.lastName = event.value\r\n  }\r\n\r\n  w.setState(state)\r\n})\r\n\r\nw.onClick(event => {\r\n  if (event.targetId === \"submit\") {\r\n    state.fullName = `Hello, ${state.firstName} ${state.lastName}`\r\n  }\r\n\r\n  w.setState(state)\r\n})\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-11-01T16:26:02Z"},{"name":"Post URL with Metadata to Tana","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/930","url":"","title":"Post Current URL to Tana with Metadata","command":"post-current-url-to-tana-with-metadata","content":"[Open post-url-to-tana in Script Kit](https://scriptkit.com/api/new?name=post-url-to-tana&url=https://gist.githubusercontent.com/johnlindquist/4aa8b779f44754012c16831d6455bdf0/raw/d82db6c136d211b773af12cb786a5eea8323e75d/post-url-to-tana.ts\")\r\n\r\n```js\r\n// Name: Post URL with Metadata to Tana\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet og = await npm(\"opengraph-io\")\r\n\r\n// You'll need to sign-up for https://www.opengraph.io/\r\n// Create a free account and grab an API key from: https://dashboard.opengraph.io/apis/Opengraphio\r\n// Paste the token when prompted for OPENGRAPH_API_ID_TOKEN\r\nlet openGraph = og({\r\n  appId: await env(\"OPENGRAPH_API_ID_TOKEN\", {\r\n    hint: `Grab a token from [here](https://dashboard.opengraph.io/apis/Opengraphio)`,\r\n  }),\r\n  cacheOk: true, // If a cached result is available, use it for quickness\r\n  useProxy: false, // Proxies help avoid being blocked and can bypass capchas\r\n  maxCacheAge: 432000000, // The maximum cache age to accept\r\n  acceptLang: \"en-US,en;q=0.9\", // Language to present to the site.\r\n  fullRender: false, // This will cause JS to execute when rendering to deal with JS dependant sites\r\n})\r\n\r\nlet url = await getActiveTab()\r\n// on windows, remove above and use:\r\n// let url = await arg(\"Paste URL here\")\r\n\r\nlet result = await openGraph.getSiteInfo(url)\r\ndebugger\r\n\r\nif (result.openGraph.error) {\r\n  await editor(result.openGraph.error)\r\n} else {\r\n  let { title, site_name, description } = result.openGraph\r\n\r\n  // In the future, Tana will support more than just raw text\r\n  // For now, only text is supported.\r\n\r\n  // This gives you a chance to tweak the Title/Description before posting:\r\n  let note = await template(\r\n    `\r\n${title} - ${site_name}\r\n    - ${url}\r\n    - ${description}\r\n    `.trim()\r\n  )\r\n\r\n  let TANA_URL =\r\n    \"https://europe-west1-tagr-prod.cloudfunctions.net\"\r\n\r\n  // Select a node in Tana, hit cmd+K from mac, ctrl+K for windows, search for \"API\" to generate a token\r\n  // Paste the token when prompted\r\n  let TANA_TOKEN_TODOS = await env(\"TANA_TOKEN_TODOS_TWO\")\r\n  await hide()\r\n  //   await copy(note.trim()) if you prefer to copy/paste you can use this instead\r\n  await get(`${TANA_URL}/addToNode`, {\r\n    headers: {\r\n      authorization: `Bearer ${TANA_TOKEN_TODOS}`,\r\n    },\r\n    params: {\r\n      note: note.trim(),\r\n    },\r\n  })\r\n}\r\ndebugger\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-28T20:29:35Z"},{"name":"tana-github","avatar":"https://avatars.githubusercontent.com/u/4407263?u=fa7f37727ea98fd7f24e8409d0fda4c451c48eae&v=4","user":"theianjones","author":"Ian Jones","twitter":"_jonesian","discussion":"https://github.com/johnlindquist/kit/discussions/927","url":"","title":"Github tana-paste example","command":"github-tana-paste-example","content":"\r\nThis lets you run the script when you are viewing a pull request to prefill some metadata around the pr to paste into [Tana](https://tana.inc)\r\n\r\n[Open tana-github in Script Kit](https://scriptkit.com/api/new?name=tana-github&url=https://gist.githubusercontent.com/theianjones/de9d5a69f386a30a925f1a19df2d117b/raw/151cb65a92c9133bf1b0e3d3b510a5953ee0deb5/tana-github.ts\")\r\n\r\n```js\r\n// Name: tana-github\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst { Octokit } = await npm(\"octokit\");\r\nconst UrlPattern = await npm(\"url-pattern\");\r\n\r\nconst client = new Octokit({\r\n  auth: await env(\"GITHUB_PULLREQUEST_TOKEN\"),\r\n});\r\n\r\nconst repoPattern = new UrlPattern(\r\n  \"(http(s)\\\\://)(:subdomain.):domain.:tld(\\\\::port)(/:owner)(/:repo)/pull(/:id)\"\r\n);\r\nconst tab = await getActiveTab(\"Brave\");\r\n\r\nconst { owner, repo, id } = repoPattern.match(tab);\r\n\r\nconst res = await client.rest.pulls.get({\r\n  owner,\r\n  repo,\r\n  pull_number: id,\r\n});\r\n\r\nconst { title, user, html_url } = res.data;\r\n\r\nawait copy(`%%tana%%\r\n- ${title} #pull request\r\n    - Pull Request URL:: ${html_url}\r\n    - Github User:: ${user.login}\r\n`);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-27T22:55:20Z"},{"name":"Grab Readwise Highlights","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/926","url":"","title":"Format Readwise to Tana","command":"format-readwise-to-tana","content":"I made this at the request of some Tana users. I'm not a Tana user myself, so if you have any feedback, please share!\r\n\r\n```js\r\n// Name: Grab Readwise Highlights\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet API_TOKEN = await env(\"TANA_API_TOKEN\")\r\nlet HIGHLIGHTS_URL = \"https://readwise.io/api/v2/export/\"\r\n\r\n// Credit to: https://github.com/tanainc/tana-paste-examples\r\n// Copy/pasted and refactored to Script Kit: scriptkit.com\r\n\r\nlet getItemsFromReadwise = async (daysToFetch = 1) => {\r\n  let dateOffset = 24 * 60 * 60 * 1000 * daysToFetch\r\n  let updatedAfterDate = new Date()\r\n  updatedAfterDate.setTime(\r\n    updatedAfterDate.getTime() - dateOffset\r\n  )\r\n\r\n  let response = await fetch(\r\n    `${HIGHLIGHTS_URL}?updatedAfter=${updatedAfterDate.toISOString()}`,\r\n    {\r\n      headers: {\r\n        Authorization: `Token ${API_TOKEN}`,\r\n      },\r\n    }\r\n  )\r\n  return await response.json()\r\n}\r\n\r\nlet daysToFetch = await arg(\"Days to fetch\")\r\nlet { results } = await getItemsFromReadwise(\r\n  parseInt(daysToFetch, 10)\r\n)\r\n\r\nlet result = results.map(book => {\r\n  let isValidSourceURL =\r\n    book.source_url?.startsWith(\"https://\")\r\n  let hasHighlights = book.highlights?.length > 0\r\n\r\n  let title = `${book.title}`\r\n  let url = ``\r\n  if (isValidSourceURL) {\r\n    url = `URL:: ${book.source_url}`\r\n  }\r\n  let type = `type:: ${book.category?.replace(/s$/, \"\")}`\r\n\r\n  let author = `author:: ${book.author}`\r\n\r\n  let highlights = book.highlights.map(highlight => {\r\n    let lines = highlight.text.split(\"\\n\")\r\n    let cleanLines = lines.map(line => {\r\n      let cleanedLine = line.replace(/•\\s+/, \"\").trim()\r\n      return `${cleanedLine}`\r\n    })\r\n\r\n    let note = ``\r\n\r\n    if (highlight.note) {\r\n      note = `${highlight.note}`\r\n    }\r\n\r\n    return `\r\n${cleanLines}   \r\n\r\n${note}\r\n    `.trim()\r\n  })\r\n\r\n  let maybeUrl = url\r\n    ? `\r\n    - ${url}\r\n`\r\n    : ``\r\n\r\n  let maybeHighlights = highlights?.length\r\n    ? `\r\n    - Highlights\r\n        - ${highlights.join(\"\\n\")}`\r\n    : ``\r\n\r\n  return `\r\n- ${title} #from-the-web \r\n${maybeUrl}\r\n    - ${type}\r\n    - ${author}\r\n${maybeHighlights}    \r\n  `.trim()\r\n})\r\n\r\n// because I'm on a trial account (I assume)\r\nlet [skip, ...rest] = result\r\n\r\n// copies the readwise content to the clipboard\r\n// I'm using slice to only take 2 results for demo purposes\r\nawait copy(`%%tana%%\r\n\r\n${rest.slice(0, 2).join(\"\\n\")}\r\n`)\r\n```\r\n\r\n[Open grab-readwise-highlights in Script Kit](https://scriptkit.com/api/new?name=grab-readwise-highlights&url=https://gist.githubusercontent.com/johnlindquist/37a0c6e2fab639d418010e05fc6b33ef/raw/ccb7524e996f3799afa59a2f427e2d538becb7c2/grab-readwise-highlights.ts\")","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-27T20:36:37Z"},{"avatar":"https://avatars.githubusercontent.com/u/2262858?u=d02ad0d859aa1c3f879b70061bf7e4a4338ba150&v=4","user":"tayiorbeii","author":"Taylor Bell","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/923","url":"","title":"Select all files in Finder containing substring or given extension","command":"select-all-files-in-finder-containing-substring-or-given-extension","content":"No more holding `CMD` and awkwardly clicking a list of files in Finder!\r\n\r\n[Select all by extension](https://scriptkit.com/api/new?name=select-all-by-extension&url=https://gist.githubusercontent.com/tayiorbeii/a5aecbbe1a2abad16550285e796ce905/raw/2770da755ee9536abc5320d9895189911cbe276e/select-all-by-extension.js)\r\n\r\n[Select all by filename](https://scriptkit.com/api/new?name=select-all-by-filename&url=https://gist.githubusercontent.com/tayiorbeii/54d7b096bf2a857bf423635e45c62141/raw/d1255078f6713706c9c87bbe2ff268be9bf8939a/select-all-by-filename.js)","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-24T17:29:42Z"},{"name":"Bandcamp Album Player","description":"","author":"Josh Davenport-Smith","twitter":"jdprts","avatar":"https://avatars.githubusercontent.com/u/757828?v=4","user":"joshdavenport","discussion":"https://github.com/johnlindquist/kit/discussions/920","url":"","title":"Bandcamp album player","command":"bandcamp-album-player","content":"![Screenshot 2022-10-19 at 14 23 37](https://user-images.githubusercontent.com/757828/196703457-f4f02bfe-55d2-4a44-b2b1-a01060e1064c.png)\r\n\r\nRun the script, give it a bandcamp URL (tracks also work) then as long as the artist has allowed embedding (most of them seem to, I think you have to explicitiy disable it) then you get a floating bandcamp player!\r\n\r\nHere are some URLs to have a play with:\r\n\r\n* https://garekdruss.bandcamp.com/album/soft-fascination-2\r\n* https://mansurbrown.bandcamp.com/album/naqi-vol-1\r\n* https://surprisechef.bandcamp.com/album/education-recreation\r\n* https://pyecorneraudio.bandcamp.com/album/social-dissonance\r\n\r\n---\r\n\r\n[Open bandcamp-album-player in Script Kit](https://scriptkit.com/api/new?name=bandcamp-album-player&url=https://gist.githubusercontent.com/joshdavenport/184ec5c89a766f931b0a11aef2e19e46/raw/82715fca347300e40dd90a6c23e26f599c01fe1c/bandcamp-album-player.ts\")\r\n\r\n```js\r\n// Name: Bandcamp Album Player\r\n// Description: Stream a bandcamp album\r\n// Author: Josh Davenport-Smith\r\n// Twitter: @jdprts\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport { WidgetAPI } from \"@johnlindquist/kit/types/pro\";\r\nconst jsdom = await npm('jsdom');\r\n\r\nconst INITIAL_PLAYER_WIDTH = 500;\r\nconst MAX_PLAYER_WIDTH = 740;\r\nconst INITIAL_PLAYER_HEIGHT = 120;\r\n\r\nconst htmlDecode = (input: string) => {\r\n    const doc = new jsdom.JSDOM(`<!DOCTYPE html><div>${input}</div>`);\r\n    return doc.window.document.querySelector('div').textContent;\r\n}\r\n\r\nconst getStyles = () => `\r\n:root {\r\n    --dragbar-width: 30px;\r\n}\r\n\r\niframe {\r\n    position: absolute;\r\n    left: var(--dragbar-width);\r\n    top: 0;\r\n    width: calc(100% - var(--dragbar-width));\r\n    height: 100%;\r\n    -webkit-app-region: no-drag;\r\n}\r\n\r\n#dragbar {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: var(--dragbar-width);\r\n    cursor: grab;\r\n    background: #F1F1F1;\r\n}\r\n\r\n#dragbar:after {\r\n    content: '';\r\n    position: absolute;\r\n    inset: 6px;\r\n    background: url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1IiBoZWlnaHQ9IjUiPgo8cmVjdCB3aWR0aD0iNSIgaGVpZ2h0PSI1IiBmaWxsPSIjRjFGMUYxIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIGZpbGw9IiNjY2MiPjwvcmVjdD4KPC9zdmc+\");\r\n}\r\n\r\n#dragbar:active {\r\n    cursor: grabbing;\r\n}\r\n`;\r\n\r\nconst getScripts = (albumId: number) => `\r\n(() => {\r\n    const url = 'https://bandcamp.com/EmbeddedPlayer/album=${albumId}/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/artwork=small/transparent=true/';\r\n    const iframe = document.createElement('iframe');\r\n    iframe.setAttribute('src', url);\r\n    iframe.setAttribute('seamless', true);\r\n    document.body.appendChild(iframe);\r\n})();\r\n`;\r\n\r\n// Obtain the album (or track) URL\r\nconst albumUrl = await arg('What is the album URL?');\r\n\r\n// Bail if the URL is invalid\r\nif (!albumUrl.includes('bandcamp.com/album') && !albumUrl.includes('bandcamp.com/track')) {\r\n    throw new Error('Sorry, I don\\'t recognise that URL');\r\n}\r\n\r\n// Give feedback that we're metadata for the album\r\ndiv(md(`\r\nLoading album...\r\n---\r\nNote: Some URLs will not work because of permissions set by the artist\r\n`));\r\n\r\n// Grab the bandcamp page for bc-page-properties which stores meta about the album\r\nconst pageContents = await fetch(albumUrl).then((res) => res.text());\r\nconst bandcampMetaParse = pageContents.match(/<meta name=\"bc-page-properties\".*?content=\"([^\"]+)\">/);\r\n\r\nawait Promise.all([\r\n    // Give the user a chance to read the message (some URLs will not work and there's no obious way to tell in advance)\r\n    new Promise((resolve) => setTimeout(resolve, 2000)),\r\n    // Also wait for the data to load, so we continue when both promises resolve\r\n    pageContents,\r\n])\r\n\r\nif (!bandcampMetaParse) {\r\n    throw new Error('Sorry, I couldn\\'t find the album ID');\r\n}\r\n\r\n// Parse the meta we found\r\nconst bandcampMeta: { item_type?: string, item_id?: number, tralbum_page_version?: number } | undefined = JSON.parse(htmlDecode(bandcampMetaParse[1]));\r\n\r\nif (!bandcampMeta?.item_id) {\r\n    throw new Error('Sorry, I couldn\\'t find the album ID');\r\n}\r\n\r\n// Create a widget with the player!\r\nconst w: WidgetAPI = await widget(\r\n    `\r\n<div id=\"dragbar\"></div>\r\n<style type=\"text/css\">${getStyles()}</style>\r\n<script type=\"text/javascript\">${getScripts(bandcampMeta.item_id)}</script>\r\n    `,\r\n    { \r\n        alwaysOnTop: true, \r\n        width: INITIAL_PLAYER_WIDTH, \r\n        maxWidth: MAX_PLAYER_WIDTH,\r\n        height: INITIAL_PLAYER_HEIGHT, \r\n        minHeight: INITIAL_PLAYER_HEIGHT, \r\n        maxHeight: INITIAL_PLAYER_HEIGHT,\r\n        roundedCorners: false,\r\n        thickFrame: false,\r\n    }\r\n);\r\n\r\nw.setSize(INITIAL_PLAYER_WIDTH, INITIAL_PLAYER_HEIGHT);\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-19T13:29:29Z"},{"name":"Restart Opal","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/917","url":"","title":"Restart a Frozen App","command":"restart-a-frozen-app","content":"I use an app called \"Opal\" for my camera that constantly freezes on me which I need to manually quit then re-open. This script does it all for me:\r\n\r\n\r\n[Open restart-opal in Script Kit](https://scriptkit.com/api/new?name=restart-opal&url=https://gist.githubusercontent.com/johnlindquist/d23381590f588854f543faf2932a97e4/raw/08d8363304c1ec7db33cd008a2ef810744c3b7c2/restart-opal.ts\")\r\n\r\n```js\r\n// Name: Restart Opal\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet fkill = await npm(\"fkill\")\r\nlet open = await npm(\"open\")\r\n\r\nlet app = \"Opal\"\r\n\r\nconsole.log(`Closing Opal`)\r\n\r\ntry {\r\n  fkill(app, { silent: true })\r\n} catch {\r\n  console.log(`Wasn't running...`)\r\n}\r\n\r\nawait wait(1000)\r\n\r\nconsole.log(`Opening Opal`)\r\n\r\nawait open.openApp(app)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-18T14:21:15Z"},{"name":"BBC Sounds Player","description":"","author":"Josh Davenport-Smith","twitter":"jdprts","avatar":"https://avatars.githubusercontent.com/u/757828?v=4","user":"joshdavenport","discussion":"https://github.com/johnlindquist/kit/discussions/913","url":"","title":"BBC Sounds Radio Player","command":"bbc-sounds-radio-player","content":"![2022-10-15 16 00 35](https://user-images.githubusercontent.com/757828/195993376-ac8fe206-1903-4c34-8a50-b996d6cae402.gif)\r\n\r\n[Open bbc-sounds in Script Kit](https://scriptkit.com/api/new?name=bbc-sounds&url=https://gist.githubusercontent.com/joshdavenport/5d6b0f3207225fe9091ee0573daa177d/raw/cea82f55c39ebfd51e64d966871f3c3a99304534/bbc-sounds.ts\")\r\n\r\nPlay the main BBC Radio stations, with a nice little visual as to what the current show is. Easy to add new station just by changing the choices passed to `station`. Forgive me for putting 6music first, although, I'm not really sorry about that 😛 \r\n\r\nI'm assuming this won't work well for anybody outside of the UK unfortunately.\r\n\r\n```js\r\n// Name: BBC Sounds Player\r\n// Description: Stream a radio station from BBC Sounds\r\n// Author: Josh Davenport-Smith\r\n// Twitter: @jdprts\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport { WidgetAPI } from \"@johnlindquist/kit/types/pro\";\r\n\r\nconst PLAYER_WIDTH = 180;\r\nconst PLAYER_HEIGHT = 195;\r\n\r\nconst getStyles = () => `\r\n:root {\r\n    --player-width: ${PLAYER_WIDTH}px;\r\n    --player-height: ${PLAYER_HEIGHT}px;\r\n    --header-offset: 25px;\r\n    --footer-offset: 25px;\r\n    --scale: 2.2;\r\n}\r\n \r\n#player {\r\n    width: var(--player-width);\r\n    height: var(--player-height);\r\n    overflow: hidden;\r\n    position: relative;\r\n}\r\n \r\niframe {\r\n    position: absolute;\r\n    left: 0;\r\n    width: calc(var(--player-width) * var(--scale));\r\n    height: calc((var(--player-height) * var(--scale)) + (var(--header-offset) * var(--scale)) + (var(--footer-offset) * var(--scale)));\r\n    top: calc(var(--header-offset) * -1);\r\n    transform: scale(calc(1 / var(--scale)));\r\n    transform-origin: 0 0;\r\n}\r\n`;\r\n\r\nconst getScripts = (station: string) => `\r\n(() => {\r\n    const playerContainer = document.getElementById('player');\r\n    const url = 'https://www.bbc.co.uk/sounds/player/bbc_${station}';\r\n    const iframe = document.createElement('iframe');\r\n    iframe.setAttribute('src', url);\r\n    iframe.setAttribute('enablejsapi', true);\r\n    playerContainer.appendChild(iframe);\r\n})();\r\n`;\r\n\r\nconst station = await arg('Select station', [\r\n    {\r\n        name: '6 Music',\r\n        value: '6music',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_6music/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'Radio 1',\r\n        value: 'radio_one',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_radio_one/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'Radio 2',\r\n        value: 'radio_two',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_radio_two/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'Radio 3',\r\n        value: 'radio_three',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_radio_three/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'Radio 4',\r\n        value: 'radio_fourfm',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_radio_four/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'Radio Five Live',\r\n        value: 'radio_five_live',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_radio_five_live/colour_default.svg',\r\n    },\r\n    {\r\n        name: 'World Service',\r\n        value: 'world_service',\r\n        img: 'https://sounds.files.bbci.co.uk/3.1.5/networks/bbc_world_service/colour_default.svg',\r\n    },\r\n])\r\n\r\nconst w: WidgetAPI = await widget(\r\n    `\r\n<div id=\"player\"></div>\r\n<style type=\"text/css\">${getStyles()}</style>\r\n<script type=\"text/javascript\">${getScripts(station)}</script>\r\n    `,\r\n    { alwaysOnTop: true }\r\n);\r\n\r\n\r\nw.setSize(PLAYER_WIDTH, PLAYER_HEIGHT);\r\n\r\nw.onClick(event => event.targetId === \"x\" && w.close());\r\n\r\nw.onResized(() => w.setSize(PLAYER_WIDTH, PLAYER_HEIGHT));\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-15T15:05:59Z"},{"avatar":"https://avatars.githubusercontent.com/u/3685876?u=3cccf0d3d3a3c6be079bb4115e78e4750a869387&v=4","user":"lannonbr","author":"Benjamin Lannon","twitter":"lannonbr","discussion":"https://github.com/johnlindquist/kit/discussions/910","url":"","title":"Follow Up - save links for future consumption","command":"follow-up-save-links-for-future-consumption","content":"I frequently want to find ways of saving links that I consume across devices that I want to come back to later. With this, I tried out the new `fields` form available in the Sept 2022 version of Script Kit in which I grab the current tab with `getActiveTab` and auto fill a link field and then I just have to fill in a name and comment field and then I save it off to AWS DynamoDB.\r\n\r\nFollowing up with this (no pun intended), I'm thinking of ways of passing the content back to me at a convenient time with ideas like:\r\n\r\n- weekly email on a Sunday / Monday morning to see what I saved that week\r\n- discord bot for me to fetch a random link\r\n- etc\r\n\r\nGitHub Repo: https://github.com/lannonbr/follow-up\r\nSave link script: https://github.com/lannonbr/follow-up/blob/main/functions/save-a-link.js","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-11T01:06:34Z"},{"name":"Open Notion URL in Notion App","description":"","author":"Josh Davenport-Smith","avatar":"https://avatars.githubusercontent.com/u/757828?v=4","user":"joshdavenport","twitter":"jdprts","discussion":"https://github.com/johnlindquist/kit/discussions/909","url":"","title":"Open Notion URL in the Notion app","command":"open-notion-url-in-the-notion-app","content":"Super simple one here, if you've got a notion URL in your clipboard you can quickly whack it into this script and have it open it in your local notion app instead of the browser. If the URL you've got is a `notion://` URL then it'll open in the app by just clicking it, however, often colleagues share regular `https://` Notion URLs and I prefer to look at the resource in my local version of the app instead of having that open and also Notion tabs in the browser!\r\n\r\n[Open open-notion-url-in-notion-app in Script Kit](https://scriptkit.com/api/new?name=open-notion-url-in-notion-app&url=https://gist.githubusercontent.com/joshdavenport/c136776ba20e01975bc8a251a4d3d58d/raw/5369240264f629bb425c12f8fb1d12e799c12981/open-notion-url-in-notion-app.ts\")\r\n\r\n```js\r\n// Name: Open Notion URL in Notion App\r\n// Description: Open a Notion URL in the desktio Notion App instead of  the browser\r\n// Author: Josh Davenport-Smith\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst url = await arg('What is the Notion URL?');\r\n\r\nif (!url.includes('notion.so')) {\r\n    throw new Error('Not a Notion URL');\r\n}\r\n\r\nawait applescript(String.raw`\r\n    tell application \"Notion\"\r\n        activate\r\n        open location \"${url}\"\r\n    end tell\r\n`);\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-10T23:48:15Z"},{"name":"Search current song","description":"","author":"Mariano","avatar":"https://avatars.githubusercontent.com/u/28148619?u=3f41a784dfbcef5cbb7823dbc7df87676e281036&v=4","user":"MarianoAmado","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/908","url":"","title":"Search for lyrics or samples for currently playing spotify song","command":"search-for-lyrics-or-samples-for-currently-playing-spotify-song","content":"\r\n![Oct-08-2022 13-36-08](https://user-images.githubusercontent.com/28148619/194717999-c0697518-3e21-40da-b292-c40e1301c743.gif)\r\n\r\nAfter using and playing around with @jacopo-degattis' [spotify-playing](https://github.com/johnlindquist/kit/discussions/866), I came up this quick and simple way to look up lyrics and samples (and maybe more?) for the song that's currently playing in spotify.\r\n\r\nI plan on adding some basic feedback on errors and probably an option for manual search input.\r\nContributions and suggestions always welcome!\r\n\r\n----------\r\n\r\n[Open spotify-searches in Script Kit](https://scriptkit.com/api/new?name=spotify-searches&url=https://gist.githubusercontent.com/MarianoAmado/376ce67943f0a228d7ea12b0973bf781/raw/fef684eb46558a63696e0bf33ce58da442ab7b37/spotify-searches.ts\")\r\n\r\n```js\r\n// Name: Search current song\r\n// Description: Search the currently playing spotify song for lyrics or samples\r\n// Author: Mariano Amado\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst spotify = await npm(\"spotify-node-applescript\")\r\n\r\nspotify.isRunning((err, isRunning) => {\r\n    if (!isRunning) return exit();\r\n\r\n    spotify.getTrack(async (err: any, track: any) => {\r\n        if (err) return exit();\r\n        const { artist, name } = track;\r\n\r\n        const term = `${artist}+${name}`.replace(\"&\", \"\");\r\n\r\n        const site = await arg(`${name} - ${artist}`, [\r\n            {\r\n                name: \"Genius.com\",\r\n                description: 'Search for song lyrics',\r\n                value: 'genius',\r\n            },\r\n            {\r\n                name: \"Whosampled.com\",\r\n                description: 'Search for samples',\r\n                value: 'whosampled',\r\n            },\r\n        ])\r\n\r\n        const uri = encodeURI(`https://www.${site}.com/search?q=${term}`)\r\n        exec(`open '${uri}'`)\r\n    })\r\n})\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-10-08T16:52:47Z"},{"name":"Synonym Snippet","snippet":"*,,","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/903","url":"","title":"Synonym Postfix Snippet","command":"synonym-postfix-snippet","content":"\r\n\r\nhttps://user-images.githubusercontent.com/36073/193135022-15284563-f259-4aba-a8d7-f9f0181db103.mp4\r\n\r\n\r\n[Open synonym-snippet in Script Kit](https://scriptkit.com/api/new?name=synonym-snippet&url=https://gist.githubusercontent.com/johnlindquist/68e848629c110f3f685d5434033afade/raw/3cc3a815ea94e63aca139b100fdb5118065bb7d5/synonym-snippet.ts\")\r\n\r\n```js\r\n// Name: Synonym Snippet\r\n// Snippet: *,,\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet word = await arg(\"The value of *\")\r\n\r\nlet response = await get(`https://api.datamuse.com/words?ml=${word}`)\r\n\r\nlet synonyms = response.data.map(i => i.word)\r\n\r\nlet synonym = await arg(\"Select a replacement\", synonyms)\r\n\r\nawait setSelectedText(synonym)\r\n\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-29T20:23:43Z"},{"name":"GitHub Repos","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/893","url":"","title":"🐙 Browse GitHub repos and perform actions on them 👩🏽‍💻","command":"browse-github-repos-and-perform-actions-on-them","content":"\r\nhttps://user-images.githubusercontent.com/2759340/190688251-8a7a0033-9cce-4dc2-bafe-9c02d06e9f00.mov\r\n\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=github-repos&url=https://gist.githubusercontent.com/vogelino/82f586856e5b165144066827e6af5f96/raw/f15bbe13423e4f9d534a8f4b2a31589ad47d65ad/scriptkit-github-repos.ts)\r\n\r\n---\r\n\r\nLets you browse your GitHub repos and perform actions on them such as coping/opening the URL or listing the issues/pulls/branches. This script could be improved way more so feel free to leave a comment below with some suggestions.\r\n\r\n---\r\n\r\n```ts\r\n// Name: GitHub Repos\r\n// Description: List GitHub repositories and perform actions on them\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst { Octokit } = await npm(\"octokit\");\r\nconst shodwon = await npm(\"showdown\");\r\nconst converter = new shodwon.Converter({\r\n  ghMentions: true,\r\n  emoji: true,\r\n});\r\nconverter.setFlavor(\"github\");\r\n\r\ninterface RawRepositoryType {\r\n  id: string;\r\n  name: string;\r\n  html_url: string;\r\n  full_name: string;\r\n  visibility: string[];\r\n  description: string;\r\n  homepage?: string;\r\n  owner: {\r\n    login: string;\r\n  };\r\n  open_issues_count: number;\r\n}\r\n\r\ninterface RawIssueType {\r\n  id: string;\r\n  title: string;\r\n  body: string;\r\n  labels: {\r\n    name: string;\r\n  }[];\r\n  number: string;\r\n  user: {\r\n    login: string;\r\n  };\r\n  html_url: string;\r\n}\r\n\r\ninterface RawBranchName {\r\n  id: string;\r\n  name: string;\r\n  protected: boolean;\r\n}\r\n\r\ninterface OptionType<ValueType = unknown> {\r\n  name: string;\r\n  descritpion?: string;\r\n  preview?: string;\r\n  value: ValueType;\r\n}\r\n\r\nconst auth = await env(`GITHUB_ACCESS_TOKEN`, \"Enter your GitHub access token\");\r\nconst octokit = new Octokit({ auth });\r\n\r\nconst {\r\n  data: { login },\r\n} = await octokit.rest.users.getAuthenticated();\r\n\r\nconst universalOptions = [\r\n  {\r\n    name: \"Browse\",\r\n    description: \"Open the url in your default browser\",\r\n    value: \"browse\",\r\n  },\r\n  {\r\n    name: \"Copy URL\",\r\n    description: \"Copy the URL to the clipboard\",\r\n    value: \"copy\",\r\n  },\r\n];\r\n\r\nconst mapRawRepo = (repo: RawRepositoryType) => ({\r\n  name: repo.full_name,\r\n  description: [\r\n    repo.visibility[0].toUpperCase() + repo.visibility.slice(1),\r\n    repo.description,\r\n    repo.homepage,\r\n  ]\r\n    .filter(Boolean)\r\n    .join(\"  ·  \"),\r\n  value: repo,\r\n});\r\n\r\nconst mapReposResponse = (response: { data: RawRepositoryType[] }) =>\r\n  (response.data || []).map(mapRawRepo);\r\n\r\nasync function fetchAllRepos() {\r\n  return await octokit.paginate(\r\n    octokit.rest.repos.listForAuthenticatedUser,\r\n    { sort: \"updated\", per_page: 100 },\r\n    mapReposResponse\r\n  );\r\n}\r\n\r\nasync function fetchRecentRepos() {\r\n  const res = await octokit.request(\"GET /user/repos\", {\r\n    sort: \"updated\",\r\n    per_page: 50,\r\n  });\r\n  return res.data;\r\n}\r\n\r\nasync function fetchOwnerRepos() {\r\n  const res = await octokit.request(\"GET /user/repos\", {\r\n    sort: \"updated\",\r\n    per_page: 50,\r\n    affiliation: \"owner\",\r\n  });\r\n  return res.data;\r\n}\r\n\r\nfunction createIssuePullHandler(key: \"pull\" | \"issue\") {\r\n  return async (repo: RawRepositoryType) => {\r\n    const res = await octokit.request(`GET /repos/{owner}/{repo}/${key}s`, {\r\n      owner: repo.owner.login,\r\n      repo: repo.name,\r\n      pulls: key === \"pull\",\r\n    });\r\n    let { data: items } = res as { data: RawIssueType[] };\r\n    if (key === \"issue\") {\r\n      const pullsRes = (await octokit.request(\r\n        `GET /repos/{owner}/{repo}/pulls`,\r\n        {\r\n          owner: repo.owner.login,\r\n          repo: repo.name,\r\n        }\r\n      )) as { data: RawIssueType[] };\r\n      items = items.filter(\r\n        ({ number }) => !pullsRes.data.find((p) => p.number === number)\r\n      );\r\n    }\r\n    if (items.length === 0) {\r\n      await div(`<div class=\"p-4 bg-white\">No ${key}s</div>`);\r\n      return;\r\n    }\r\n    const itemSelected = await arg(\r\n      `Search for ${key}s`,\r\n      items.map((i) => ({\r\n        name: i.title,\r\n        description: [\r\n          `#${i.number}`,\r\n          i.user.login,\r\n          i.labels.map((l) => l.name).join(\", \"),\r\n        ]\r\n          .filter(Boolean)\r\n          .join(\" · \"),\r\n        preview: `\r\n          <style>p,h1,h2,h3 { margin-bottom: 8px; }</style>\r\n          <div class=\"p-4 bg-white\">\r\n            <h1>${i.title}</h1>\r\n            <small>By @${i.user.login} · ${i.labels\r\n          .map((l) => l.name)\r\n          .join(\", \")}</small>\r\n            <hr/><br />\r\n            ${i?.body ? converter.makeHtml(i.body) : \"–\"}\r\n          </div>\r\n        `,\r\n        value: i,\r\n      }))\r\n    );\r\n\r\n    const action = await arg(\"Select an action to perform\", [\r\n      ...universalOptions,\r\n      {\r\n        name: `Copy ${key} number`,\r\n        description: `Copy ${key} number to clipboard for reference elswhere (eg. branch-name)`,\r\n        value: \"number\",\r\n      },\r\n      {\r\n        name: `Close ${key}`,\r\n        description: `Close ${key}`,\r\n        value: \"close\",\r\n      },\r\n    ]);\r\n\r\n    switch (action) {\r\n      case \"browse\":\r\n        await browse(itemSelected.html_url);\r\n        exit();\r\n      case \"copy\":\r\n        await copy(itemSelected.html_url);\r\n        exit();\r\n      case \"number\":\r\n        await copy(`${itemSelected.number}`);\r\n        exit();\r\n      case \"close\":\r\n        await await octokit.request(\r\n          `PATCH /repos/{owner}/{repo}/${key}s/{${key}_number}`,\r\n          {\r\n            owner: repo.owner.login,\r\n            repo: repo.name,\r\n            [`${key}_number`]: itemSelected.number,\r\n            state: \"closed\",\r\n          }\r\n        );\r\n        break;\r\n    }\r\n    notify(`${action} successful`);\r\n    const nextHanlder = createIssuePullHandler(key);\r\n    await nextHanlder(repo);\r\n  };\r\n}\r\n\r\nasync function getAllBranches(repo: RawRepositoryType) {\r\n  const { data } = await octokit.request(`GET /repos/{owner}/{repo}/branches`, {\r\n    owner: repo.owner.login,\r\n    repo: repo.name,\r\n  });\r\n  const items = data as RawBranchName[];\r\n  if (items.length === 0) {\r\n    await div(`<div class=\"p-4 bg-white\">No branches</div>`);\r\n    return;\r\n  }\r\n  const branchSelected = await arg(\r\n    `Search for branches`,\r\n    items.map((b) => ({\r\n      name: b.name,\r\n      description: b.protected ? \"Protected\" : undefined,\r\n      value: b,\r\n    }))\r\n  );\r\n\r\n  const action = await arg(\"Select an action to perform\", [\r\n    {\r\n      name: `Copy name`,\r\n      description: `Copy name to clipboard for reference elswhere (eg. in issue)`,\r\n      value: \"name\",\r\n    },\r\n    {\r\n      name: `Rename`,\r\n      value: \"rename\",\r\n    },\r\n  ]);\r\n\r\n  switch (action) {\r\n    case \"name\":\r\n      await copy(branchSelected.name);\r\n      exit();\r\n    case \"rename\":\r\n      const newName = await arg(\r\n        `What should the new name be? (was ${branchSelected.name})`\r\n      );\r\n      await octokit.request(\r\n        `POST /repos/{owner}/{repo}/branches/{branch}/rename`,\r\n        {\r\n          owner: repo.owner.login,\r\n          repo: repo.name,\r\n          branch: branchSelected.name,\r\n          new_name: newName,\r\n        }\r\n      );\r\n      break;\r\n  }\r\n  notify(`${action} successful`);\r\n  await getAllBranches(repo);\r\n}\r\n\r\nconst issueHandler = createIssuePullHandler(`issue`);\r\nconst pullHandler = createIssuePullHandler(`pull`);\r\nfunction getTabHandler(getter: () => Promise<OptionType<RawRepositoryType>[]>) {\r\n  return async function handler() {\r\n    const repos = await getter();\r\n    const repoSelected = await arg(`Hello ${login}. Search for a repo`, repos);\r\n\r\n    if (repos.length === 0) {\r\n      await div(`<div class=\"p-4 bg-white\">No repos</div>`);\r\n      await handler();\r\n    }\r\n    const action = await arg(\r\n      \"Select an action to perform\",\r\n      [\r\n        ...universalOptions,\r\n        repoSelected.open_issues_count > 0 && {\r\n          name: \"Recent issues\",\r\n          description: \"List top 10 most recent open issues\",\r\n          value: \"issues\",\r\n        },\r\n        {\r\n          name: \"Pull Requests\",\r\n          description: \"List top 10 most recent PRs\",\r\n          value: \"prs\",\r\n        },\r\n        {\r\n          name: \"Branches\",\r\n          description: \"List branches\",\r\n          value: \"branches\",\r\n        },\r\n      ].filter(Boolean)\r\n    );\r\n\r\n    switch (action) {\r\n      case \"browse\":\r\n        await browse(repoSelected.html_url);\r\n        exit();\r\n      case \"copy\":\r\n        await copy(repoSelected.html_url);\r\n        exit();\r\n      case \"issues\":\r\n        await issueHandler(repoSelected);\r\n        break;\r\n      case \"prs\":\r\n        await pullHandler(repoSelected);\r\n        break;\r\n      case \"branches\":\r\n        await getAllBranches(repoSelected);\r\n        break;\r\n    }\r\n    notify(`${action} successful`);\r\n    await handler();\r\n  };\r\n}\r\n\r\nconst recentTab = getTabHandler(fetchRecentRepos);\r\nonTab(\"Recent\", recentTab);\r\nonTab(\"Owner\", getTabHandler(fetchOwnerRepos));\r\nonTab(\"All\", getTabHandler(fetchAllRepos));\r\nawait recentTab();\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-16T16:45:11Z"},{"name":"Join Google Meet","description":"","iMPORTANT":"This script uses AppleScript to interact with the Google Meet page,","avatar":"https://avatars.githubusercontent.com/u/4126793?u=343d9f1dddb8feddc0f2d4265d114f3317e48773&v=4","user":"bouwe77","author":"Bouwe K. Westerdijk","twitter":"bouwe","discussion":"https://github.com/johnlindquist/kit/discussions/892","url":"","title":"Join Google Meet","command":"join-google-meet","content":"# What is it?\r\n\r\nA script to join a Google Meet. And yes, I mean join, as in, you will end up in the meeting. So make sure you are ready!  💇🏻 💅🏻 \r\n\r\n# Installation\r\n\r\n[Add to your ScriptKit](https://scriptkit.com/api/new?name=join-google-meet&url=https://gist.githubusercontent.com/bouwe77/ed9bc271c6541b0f860a40adf8e1995c/raw/286288afdfb4a071983a1d5bf7b68297811df1f6/join-google-meet.js)\r\n\r\n# Do you haz teh codez?\r\n\r\n```\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Name: Join Google Meet\r\n// Description: Joins the Google Meet URL by opening it in the browser and clicking \"Join\"\r\n\r\n// IMPORTANT: This script uses AppleScript to interact with the Google Meet page,\r\n// so be sure to enable AppleScript in Chrome: View -> Developer -> Allow JavaScript from Apple Events\r\n\r\nconst meetUrl = await env(\"MEET_URL\", async () => {\r\n  const urlToSave = await arg(\"Enter URL to Google Meet\");\r\n  return urlToSave;\r\n});\r\n\r\nawait browse(meetUrl);\r\n\r\n// wait ~2 seconds for page to load before sending the click\r\nawait wait(2000);\r\n\r\n// To click the \"Join\" button in the DOM, we search by a pretty obscure, but constant name:\r\nconst buttonName = \"Qx7uuf\";\r\nconst js = `document.querySelector('[jsname=\\\\\"${buttonName}\\\\\"]').click();`;\r\n\r\n// Execute the JS to click the button on the active tab with AppleScript\r\nawait applescript(`\r\n  tell application \"Google Chrome\" to tell window 1\r\n      execute active tab javascript \"${js}\"\r\n  end tell\r\n`);\r\n```\r\n\r\n# How does it work?\r\n\r\nWhen using it for the first time, it will ask you for the Google Meet URL, which will be stored as an environment variable, and will be used from then on.\r\n\r\nIt will open your default browser, open a new tab, go to the Google Meet URL, click Join, and before you know it, you're in.\r\n\r\n# Limitations\r\n\r\n1. The script assumes you are already signed in to Google in your default browser\r\n\r\n2. It only supports one Meet URL, you can't choose between multiple.\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-16T12:50:29Z"},{"name":"Change case of selected text","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/891","url":"https://gist.githubusercontent.com/vogelino/7dfe97dc4732a6e2637b7640061016ac/raw/71373ef6e2bc5db13424bcdde0dd68beec3b9a4f/scriptkit-change-text-case.js","title":"🔡 Change case of selected text 🔠","command":"change-case-of-selected-text","content":"\r\n\r\nhttps://user-images.githubusercontent.com/2759340/190588006-c7734d44-18d8-46b8-839d-8fc5805b76d4.mov\r\n\r\n\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=change-text-case&url=https://gist.githubusercontent.com/vogelino/7dfe97dc4732a6e2637b7640061016ac/raw/71373ef6e2bc5db13424bcdde0dd68beec3b9a4f/scriptkit-change-text-case.js)\r\n\r\n---\r\n\r\n🔡 → 🔠 Apply some text case transformation to the selected text or enter it yourself. \r\n🔠 → ✂️ The text is then pasted in place and copied to the clipboard.\r\n\r\n---\r\n\r\n```js\r\n// Name: Change case of selected text\r\n// Description: Choose a transformation method (eg. camelCase) to transform the selected text in-place (Or some text input)\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst changeCase = await npm(\"change-case\");\r\n\r\nlet text = await getSelectedText();\r\n\r\nif (text.length <= 1) {\r\n  text = await arg(\"No text selected. What text should be transformed?\");\r\n}\r\n\r\nconst method = await arg(\r\n  \"What transformation would you like to apply to your text?\",\r\n  [\r\n    {\r\n      name: \"Camel\",\r\n      description: `test string -> testString`,\r\n      value: \"camelCase\",\r\n    },\r\n    {\r\n      name: \"Capital\",\r\n      description: `test string -> Test String`,\r\n      value: \"capitalCase\",\r\n    },\r\n    {\r\n      name: \"Constant\",\r\n      description: `test string -> TEST_STRING`,\r\n      value: \"constantCase\",\r\n    },\r\n    {\r\n      name: \"Dot\",\r\n      description: `test string -> test.string`,\r\n      value: \"dotCase\",\r\n    },\r\n    {\r\n      name: \"Header\",\r\n      description: `test string -> Test-String`,\r\n      value: \"headerCase\",\r\n    },\r\n    {\r\n      name: \"Lower Case\",\r\n      description: `test string -> test string`,\r\n      value: \"noCase\",\r\n    },\r\n    {\r\n      name: \"Slugify (dashes)\",\r\n      description: `test string -> test-string`,\r\n      value: \"paramCase\",\r\n    },\r\n    {\r\n      name: \"Pascal\",\r\n      description: `test string -> TestString`,\r\n      value: \"pascalCase\",\r\n    },\r\n    {\r\n      name: \"Path\",\r\n      description: `test string -> test/string`,\r\n      value: \"pathCase\",\r\n    },\r\n    {\r\n      name: \"Sentence\",\r\n      description: `test string -> Test string`,\r\n      value: \"sentenceCase\",\r\n    },\r\n    {\r\n      name: \"Snake (underscore)\",\r\n      description: `test string -> test_string`,\r\n      value: \"snakeCase\",\r\n    },\r\n  ]\r\n);\r\n\r\nif (!method in changeCase) {\r\n  notify(\"The selected method '${method}' is not available\");\r\n} else {\r\n  const transformedText = changeCase[method](text);\r\n\r\n  await Promise.all([setSelectedText(transformedText), copy(transformedText)]);\r\n\r\n  notify(`The text was pasted and copied to the clipboard!`);\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-16T08:02:35Z"},{"name":"Get Tabler Icons","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/890","url":"https://gist.githubusercontent.com/vogelino/b96a807c2c7a70b88193b03aac41b255/raw/5592449aaa7e66ada7ac21d6eea1b0d9845963b0/scriptkit-get-tabler-icon.js","title":"☢️ Copy an SVG icon from tabler-icons.io ✴️","command":"copy-an-svg-icon-from-tabler-iconsio","content":"\r\nhttps://user-images.githubusercontent.com/2759340/190516628-921adc55-f83c-4a60-9223-f7a3ada7564a.mov\r\n\r\n\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=merge-pdfs&url=https://gist.githubusercontent.com/vogelino/b96a807c2c7a70b88193b03aac41b255/raw/5592449aaa7e66ada7ac21d6eea1b0d9845963b0/scriptkit-get-tabler-icon.js)\r\n\r\n---\r\n\r\nLists all icons of the [tabler-icons](https://tabler-icons.io/) open source icon set an copies the selected icon's SVG code to the clipboard. This is inspired by @benjaminmodayil script (Get Hero Icons #832)\r\n\r\n---\r\n\r\n```js\r\n// Name: Get Tabler Icons\r\n// Description: Copies a Tabler Icon from tabler open-sourced repository.\r\n// Author: Lucas Vogel\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst iconsPath = \"https://tabler-icons.io/icons.json\";\r\n\r\nlet files = [];\r\n\r\ntry {\r\n  let response = await get(iconsPath);\r\n  files = response.data;\r\n} catch (error) {\r\n  notify(error);\r\n}\r\n\r\nconst titleCase = (s) =>\r\n  s\r\n    .toLowerCase()\r\n    .split(\"-\")\r\n    .map((w) => w[0].toUpperCase() + w.slice(1))\r\n    .join(\" \");\r\n\r\nconst options = files.map((file, idx) => {\r\n  return {\r\n    name: titleCase(file.n),\r\n    description: file.t.split(\" \").join(\", \"),\r\n    value: file,\r\n    preview: `\r\n      <table class=\"w-full\">\r\n        <tr>\r\n          <td class=\"p-8\">\r\n            <div className=\"m-8\">${file.s}</div>\r\n          </td>\r\n          <td class=\"p-8\">\r\n            <div>${file.s.replaceAll('\"24\"', '\"100\"')}</div>\r\n          </td>\r\n        <tr>\r\n          <td class=\"p-8 bg-black text-white\">\r\n            <div className=\"m-8\">${file.s}</div>\r\n          </td>\r\n          <td class=\"p-8 bg-black text-white\">\r\n            <div>${file.s.replaceAll('\"24\"', '\"100\"')}</div>\r\n          </td>\r\n        </tr>\r\n        </tr>\r\n      </table>\r\n    `,\r\n  };\r\n});\r\n\r\nconst icon = await arg(\"Search for an icon:\", options);\r\ntry {\r\n  await copy(icon.s);\r\n  notify(`Copied ${titleCase(file.n)} icon to clipboard`);\r\n} catch (error) {\r\n  notify(error);\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-15T22:02:43Z"},{"name":"Unsplash","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/888","url":"https://gist.githubusercontent.com/vogelino/862f5021c60a5eabc964aa4e6935d9e1/raw/a3c68a402de6ea55564cce7fbcaf3e056559200c/scriptkit-unsplash.js","title":"📸 Search for pictures on Unsplash 🖼","command":"search-for-pictures-on-unsplash","content":"https://user-images.githubusercontent.com/2759340/190510984-4137a77c-07c5-475a-9c9a-5aa0d0018a49.mov\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=unsplash&url=https://gist.githubusercontent.com/vogelino/862f5021c60a5eabc964aa4e6935d9e1/raw/a3c68a402de6ea55564cce7fbcaf3e056559200c/scriptkit-unsplash.js)\r\n\r\n---\r\n\r\nLet's you browse unsplash.com and download the image on the desktop\r\n\r\n---\r\n\r\n```js\r\n// Name: Unsplash\r\n// Description: Search unsplash for the perfect image to download\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\nconst { createApi } = await npm(\"unsplash-js\");\r\n\r\nconst accessKey = await env(\r\n  \"UNSPLASH_ACCESS_KEY\",\r\n  \"Enter your unsplash Access Key\"\r\n);\r\n\r\nconst downloadPath = await env(\r\n  \"UNSPLASH_DOWNLOAD_PATH\",\r\n  \"Enter the path where to download the images\"\r\n);\r\n\r\nconst headers = {\r\n  \"User-Agent\": \"scriptkit/unsplash\",\r\n};\r\n\r\nconst api = createApi({\r\n  accessKey,\r\n});\r\n\r\nconst query = await arg(\"What do you want to search\");\r\nconst photosRes = await api.search.getPhotos({\r\n  query,\r\n  page: 1,\r\n  perPage: 10,\r\n});\r\n\r\nif (photosRes.errors) {\r\n  console.log(\"error occurred: \", photosRes.errors[0]);\r\n} else {\r\n  const { results } = photosRes.response;\r\n  const options = results.map((photo) => ({\r\n    name: photo.description || photo.alt_description || \"Untitled\",\r\n    description: `${photo.user.name} – ${photo.width} x ${photo.height} – ${photo.likes} Likes`,\r\n    preview: `\r\n      <style>.image { object-fit: contain; height: 80vh; }</style>\r\n      <img class=\"w-screen image\" src=\"${photo.urls.regular}\" />\r\n    `,\r\n    value: photo,\r\n  }));\r\n  const selectedPhoto = await arg(\"Select a photo to copy\", options);\r\n\r\n  const buffer = await download(selectedPhoto.urls.raw, headers);\r\n  const filePath = `${downloadPath}/unsplash-image-${selectedPhoto.id}.png`;\r\n  await writeFile(filePath, buffer);\r\n  notify(`Successfully downloaded file: ${filePath}`);\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-15T21:25:30Z"},{"name":"Todoist","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/886","url":"","title":"📝 Create new and read Todoist tasks ✅","command":"create-new-and-read-todoist-tasks","content":"\r\nhttps://user-images.githubusercontent.com/2759340/190274350-c6ef71e3-9746-4e04-95b4-7b5ad37d035f.mov\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=todoist&url=https://gist.githubusercontent.com/vogelino/4c190ffa524129941ec986cabe857eb1/raw/dbd4349ccc1fe15701e3a98ed204766aa8746215/scriptkit-todoist.ts)\r\n\r\n---\r\n\r\nLets you browse and add tasks to your [Todoist](https://todoist.com) account  \r\n\r\n---\r\n\r\n```ts\r\n// Name: Todoist\r\n// Description: Create and browse your Todoist Tasks\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\nconst { TodoistApi } = await npm(\"@doist/todoist-api-typescript\");\r\nconst { formatRelative } = await npm(\"date-fns\");\r\n\r\ninterface ProjectType {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\ninterface TaskType {\r\n  id: string;\r\n  content: string;\r\n  order: number;\r\n  due?: {\r\n    datetime: string;\r\n  };\r\n}\r\n\r\nconst today = new Date();\r\nconst fromNow = (date: string) => formatRelative(new Date(date), today);\r\n\r\nfunction sortTaskByDueDateOrOrder(a: TaskType, b: TaskType) {\r\n  const dateA = a.due?.datetime\r\n    ? new Date(a.due?.datetime).getTime()\r\n    : Infinity;\r\n  const dateB = b.due?.datetime\r\n    ? new Date(b.due?.datetime).getTime()\r\n    : Infinity;\r\n  return dateA - dateB || a.order - b.order;\r\n}\r\n\r\nconst apiKey = await env(\r\n  \"TODOIST_API_KEY\",\r\n  \"Please enter your Todoist API key\"\r\n);\r\n\r\nconst api = new TodoistApi(apiKey);\r\nconst allProjects = (await api.getProjects()) as ProjectType[];\r\n\r\nconst projectTabs = [{ id: undefined, name: \"All\" }, ...allProjects].reduce(\r\n  (acc, project) => ({\r\n    ...acc,\r\n    [project.name]: async function (tasks?: TaskType[]) {\r\n      if (!tasks) {\r\n        tasks = (await api.getTasks(\r\n          project.id ? { project_id: project.id } : undefined\r\n        )) as TaskType[];\r\n      }\r\n      const options = tasks.sort(sortTaskByDueDateOrOrder).map((task) => ({\r\n        name: task.content,\r\n        description: task.due?.datetime\r\n          ? fromNow(task.due?.datetime)\r\n          : undefined,\r\n        value: task.id,\r\n      }));\r\n      const taskIdToComplete = await arg(\r\n        `Search for a task in \"${project.name}\"`,\r\n        options\r\n      );\r\n\r\n      await api.closeTask(taskIdToComplete);\r\n      await projectTabs[project.name](\r\n        tasks.filter((t) => t.id !== taskIdToComplete)\r\n      );\r\n    },\r\n  }),\r\n  {}\r\n);\r\n\r\nconst newTask = async () => {\r\n  const content = await arg(\"What is your task about?\");\r\n  const dueString = await arg(\"Enter the due date or leave empty\");\r\n  const projectId = await arg(\r\n    \"In which project? (leave empty for Inbox)\",\r\n    allProjects.map((project) => ({\r\n      name: project.name,\r\n      value: project.id,\r\n    }))\r\n  );\r\n  try {\r\n    await api.addTask({\r\n      content,\r\n      dueString,\r\n      dueLang: \"en\",\r\n      project_id: projectId,\r\n    });\r\n    notify(`The task \"${content}\" was added!`);\r\n  } catch (err) {\r\n    await div(`<p class=\"m-4 px-6 py-2 rounded bg-white border\" style=\"border-color: red;\">\r\n      🔴 The task could not be added: <code class=\"inline\">${err.responseData}</code>\r\n    </p>`);\r\n  }\r\n  await newTask();\r\n};\r\n\r\nonTab(\"New\", newTask);\r\nObject.keys(projectTabs).forEach((projectName) => {\r\n  onTab(projectName, projectTabs[projectName]);\r\n});\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-14T22:32:30Z"},{"name":"Move current apps windows","author":"Eduard","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/8198764?u=8159fd937f0836c330f0aed6c4d518c48461072e&v=4","user":"Schmedu","discussion":"https://github.com/johnlindquist/kit/discussions/885","url":"https://gist.githubusercontent.com/Schmedu/d41f7370c80dd5fd051ab814930e0870/raw/a6d7597c4ebd669072cfb8c1ef56a177716c3662/align-windows.js","title":"🖥 Window management à la Rectangle (+ align all windows at once)","command":"window-management-a-la-rectangle-align-all-windows-at-once","content":"Manage the current apps windows. You can do all window alignments Rectangle has to offer: \r\n- max,\r\n- almost maximize,\r\n- half (left, right), \r\n- thirds (left, center, right, left two thirds, right two thirds), \r\n- quarters (top-left, top-right, bottom-left, bottom-right), \r\n- fourths (horizontally: first, second, third, forth, first three, last three),\r\n- sixths (top-left, top-center, top-left, bottom-left, bottom-center, bottom-right),\r\n- and move to next screen.\r\n\r\n**Why another window manager?**\r\nYou can align **all windows of the current app at once**. This comes in handy every time you work with an additional display or you like to have a clear window structure for an application. On top, you can easily use it with Karabiner without wasting another shortcut.\r\n\r\nExample cli usage:`~/.kit/kar align-windows 'ALL' 'LEFT_HALF'`\r\n\r\n![align-windows](https://user-images.githubusercontent.com/8198764/190229156-cc031c4a-6cb0-4f39-898d-54357090dcc4.gif)\r\n\r\n<hr>\r\n\r\n[Open align-windows in Script Kit](https://scriptkit.com/api/new?name=align-windows&url=https://gist.githubusercontent.com/Schmedu/d41f7370c80dd5fd051ab814930e0870/raw/a6d7597c4ebd669072cfb8c1ef56a177716c3662/align-windows.js\")\r\n\r\n```js\r\n// Name: Move current apps windows\r\n// Author: Eduard Uffelmann\r\n// Twitter: @schmedu_\r\n// Example cli usage: ~/.kit/kar align-windows 'ALL' 'LEFT_HALF'\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst Windows = {\r\n    FRONTMOST: \"frontmost\",\r\n    ALL: \"all\",\r\n};\r\n\r\nconst WindowAlignments = {\r\n    LEFT_HALF: {\r\n        name: \"left half\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    LEFT_THIRD: {\r\n        name: \"left third\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    LEFT_TWO_THIRDS: {\r\n        name: \"first / left two thirds\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: (screen.workArea.width / 3) * 2,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    RIGHT_HALF: {\r\n        name: \"right half\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 2,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    RIGHT_THIRD: {\r\n        name: \"right third\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 3) * 2,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    RIGHT_TWO_THIRDS: {\r\n        name: \"last / right two thirds\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 3,\r\n            y: screen.workArea.y,\r\n            width: (screen.workArea.width / 3) * 2,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    CENTER_THIRD: {\r\n        name: \"center third\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 3,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    TOP_HALF: {\r\n        name: \"top half\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    TOP_THIRD: {\r\n        name: \"top third\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height / 3,\r\n        }),\r\n    },\r\n    TOP_TWO_THIRDS: {\r\n        name: \"top two thirds\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width,\r\n            height: (screen.workArea.height / 3) * 2,\r\n        }),\r\n    },\r\n    BOTTOM_HALF: {\r\n        name: \"bottom half\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_THIRD: {\r\n        name: \"bottom third\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y + (screen.workArea.height / 3) * 2,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height / 3,\r\n        }),\r\n    },\r\n    BOTTOM_TWO_THIRDS: {\r\n        name: \"bottom two thirds\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y + screen.workArea.height / 3,\r\n            width: screen.workArea.width,\r\n            height: (screen.workArea.height / 3) * 2,\r\n        }),\r\n    },\r\n    TOP_LEFT: {\r\n        name: \"top left quarter\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    TOP_RIGHT: {\r\n        name: \"top right quarter\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 2,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_LEFT: {\r\n        name: \"bottom left quarter\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_RIGHT: {\r\n        name: \"bottom right quarter\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 2,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width / 2,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    CENTERED: {\r\n        name: \"centered\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 6,\r\n            y: screen.workArea.y + screen.workArea.height / 6,\r\n            width: (screen.workArea.width * 2) / 3,\r\n            height: (screen.workArea.height * 2) / 3,\r\n        }),\r\n    },\r\n    FIRST_FOURTH: {\r\n        name: \"first fourth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 4,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    SECOND_FOURTH: {\r\n        name: \"second fourth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 4,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 4,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    THIRD_FOURTH: {\r\n        name: \"third fourth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 4) * 2,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 4,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    FOURTH_FOURTH: {\r\n        name: \"fourth fourth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 4) * 3,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 4,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    FIRST_THREE_FOURTHS: {\r\n        name: \"first three fourths\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: (screen.workArea.width / 4) * 3,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    LAST_THREE_FOURTHS: {\r\n        name: \"last three fourths\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 4,\r\n            y: screen.workArea.y,\r\n            width: (screen.workArea.width / 4) * 3,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    TOP_LEFT_SIXTH: {\r\n        name: \"top left sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    TOP_MIDDLE_SIXTH: {\r\n        name: \"top middle sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 3,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    TOP_RIGHT_SIXTH: {\r\n        name: \"top right sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 3) * 2,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_LEFT_SIXTH: {\r\n        name: \"bottom left sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_MIDDLE_SIXTH: {\r\n        name: \"bottom middle sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + screen.workArea.width / 3,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    BOTTOM_RIGHT_SIXTH: {\r\n        name: \"bottom right sixth\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 3) * 2,\r\n            y: screen.workArea.y + screen.workArea.height / 2,\r\n            width: screen.workArea.width / 3,\r\n            height: screen.workArea.height / 2,\r\n        }),\r\n    },\r\n    MAX: {\r\n        name: \"max\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n    ALMOST_MAX: {\r\n        name: \"almost maximize\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x + (screen.workArea.width / 24),\r\n            y: screen.workArea.y + (screen.workArea.height / 24),\r\n            width: (screen.workArea.width * 11) / 12,\r\n            height: (screen.workArea.height * 11) / 12,\r\n        }),\r\n    },\r\n    NEXT_SCREEN: {\r\n        name: \"next screen\",\r\n        workArea: (screen) => ({\r\n            x: screen.workArea.x,\r\n            y: screen.workArea.y,\r\n            width: screen.workArea.width,\r\n            height: screen.workArea.height,\r\n        }),\r\n    },\r\n};\r\n\r\nasync function setActiveAppsWindows(workArea) {\r\n    await applescript(String.raw`\r\n        tell application \"System Events\"\r\n          set processName to name of first application process whose frontmost is true as text\r\n          tell process processName to set the position of every window to {${workArea.x}, ${workArea.y}}\r\n          tell process processName to set the size of every window to {${workArea.width}, ${workArea.height}}      \r\n        end tell\r\n    `);\r\n}\r\n\r\nasync function getActiveAppsFrontMostWindowsPosition() {\r\n    let positionStr = await applescript(String.raw`\r\n        tell application \"System Events\"\r\n            set processName to name of first application process whose frontmost is true as text\r\n            tell process processName to get position of window 1\r\n        end tell\r\n    `);\r\n    let positionArray = positionStr.split(\",\").map((str) => parseInt(str.trim()));\r\n    return {\r\n        x: positionArray[0],\r\n        y: positionArray[1],\r\n    };\r\n}\r\n\r\nasync function getFrontWindowsScreen() {\r\n    let position = await getActiveAppsFrontMostWindowsPosition();\r\n    let screens = await getScreens();\r\n    return screens.find((screen) => {\r\n        return (\r\n            position.x >= screen.bounds.x &&\r\n            position.x <= screen.bounds.x + screen.bounds.width &&\r\n            position.y >= screen.bounds.y &&\r\n            position.y <= screen.bounds.y + screen.bounds.height\r\n        );\r\n    });\r\n}\r\n\r\nlet windowMode =\r\n    Windows[\r\n        await arg(\r\n            \"Which window(s) to move?\",\r\n            Object.keys(Windows).map((key) => {\r\n                return {\r\n                    name: Windows[key],\r\n                    value: key,\r\n                };\r\n            })\r\n        )\r\n    ];\r\n\r\nlet windowAlignment =\r\n    WindowAlignments[\r\n        await arg(\r\n            \"Window Alignment\",\r\n            Object.keys(WindowAlignments).map((key) => {\r\n                return {\r\n                    name: WindowAlignments[key].name,\r\n                    value: key,\r\n                };\r\n            })\r\n        )\r\n    ];\r\n\r\nlet activeScreen = await getFrontWindowsScreen();\r\nlet nextScreen;\r\nif (windowAlignment === WindowAlignments.NEXT_SCREEN) {\r\n    let screens = await getScreens();\r\n    let nextScreens = screens.filter((screen) => screen.id > activeScreen.id);\r\n    nextScreen = nextScreens.length === 0 ? screens[0] : nextScreens[0];\r\n}\r\n\r\nlet workArea =\r\n    windowAlignment === WindowAlignments.NEXT_SCREEN ?\r\n    windowAlignment.workArea(nextScreen) :\r\n    windowAlignment.workArea(activeScreen);\r\n\r\nif (windowMode === Windows.ALL) {\r\n    await setActiveAppsWindows(workArea);\r\n} else {\r\n    await setActiveAppPosition({\r\n        x: workArea.x,\r\n        y: workArea.y,\r\n    });\r\n    await setActiveAppSize({\r\n        width: workArea.width,\r\n        height: workArea.height,\r\n    });\r\n}\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-14T18:37:45Z"},{"name":"Search for YouTube Videos","description":"","author":"Lucas Vogel","twitter":"soyvogelino","shortcut":"opt y","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/884","url":"https://gist.githubusercontent.com/vogelino/b03f805586365a97f00a3b24c950540f/raw/32a1f772f863d28a76cb2dad720d724069993604/scriptki-search-youtube-videos.js","title":"🎥 Search for youtube videos (with preview) 🔍","command":"search-for-youtube-videos-with-preview","content":"\r\n\r\nhttps://user-images.githubusercontent.com/2759340/190151639-b64651f1-6490-47ee-aa9b-513111535a6a.mov\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=search-youtube-videos&url=https://gist.githubusercontent.com/vogelino/b03f805586365a97f00a3b24c950540f/raw/32a1f772f863d28a76cb2dad720d724069993604/scriptki-search-youtube-videos.js)\r\n\r\n---\r\n\r\n```js\r\n// Name: Search for YouTube Videos\r\n// Description: Prompts for a search string and lists all youtube videos found (with preview)\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n// Shortcut: opt y\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst apiKey = await env(\"YOUTUBE_API_KEY\");\r\nconst previewAudioOn =\r\n  (await env(\r\n    \"YOUTUBE_VIDEO_SEARCH_PREVIEW_AUDIO_ON\",\r\n    \"Would you like the video preview to run with sound? [y/n]\"\r\n  )) === \"y\";\r\nconst previewAutoplayOn =\r\n  (await env(\r\n    \"YOUTUBE_VIDEO_SEARCH_PREVIEW_AUTOPLAY_ON\",\r\n    \"Would you like the video preview to play automatically? [y/n]\"\r\n  )) === \"y\";\r\n\r\nconst searchYoutubeVideos = async (searchString) => {\r\n  if (!searchString) throw new Error(`No search string entered`);\r\n  const ytUrl = new URL(`https://www.googleapis.com/youtube/v3/search`);\r\n  ytUrl.searchParams.set(\"key\", apiKey);\r\n  ytUrl.searchParams.set(\"q\", searchString);\r\n  ytUrl.searchParams.set(\"part\", \"snippet\");\r\n  const { data } = await get(ytUrl.toString());\r\n  return data.items;\r\n};\r\n\r\ntry {\r\n  let searchString = await arg(\"Enter your search\");\r\n  let videos = await searchYoutubeVideos(searchString);\r\n\r\n  while (videos.length === 0) {\r\n    searchString = await arg(\"No results. Enter a new search\");\r\n    videos = await searchYoutubeVideos(searchString);\r\n  }\r\n\r\n  const videoId = await arg(\r\n    \"Select a video to open\",\r\n    videos.map(({ snippet, id }) => ({\r\n      name: snippet.title,\r\n      description:\r\n        snippet.description.length > 50\r\n          ? `${snippet.description.slice(0, 50)}...`\r\n          : snippet.description,\r\n      preview: () => `\r\n        <div style=\"padding: 16px\">\r\n          <table style=\"margin-bottom: 8px;\">\r\n            <tr>\r\n              <td width=\"96px\">\r\n                <img\r\n                  src=\"${snippet.thumbnails.default.url}\"\r\n                  width=\"80px\"\r\n                  style=\"float: left; margin-right: 16px\"\r\n                />\r\n              </td>\r\n              <td><h3>${snippet.title}</h3></td>\r\n            </tr>\r\n          </table>\r\n          <iframe\r\n            src=\"http://www.youtube.com/embed/${id.videoId}?autoplay=${\r\n        previewAudioOn ? 1 : 0\r\n      }\"\r\n            width=\"560\"\r\n            height=\"315\"\r\n            frameborder=\"0\"\r\n            ${previewAutoplayOn && \"autoplay\"}\r\n            style=\"aspect-ratio: 16 / 9; width: 100%;\"\r\n          ></iframe>\r\n        </div>\r\n      `,\r\n      value: id.videoId,\r\n    }))\r\n  );\r\n\r\n  browse(`https://www.youtube.com/watch?v=${videoId}`);\r\n} catch (err) {\r\n  console.log(err);\r\n  notify(err);\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-14T12:22:36Z"},{"name":"New Jitsi Meeting URL","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/882","url":"","title":"👩🏽‍💻 Copy new Jitsi meeting URL to clipboard (and open it optionally)☎️","command":"copy-new-jitsi-meeting-url-to-clipboard-and-open-it-optionally","content":"https://user-images.githubusercontent.com/2759340/190014679-42f73563-d49e-4698-a39a-1e070c1669e6.mov\r\n\r\n[Add to Script Kit](https://scriptkit.com/api/new?name=copy-new-jitsi-link&url=https://gist.githubusercontent.com/vogelino/f2fb8f346b03a00d19107dd8c489323e/raw/ed32c13a269c3f9f80c095978cc3414558ebdc6d/scriptkit-copy-new-jitsi-link.js)\r\n\r\n---\r\n\r\nCopies a random Jitsi Meeting URL to clipboard and offers to open it\r\n\r\n---\r\n\r\n```js\r\n// Name: New Jitsi Meeting URL\r\n// Description: Copies a random Jitsi Meeting URL to clipboard and offers to open it\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst { hri } = await npm(\"human-readable-ids\");\r\n\r\nconst newMeetingSlug = hri.random();\r\nconst newMeetingUrl = `https://meet.jit.si/${newMeetingSlug}`;\r\nawait copy(newMeetingUrl);\r\n\r\nconst shouldBrowse = await arg(\"Do you want to open the link?\", [\r\n  { name: \"No\", description: \"💾 - just copy\", value: false },\r\n  { name: \"Yes\", description: \"💾 + ↗️ - copy and open\", value: true },\r\n]);\r\n\r\nshouldBrowse && browse(newMeetingUrl);\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-13T21:47:20Z"},{"name":"NTS Live","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/880","url":"https://gist.githubusercontent.com/vogelino/f4783551877903587c6f57c08f2a3293/raw/82e6490b89b51083aeb049f77f2fa66b63690627/scriptkit-nts-live.js","title":"📻 NTS Live Widget - Listen to NTS Radio 🎶","command":"nts-live-widget-listen-to-nts-radio","content":"\r\n![CleanShot 2022-10-11 at 10 38 18](https://user-images.githubusercontent.com/2759340/195041318-9707d1e1-fe72-40f4-b345-f3c998eabf00.png)\r\n\r\nCreates a little sticky widget to play NTS live on either channel 1 or 2 \r\n\r\n\r\n**NTS live:** https://www.nts.live/\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=nts-live&url=https://gist.githubusercontent.com/vogelino/f4783551877903587c6f57c08f2a3293/raw/82e6490b89b51083aeb049f77f2fa66b63690627/scriptkit-nts-live.js)\r\n\r\nThx to @joshdavenport for the improvement adding the channel info! 💯 \r\n\r\n---\r\n\r\n```js\r\n// Name: NTS Live\r\n// Description: Stream NTS Live Channel 1 or 2\r\n// Author: Vogelino, extended by Josh Davenport-Smith\r\n// Twitter: @soyvogelino\r\n// Shortcut:\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst PLAYER_HEIGHT = 76;\r\nconst PLAYER_WIDTH = 205;\r\n\r\nconst getLogoSVG = (color) => `\r\n  <svg width=\"32px\" height=\"32px\" style=\"fill:${color};\" viewBox=\"0 0 26 26\"><path d=\"M22.7 6.9L22.3 9h-1.5l.5-2c.1-.6.1-1.1-.6-1.1s-1 .5-1.1 1.1l-.4 1.7c-.1.5-.1 1 0 1.5l1.4 4.1c.2.6.3 1.3.1 2l-.6 2.6c-.4 1.5-1.5 2.4-2.9 2.4-1.6 0-2.3-.7-1.9-2.4l.5-2.2h1.5l-.5 2.1c-.2.8 0 1.2.7 1.2.6 0 1-.5 1.2-1.2l.5-2.3c.1-.5.1-1.1-.1-1.6l-1.3-3.8c-.2-.7-.3-1.2-.2-2.1l.4-2c.4-1.6 1.4-2.4 2.9-2.4 1.7 0 2.2.8 1.8 2.3zM11.2 21.1L14.6 6H13l.3-1.3h4.8L17.8 6h-1.7l-3.4 15.1h-1.5zm-4.5 0L8.1 6.6 4.8 21.1H3.5L7.2 4.8h2.2L8 18.7l3.2-14h1.3L8.8 21.1H6.7zM0 26h26V0H0v26z\"></path></svg>\r\n`;\r\n\r\nconst getCloseIconSVG = (color) => `\r\n  <svg id=\"x\" class=\"ml-1\" width=\"32px\" height=\"32px\" viewBox=\"0 0 24 24\" fill=\"${color}\" class=\"pointer-event-none\">\r\n    <path id=\"x\" fill-rule=\"evenodd\" d=\"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z\" clip-rule=\"evenodd\"/>\r\n  </svg>\r\n`;\r\n\r\nconst btnCommonClasses = `px-4 text-center text-xl italic font-light cursor-default`;\r\n\r\nconst getJavascriptCode = () => `\r\n  const channels = {\r\n    one: { url: \"https://stream-relay-geo.ntslive.net/stream2?client=NTSWebApp&t=1663096772944\", apiIndex: 0 },\r\n    two: { url: \"https://stream-relay-geo.ntslive.net/stream?client=NTSWebApp&t=1663095867072\", apiIndex: 1 },\r\n  };\r\n\r\n  let currentChannel = channels.one;\r\n\r\n  function updateNowPlaying() {\r\n    if (!currentChannel) {\r\n      now.innterHTML = '';\r\n      return;\r\n    }\r\n\r\n    fetch('https://www.nts.live/api/v2/live')\r\n      .then(res => res.json())\r\n      .then(ntsLive => {\r\n        if (!ntsLive || !ntsLive.results) {\r\n          now.innterHTML = '';\r\n          return;\r\n        }\r\n\r\n        const channelData = ntsLive.results[currentChannel.apiIndex];\r\n\r\n        if (channelData && channelData.now && channelData.now.broadcast_title) {\r\n          const now = document.getElementById('now');\r\n          now.innerHTML = channelData.now.broadcast_title;\r\n        } else {\r\n          now.innterHTML = '';\r\n        }\r\n      });\r\n  }\r\n\r\n  function setChannel(channelKey) {\r\n    const audio = document.getElementById('audioPlayer');\r\n    const source = document.getElementById('audioSource');\r\n\r\n    currentChannel = channels[channelKey];\r\n    source.src = currentChannel.url;\r\n\r\n    audio.load();\r\n    audio.play();\r\n    updateNowPlaying();\r\n  }\r\n\r\n  function setActiveClasses(btnEl) {\r\n    btnEl.classList.add(\"font-bold\")\r\n    btnEl.classList.remove(\"text-white\")\r\n    btnEl.classList.add(\"bg-white\")\r\n    btnEl.classList.add(\"text-black\")\r\n  }\r\n\r\n  function setInactiveClasses(btnEl) {\r\n    btnEl.classList.remove(\"font-bold\")\r\n    btnEl.classList.add(\"text-white\")\r\n    btnEl.classList.remove(\"bg-white\")\r\n    btnEl.classList.remove(\"text-black\")\r\n  }\r\n\r\n  const btnOne = document.getElementById('channelOneButton');\r\n  btnOne.addEventListener('click', () => {\r\n    setActiveClasses(btnOne);\r\n    setInactiveClasses(btnTwo);\r\n    setChannel(\"one\");\r\n  }, false);\r\n\r\n  const btnTwo = document.getElementById('channelTwoButton');\r\n  btnTwo.addEventListener('click', () => {\r\n    setActiveClasses(btnTwo);\r\n    setInactiveClasses(btnOne);\r\n    setChannel(\"two\");\r\n  }, false);\r\n\r\n  setActiveClasses(btnOne);\r\n  setInactiveClasses(btnTwo);\r\n  setChannel(\"one\");\r\n`;\r\n\r\nconst wgt = await widget(\r\n  `\r\n  <div class=\"bg-black p-3 text-white\">\r\n    <table>\r\n      <tr>\r\n        <td width=\"32px\" class=\"pl-2 pr-4\">${getLogoSVG(\"white\")}</td>\r\n        <td id=\"channelOneButton\" class=\"${btnCommonClasses}\">1</td>\r\n        <td id=\"channelTwoButton\" class=\"${btnCommonClasses}\">2</td>\r\n        <td id=\"x\" class=\"pl-2\">${getCloseIconSVG(\"white\")}</td>\r\n      </tr>\r\n      <tr>\r\n        <td colspan=\"4\" class=\"text-xxs pt-2 pl-2 text-white\">\r\n          <div id=\"now\" class=\"w-48 whitespace-nowrap text-ellipsis overflow-hidden\">Loading Show Info...</div>\r\n        </td>\r\n      </tr>\r\n    </table>\r\n    <audio id=\"audioPlayer\" class=\"hidden\" controls controlslist=\"nofullscreen nodownload noremoteplayback noplaybackrate\">\r\n      <source id=\"audioSource\">\r\n    </audio>\r\n  </div>\r\n  <script type=\"text/javascript\">${getJavascriptCode()}</script>\r\n`,\r\n  { alwaysOnTop: true, state: { channelKey: \"one\" } }\r\n);\r\n\r\nwgt.setSize(PLAYER_WIDTH, PLAYER_HEIGHT);\r\n\r\nwgt.onClick((event) => event.targetId === \"x\" && wgt.close());\r\n\r\nwgt.onResized(() => wgt.setSize(PLAYER_WIDTH, PLAYER_HEIGHT));\r\n```\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-13T21:08:44Z"},{"name":"Move code left","shortcut":"cmd shift t","author":null,"twitter":null,"avatar":"https://avatars.githubusercontent.com/u/881986?u=ac75bde32c9a12cab3b77fe9345f9a0ebf102b12&v=4","user":"dadamssg","discussion":"https://github.com/johnlindquist/kit/discussions/879","url":"","title":"Move code left","command":"move-code-left","content":"Sometimes when copying code into a textarea to share via slack, discord, wherever, the code will have leading spaces due to the nested/indented nature of the code. This script removes as much leading white space as possible.\r\n\r\nTurns this:\r\n```jsx\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={<Layout />}>\r\n          <Route index element={<Home />} />\r\n      </Routes>\r\n    </Router>\r\n```\r\ninto this: \r\n```jsx\r\n<Router>\r\n  <Routes>\r\n    <Route path=\"/\" element={<Layout />}>\r\n      <Route index element={<Home />} />\r\n  </Routes>\r\n</Router>\r\n```\r\n\r\n[Open move-code-left in Script Kit](https://scriptkit.com/api/new?name=move-code-left&url=https://gist.githubusercontent.com/dadamssg/4622259964601dbffa9235a5d7ea8d11/raw/29f3b10a79ce6c011d57b516353163d77cb465fc/move-code-left.ts\")\r\n\r\n```js\r\n// Name: Move code left\r\n// Shortcut: cmd shift t\r\n// Author: David Adams\r\n// Twitter: @dadamssg\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet text = await getSelectedText()\r\nlet lines = text.split(\"\\n\")\r\nlet lineStarts = lines.map(line => line.search(/\\S/))\r\nlet charsToTrim = Math.min(...lineStarts)\r\nlet formatted = lines.map(line => line.substring(charsToTrim)).join(\"\\n\")\r\nawait setSelectedText(formatted)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-13T18:43:39Z"},{"name":"Download YouTube Video","description":"","author":"Lucas Vogel","twitter":"soyvogelino","avatar":"https://avatars.githubusercontent.com/u/2759340?u=b10448be54da995fcfaeb0782bc484f02ecab997&v=4","user":"vogelino","discussion":"https://github.com/johnlindquist/kit/discussions/878","url":"https://gist.githubusercontent.com/vogelino/094d304b75cd6f42a7bce4197b21dcf6/raw/d25530207689800a7d51cf7aee64d30a0d090a69/scriptkit-download-youtube-video.js","title":"💾 Download a YouTube Video (Named automatically after the video name) 🎞","command":"download-a-youtube-video-named-automatically-after-the-video-name","content":"\r\n\r\nhttps://user-images.githubusercontent.com/2759340/190011576-b12ee71e-3f03-471f-aff0-6d96f1eadcd9.mov\r\n\r\n\r\n[Install on Script Kit](https://scriptkit.com/api/new?name=download-youtube-video&url=https://gist.githubusercontent.com/vogelino/094d304b75cd6f42a7bce4197b21dcf6/raw/d25530207689800a7d51cf7aee64d30a0d090a69/scriptkit-download-youtube-video.js)\r\n\r\n---\r\n\r\n- This script downloads a video given a YouTube URL and shows feedback about the video downloaded while the download is in progress.\r\n- It names the video after the YouTube title (slugified)\r\n- It offers the user either to do nothing, to open the file or the location of the file\r\n\r\n---\r\n\r\n```js\r\n// Name: Download YouTube Video\r\n// Description: Download a video from a YouTube URL as .mp4\r\n// Author: Vogelino\r\n// Twitter: @soyvogelino\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst youtubeDlExec = await npm(\"youtube-dl-exec\");\r\nconst slugify = await npm(\"slugify\");\r\nconst apiKey = await env(\"YOUTUBE_API_KEY\");\r\n\r\n// Show feedback as HTML (Adds padding and some feedback styles)\r\nconst showFeedback = async (message) => {\r\n  await div(`\r\n    <style type=\"text/css\">\r\n      .container { position: relative; padding-right: 232px !important; } \r\n      .error     { border: 1px solid red;   color: red;       background: rgba(255,0,0,.1); }\r\n      .success   { border: 1px solid green; color: darkgreen; background: rgba(0,255,0,.1); }\r\n      .default   { border: 1px solid gray;  color: black;     background: rgba(0,0,0,.05); }\r\n    </style>\r\n    <main class=\"p-8\">\r\n      ${message}\r\n    </main>\r\n  `);\r\n  return message;\r\n};\r\n\r\n// Returns the SVG markup of an animated loading spinner\r\nconst getLoadingSpinner = () => `\r\n<svg\r\n  style=\"margin: 0 8px 0 0; display: inline-block; shape-rendering: auto\"\r\n  width=\"30px\"\r\n  height=\"30px\"\r\n  viewBox=\"0 0 100 100\"\r\n  preserveAspectRatio=\"xMidYMid\"\r\n>\r\n  <defs>\r\n    <clipPath id=\"progress-4hqxcfiwb2u-cp\" x=\"0\" y=\"0\" width=\"100\" height=\"100\">\r\n      <rect x=\"0\" y=\"0\" width=\"0\" height=\"100\">\r\n        <animate\r\n          attributeName=\"width\"\r\n          repeatCount=\"indefinite\"\r\n          dur=\"1s\"\r\n          values=\"0;100;100\"\r\n          keyTimes=\"0;0.5;1\"\r\n        ></animate>\r\n        <animate\r\n          attributeName=\"x\"\r\n          repeatCount=\"indefinite\"\r\n          dur=\"1s\"\r\n          values=\"0;0;100\"\r\n          keyTimes=\"0;0.5;1\"\r\n        ></animate>\r\n      </rect>\r\n    </clipPath>\r\n  </defs>\r\n  <path\r\n    fill=\"none\"\r\n    stroke=\"rgba(0,0,0,.2)\"\r\n    stroke-width=\"2.79\"\r\n    d=\"M18 36.895L81.99999999999999 36.895A13.104999999999999 13.104999999999999 0 0 1 95.10499999999999 50L95.10499999999999 50A13.104999999999999 13.104999999999999 0 0 1 81.99999999999999 63.105L18 63.105A13.104999999999999 13.104999999999999 0 0 1 4.895000000000003 50L4.895000000000003 50A13.104999999999999 13.104999999999999 0 0 1 18 36.895 Z\"\r\n  ></path>\r\n  <path\r\n    fill=\"rgba(0,0,0,.8)\"\r\n    clip-path=\"url(#progress-4hqxcfiwb2u-cp)\"\r\n    d=\"M18 40.99L82 40.99A9.009999999999998 9.009999999999998 0 0 1 91.00999999999999 50L91.00999999999999 50A9.009999999999998 9.009999999999998 0 0 1 82 59.01L18 59.01A9.009999999999998 9.009999999999998 0 0 1 8.990000000000004 50L8.990000000000004 50A9.009999999999998 9.009999999999998 0 0 1 18 40.99 Z\"\r\n  ></path>\r\n</svg>\r\n`;\r\n\r\n// Returns a small HTML structure showing basic information about the video currently downloaded\r\nconst getVideoTemplate = (title, metadata) => `\r\n<h1 class=\"w-full truncate\">${title}</h1>\r\n<table className=\"container\">\r\n  <tr>\r\n    <td width=\"${\r\n      (metadata.thumbnails?.default?.width || 0) + 32\r\n    }\" className=\"pr-4 align-top\">\r\n      <img\r\n        src=\"${metadata.thumbnails?.default?.url}\"\r\n        width=\"${metadata.thumbnails?.default?.width}\"\r\n        height=\"${metadata.thumbnails?.default?.height}\"\r\n      />\r\n    </td>\r\n    <td class=\"align-top\">\r\n      <div>\r\n        <strong class=\"block\">Destination</strong>\r\n        <span>${metadata.path}</span>\r\n      </div>\r\n      <div>\r\n        <strong>Language</strong>\r\n        <span>${metadata.defaultAudioLanguage}</span>\r\n      </div>\r\n      <div>\r\n        <strong>Channel</strong>\r\n        <span>${metadata.channelTitle}</span>\r\n      </div>\r\n    </td>\r\n  </tr>\r\n</table>\r\n`;\r\n\r\n// Retruns basic information about the youtube video (For the feedback and the file name)\r\nconst getVideoMetadata = (url) =>\r\n  new Promise((resolve, reject) => {\r\n    const urlObj = new URL(url);\r\n    const id = urlObj.searchParams.get(\"v\");\r\n    if (!id) return reject(`Video ID not present in the url`);\r\n    const ytUrl = new URL(`https://www.googleapis.com/youtube/v3/videos`);\r\n    ytUrl.searchParams.set(\"key\", apiKey);\r\n    ytUrl.searchParams.set(\"id\", id);\r\n    ytUrl.searchParams.set(\"part\", \"snippet\");\r\n    console.log(ytUrl.toString());\r\n    get(ytUrl.toString())\r\n      .then((response) => response.data)\r\n      .then((data) => data.items[0].snippet)\r\n      .then(resolve);\r\n  });\r\n\r\n// We save the metadata outside the try catch so it's available in the catch\r\nlet fullMetadata = {};\r\n\r\ntry {\r\n  const videoSrc = await arg(\"Video url:\");\r\n  const videoMetadata = await getVideoMetadata(videoSrc);\r\n  const videoPath = \"Downloads\";\r\n\r\n  const videoName = slugify(videoMetadata.title.slice(0, 50).toLowerCase());\r\n  const fileName = videoName !== \"\" ? videoName : videoSrc;\r\n  const newPath = home(videoPath, path.basename(fileName) + \".mp4\");\r\n  fullMetadata = { ...videoMetadata, path: `~/${videoPath}/${fileName}.mp4` };\r\n\r\n  // We display the loading state\r\n  void showFeedback(`\r\n    <div class=\"px-6 py-4 rounded default\">\r\n      ${getVideoTemplate(\r\n        `${getLoadingSpinner()} Downloading \"${fullMetadata.title}\"`,\r\n        fullMetadata\r\n      )}\r\n    </div>\r\n  `);\r\n\r\n  // We download the video\r\n  const res = await youtubeDlExec(videoSrc, { output: newPath });\r\n  console.log(res);\r\n\r\n  // If all went well, we can show a success message\r\n  showFeedback(`\r\n    <div class=\"px-6 py-4 rounded success\">\r\n      ${getVideoTemplate(\r\n        `✅ Successfully downloaded \"${fullMetadata.title}\"`,\r\n        fullMetadata\r\n      )}\r\n    </div>\r\n  `);\r\n  await wait(1000);\r\n\r\n  // After a second, we offer the user the choice of what to do next\r\n  const nextStep = await arg(\"What would you like to do with this file?\", [\r\n    {\r\n      name: \"Show in finder ↗️\",\r\n      description: `Open ~/${videoPath}`,\r\n      value: \"locate\",\r\n    },\r\n    {\r\n      name: \"Open video 🎥\",\r\n      description: `View video in default player`,\r\n      value: `view`,\r\n    },\r\n  ]);\r\n\r\n  // We check for the user's choice in and open either the file or the location\r\n  if (nextStep === \"locate\") {\r\n    exec(`open --reveal ${newPath}`);\r\n  } else if (nextStep === \"view\") {\r\n    exec(`open ${newPath}`);\r\n  }\r\n\r\n  // In case something went wrong, we show the error\r\n} catch (err) {\r\n  console.log(err);\r\n  await showFeedback(`\r\n    <div class=\"px-6 py-4 rounded error\">\r\n      <p class=\"px-6 py-4 mb-4 rounded error\">\r\n        🔴 Error ${err}\r\n      </p>\r\n      ${getVideoTemplate(\r\n        `🔴 Error downloading \"${fullMetadata?.title}\"`,\r\n        fullMetadata || {}\r\n      )}\r\n    </div>\r\n  `);\r\n}\r\n\r\n```\r\n\r\n---\r\n\r\n**Note:**\r\n\r\nThis script is similar and inspired by @kseikyo script [Download an youtube video #852](https://github.com/johnlindquist/kit/discussions/852) but automatically names the file after the video name and shows additional feedback.","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-13T18:17:15Z"},{"name":"Merge pdfs","author":"Lucas Sierota","description":"","dependencies":"pdf-lib","avatar":"https://avatars.githubusercontent.com/u/29212286?u=c4624542d0bc199d0ffe258edc9b2ed5ab55b1e6&v=4","user":"kseikyo","twitter":"lucasemanuelss","discussion":"https://github.com/johnlindquist/kit/discussions/877","url":"https://gist.githubusercontent.com/kseikyo/77de89933487186a0a8053218961784c/raw/536e1ad209017917f7857804d67084bc1c16752b/merge-pdfs.js","title":"Merge multiple PDFs into a single file","command":"merge-multiple-pdfs-into-a-single-file","content":"Merge multiple PDFs into a single file without sending it to some unknown server 🤖 \r\n\r\n[Open merge-pdfs in Script Kit](https://scriptkit.com/api/new?name=merge-pdfs&url=https://gist.githubusercontent.com/kseikyo/77de89933487186a0a8053218961784c/raw/536e1ad209017917f7857804d67084bc1c16752b/merge-pdfs.js\")\r\n\r\n```js\r\n// Name: Merge pdfs\r\n// Author: Lucas Sierota\r\n// Description: Merge multiple pdfs into one\r\n// Dependencies: pdf-lib\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nimport fs from \"fs/promises\";\r\nconst { PDFDocument } = await npm(\"pdf-lib\");\r\n\r\nlet name = await selectFile(\"Select a PDF file to merge\");\r\nconst paths = [name];\r\n\r\n// keep adding paths until there's no input\r\nwhile (\r\n  (await arg({\r\n    placeholder: \"Select another?\",\r\n    hint: `Press only y or n? [y]/[n]`,\r\n  })) === \"y\"\r\n) {\r\n  name = await selectFile(\"Select another PDF file to merge\");\r\n  if (name !== \"\") paths.push(name);\r\n}\r\n\r\n// merge the pdfs\r\nconst pdfsToMerge = await Promise.all(\r\n  paths.map(async (path) => await fs.readFile(path))\r\n);\r\nlet finalPath = await selectFolder(\"Select a folder to save the merged PDF\");\r\nlet finalName = await arg(\"Enter a name for the merged PDF\");\r\nfinalPath = `${finalPath}${finalName}.pdf`;\r\n\r\ntry {\r\n  const mergedPdf = await PDFDocument.create();\r\n  for (const pdfBytes of pdfsToMerge) {\r\n    const pdf = await PDFDocument.load(pdfBytes);\r\n    const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());\r\n    copiedPages.forEach((page) => {\r\n      mergedPdf.addPage(page);\r\n    });\r\n  }\r\n\r\n  const buf = await mergedPdf.save(); // Uint8Array\r\n  let exists = await pathExists(finalPath);\r\n  if (!exists) {\r\n    await writeFile(finalPath, buf);\r\n  } else {\r\n    await div(md(`The path ${finalPath} already exists`));\r\n  }\r\n} catch (e) {\r\n  log(`Error: ${e}`);\r\n  await div(md(`Error: ${e}`));\r\n}\r\n\r\nawait div(md(`Merged PDF saved to ${finalPath}`));\r\n\r\n```\r\n\r\n**Note: This does not support encrypted files.**","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-12T23:07:02Z"},{"name":"format-json","shortcut":"cmd shift j","author":null,"twitter":null,"avatar":"https://avatars.githubusercontent.com/u/881986?u=ac75bde32c9a12cab3b77fe9345f9a0ebf102b12&v=4","user":"dadamssg","discussion":"https://github.com/johnlindquist/kit/discussions/874","url":"","title":"format selected text as sorted json","command":"format-selected-text-as-sorted-json","content":"```js\r\n// Name: format-json\r\n// Shortcut: cmd shift j\r\n// Author: David Adams\r\n// Twitter: @dadamssg\r\n\r\nimport \"@johnlindquist/kit\"\r\nlet jsonabc = await npm(\"jsonabc\")\r\n\r\nlet text = await getSelectedText()\r\n\r\nlet json\r\ntry {\r\n  json = jsonabc.sort(String(text).trim(), false, 2)\r\n} catch (e) {\r\n  notify(e.message)\r\n  exit()\r\n}\r\n\r\nawait setSelectedText(json)\r\n```\r\n\r\n[Install format-json](https://scriptkit.com/api/new?name=format-json&url=https://gist.githubusercontent.com/dadamssg/0a5f15c82af49ac8df80466d6bc39fdc/raw/6e18dd9d34d331628ea7da9f72110376cccfd4f1/format-json.ts)\r\n\r\nTurns this:\r\n```json\r\n[{\"z\": false, \"_id\":\"631b4ed565976c544dbce557\",\"index\":0,\"guid\":\"89965508-5576-46fb-9849-e6ec07918d73\",\"isActive\":false,\"balance\":\"$2,996.82\",\"friends\":[{\"name\":\"Lara Humphrey\",\"id\":0}],\"greeting\":\"Hello, undefined! You have 9 unread messages.\",\"favoriteFruit\":\"strawberry\"}]\r\n```\r\n\r\ninto this(notice the sorted keys):\r\n```json\r\n[\r\n    {\r\n        \"_id\": \"631b4ed565976c544dbce557\",\r\n        \"balance\": \"$2,996.82\",\r\n        \"favoriteFruit\": \"strawberry\",\r\n        \"friends\": [\r\n            {\r\n                \"id\": 0,\r\n                \"name\": \"Lara Humphrey\"\r\n            }\r\n        ],\r\n        \"greeting\": \"Hello, undefined! You have 9 unread messages.\",\r\n        \"guid\": \"89965508-5576-46fb-9849-e6ec07918d73\",\r\n        \"index\": 0,\r\n        \"isActive\": false,\r\n        \"z\": false\r\n    }\r\n]\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-09T14:08:07Z"},{"name":"Emoji Finder","description":"","author":"Peter Wang","avatar":"https://avatars.githubusercontent.com/u/26579337?u=049ae43f71f7df6de8ab99e88d6157abe25615ab&v=4","user":"peterleilei86","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/873","url":"","title":"Emoji Finder","command":"emoji-finder","content":"Search for an emoji and copy it to clipboard with [open emoji api](https://emoji-api.com/)\r\n\r\n```js\r\n// Name: Emoji Finder\r\n// Description: Search for emojis and copy to clipboard\r\n// Author: Peter Wang\r\n\r\nimport '@johnlindquist/kit'\r\n\r\nconst API_KEY = await env('OPEN_EMOJI_API')\r\n\r\nconst emo = await arg('Emoji name')\r\n\r\nconst response = await get(\r\n\t`https://emoji-api.com/emojis?search=${emo}&access_key=${API_KEY}`\r\n)\r\n\r\nconst emojis = response.data.map(({character}) => character)\r\n\r\nif (emojis?.length) {\r\n\tconst emoji = await arg('Pick your emoji', () => emojis)\r\n\tawait copy(emoji)\r\n} else {\r\n\tdiv(md('## No emoji found!'))\r\n}\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-09-06T22:33:08Z"},{"name":"spotify-playing","description":"","author":"Jacopo De Gattis","avatar":"https://avatars.githubusercontent.com/u/86744469?u=5f51b0d3c0e4cb3c8ecb6ade8a5182ad07389f3d&v=4","user":"jacopo-degattis","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/866","url":"","title":"Mini spotify player to show currently playing track","command":"mini-spotify-player-to-show-currently-playing-track","content":"Hi everyone, \r\nI made a tiny player that shows the currently playing track on Spotify.\r\n\r\n```js script\r\n// Name: spotify-playing\r\n// Description: Show currently playing spotify track\r\n// Author: Jacopo De Gattis\r\n\r\nimport \"@johnlindquist/kit\"\r\nimport { WidgetAPI } from \"@johnlindquist/kit/types/pro\";\r\n\r\nconst spotify = await npm(\"spotify-node-applescript\")\r\n\r\nconst playing = false;\r\nconst state: Playback = {\r\n    name: \"\",\r\n    artist: \"\",\r\n    artwork_url: \"\"\r\n}\r\n\r\ninterface Playback {\r\n    name: string,\r\n    artist: string,\r\n    artwork_url: string,\r\n}\r\n\r\nconst wgt: WidgetAPI = await widget(`\r\n\t<div class=\"px-1 flex flex-row w-full justify-between\">\r\n        <div class=\"cover-img\" v-bind:style=\"{'backgroundImage': state.artwork_url ? 'url(' + state.artwork_url + ')' : 'url(' + fallback_icon + ')' }\"></div>\r\n        <div class=\"flex flex-row justify-start track-infos left-container\">\r\n            <div class=\"flex flex-col ml-4 justify-center\">\r\n                <pre class=\"font-inter\">{{state.name ? state.name : \"No music playing\"}}</pre>\r\n                <pre class=\"text-xs\">{{state.artist && state.artist}}</pre>\r\n            </div>\r\n        </div>\r\n        <div class=\"flex justify-center items-center btn-container\">\r\n            <button v-if=\"state.name\" id=\"play-pause\" class=\"play-pause-btn flex justify-center items-center\">\r\n                <img id=\"play-pause-img\" v-bind:src=\"playing ? pause_icon : play_icon\" />\r\n            </button>\r\n        </div>\r\n\t</div>\r\n\t<style>\r\n\t\t@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;700&display=swap');\r\n\r\n        * {\r\n            user-select: none;\r\n        }\r\n\r\n        .cover-img {\r\n            width: 75px;\r\n            height: 75px;\r\n            border-radius: 10px;\r\n            box-shadow: 7px 7px 5px black;\r\n            background-size: 100%;\r\n            transition: background-image 1s ease-in;\r\n        }\r\n\r\n        .left-container {\r\n            width: 200px;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            overflow: hidden;\r\n            margin-right: 20px;\r\n        }\r\n\r\n\t\t.track-infos img {\r\n\t\t\tborder-radius: 10px;\r\n\t\t\tbox-shadow: 7px 7px 5px black;\r\n\t\t}\r\n\t\t\r\n\t\tpre:first-child {\r\n\t\t\tfont-family: 'Inter';\r\n\t\t\tfont-weight: bold;\r\n\t\t\tfont-size: 100%;\r\n\t\t}\r\n\r\n\t\tpre:last-child {\r\n\t\t\tfont-family: 'Inter';\r\n\t\t\tfont-weight: light;\r\n\t\t\tfont-size: 3.0vw;\r\n\t\t}\r\n\r\n\t\tsvg {\r\n\t\t\tmargin-top: 20px;\r\n\t\t}\r\n\r\n        .btn-container {\r\n            margin-right: 20px;\r\n        }\r\n\r\n        .play-pause-btn {\r\n            padding: 5px;\r\n            background-color: #1ED760;\r\n            border-radius: 70%;\r\n            height: 50px;\r\n            width: 50px;\r\n            transition-duration: 0.3s;\r\n            box-shadow: 7px 7px 5px black;\r\n        }\r\n\r\n        .play-pause-btn:hover {\r\n            transform: scale(1.05);\r\n        }\r\n\r\n\t</style>\r\n`, {\r\n    state: {\r\n        pause_icon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAHRJREFUSEtjZKAxYKSx+QwDasFzBgYGCSQfZjAwMMyE8kHs6UhyLxgYGCSxhQY+H/xH09DIwMDQABUD0fVo8ljNGrUAOZRGg4hhNBVh5MPRjAYOktGiYnAXFfgqnHQGBoYZSM4HqZUitcKhSnU9oHUyVXwAAOhlOBlZoVRaAAAAAElFTkSuQmCC\",\r\n        play_icon: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAMlJREFUSEvV1UFqAkEQRuHP0+kRvIR7CYiucgUXEcG48hSCRxA8ggQXbgK6SUAZ6AZFcRzHQux9v0dVV//VEHwawXwvEbQwwQif2NWp8loFA/QTdI0PfD8qKRNk7hwdrKqK7hUU3D8M0cPvvaIqgsz8QRdTHMpEjwgyc5HatrwlqSMouP8Yp0HYXhPVFWTmJrWtGO+ztj1LkEVtzE4reRtBWItCHzlsTMM+WmhUhIVdSFw3U/5/pYWzLwu0qllUh3dx9yU7+akVHAG+vzwZybfc1AAAAABJRU5ErkJggg==\",\r\n        fallback_icon: \"https://community.spotify.com/t5/image/serverpage/image-id/55829iC2AD64ADB887E2A5/image-size/large?v=v2&px=999\"\r\n    }\r\n})\r\n\r\nwgt.onClick((event: any) => {\r\n    if ([\"play-pause\", \"play-pause-img\"].includes(event.targetId)) {\r\n        spotify.playPause((a) => {\r\n            wgt.setState({ playing: !playing })\r\n        });\r\n    }\r\n})\r\n\r\nconst loop = () => {\r\n\twgt.setSize(400, 85)\r\n\r\n    setInterval(async () => {\r\n        spotify.isRunning((err, isRunning) => {\r\n            if (!isRunning) return\r\n\r\n            spotify.getTrack((err: any, track: any) => {\r\n                if (err) return\r\n                \r\n                spotify.getState((err, state) => {\r\n                    if (err) return\r\n    \r\n                    wgt.setState({\r\n                        state: track,\r\n                        playing: state.state === \"playing\" ? true : false\r\n                    })\r\n                })\r\n            })\r\n        })\r\n    }, 1000)\r\n}\r\n\r\nwgt.onResized(() => wgt.setSize(400, 85))\r\n\r\nloop()\r\n```\r\n\r\nI attach a screenshot below\r\n![Screenshot 2022-08-17 at 21 21 25](https://user-images.githubusercontent.com/86744469/185224945-f059408e-8720-4e7b-b4aa-d36e18eb5c6e.png)\r\n\r\n\r\nAny suggestion to improve my code is welcome !\r\nHave a nice day :)","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-08-14T19:02:35Z"},{"name":"Midjourney Prompt","description":"","author":"John Lindquist","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","discussion":"https://github.com/johnlindquist/kit/discussions/854","url":"https://gist.githubusercontent.com/johnlindquist/ce9f7378b80ade93f63fef2586ce7289/raw/2036e5970c77fc510e9535d0d2e0f968552024ef/imagine-prompt.js","title":"Midjourney Prompt Generator","command":"midjourney-prompt-generator","content":"Feel free to tweak the script to use the built-in functions however you want. It's currently generating prompts using _all_ so you'll get absolutely wild results like this:\r\n\r\n![](https://cdn.discordapp.com/attachments/957308102238167120/1002275900471128124/johnlindquist__Studio_photoshoot_of_Brad_Pitt_Hedgehog_Huntress_aac9c6f5-4f34-41b0-a286-6fae1af9c292.png)\r\n\r\n![](https://cdn.discordapp.com/attachments/957308102238167120/1002275121517572177/johnlindquist__Studio_photoshoot_of_Chris_Pratt_Hawk_Mr._Freeze_c2de77d5-1a43-4082-b62e-55e484fba631.png)\r\n\r\n![](https://cdn.discordapp.com/attachments/957308102238167120/1002266728367136838/johnlindquist__Studio_photoshoot_of_Meryl_Streep_Hyena_Swamp_Th_302384dc-9cf8-48bd-b570-85a9c589c994.png)\r\n\r\n> ⚠️ Note: You need to have Discord focused for this script to generate and paste a prompt\r\n\r\n[Open imagine-prompt in Script Kit](https://scriptkit.com/api/new?name=imagine-prompt&url=https://gist.githubusercontent.com/johnlindquist/ce9f7378b80ade93f63fef2586ce7289/raw/2036e5970c77fc510e9535d0d2e0f968552024ef/imagine-prompt.js\")\r\n\r\n```js\r\n// Name: Midjourney Prompt\r\n// Description: Generate a Random Midjourney Prompt\r\n// Author: John Lindquist\r\n// Twitter: @johnlindquist\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet count = parseInt(\r\n  await arg({\r\n    placeholder: \"How many prompts to generate and paste?\",\r\n    onInput: input => {\r\n      submit(input) //auto submit the number on press\r\n    },\r\n  }),\r\n  10\r\n)\r\n\r\nlet frontmost = await npm(\"frontmost-app\")\r\n\r\nlet exitIfNotDiscord = async () => {\r\n  let { localizedName: name } = await frontmost()\r\n  if (name !== \"Discord\") {\r\n    exit()\r\n  }\r\n}\r\n\r\nawait exitIfNotDiscord()\r\n\r\nlet n = (x = 0) =>\r\n  `::${Number(_.random(0.2, 2.2) + x).toPrecision(1)}`\r\n\r\nlet iw = (x = 0) =>\r\n  `${Number(_.random(0.2, 2.2) + x).toPrecision(1)}`\r\n\r\nlet parentDir = await env(\r\n  \"MIDJOURNEY_PARENT_DIR\",\r\n  async () => {\r\n    return await path({\r\n      hint: `Select a parent dir to clone the repo: https://github.com/johnlindquist/midjourney`,\r\n    })\r\n  }\r\n)\r\n\r\nlet mjDir = path.resolve(parentDir, \"midjourney\")\r\n\r\nlet mjExists = await isDir(mjDir)\r\n\r\nif (!mjExists) {\r\n  cd(parentDir)\r\n  await exec(\r\n    `git clone https://github.com/johnlindquist/midjourney`\r\n  )\r\n  cd(mjDir)\r\n} else {\r\n  cd(mjDir)\r\n  await exec(`git pull`)\r\n}\r\n\r\n// await wiki() will pull a random wikipedia title\r\nlet wiki = await npm(\"random-word-wikipedia\")\r\n\r\n// Generate functions based on .md files in the repo\r\nlet files = await readdir(mjDir)\r\nfiles = files.filter(file => file.endsWith(\".md\"))\r\n\r\nfor await (let file of files) {\r\n  let filePath = path.resolve(mjDir, file)\r\n  let list = await readFile(filePath, \"utf-8\")\r\n  let { name } = path.parse(filePath)\r\n  global[name] = () => _.sample(list.trim().split(\"\\n\"))\r\n}\r\n\r\nhide()\r\n\r\nlet go = async () => {\r\n  await exitIfNotDiscord()\r\n\r\n  // Customize however you want. More old \"maybe working\" examples here: https://github.com/johnlindquist/midjourney/blob/main/prompts.md\r\n  let fnsPrompt = `/imagine prompt: ${image()} ${myimage()} Studio photoshoot of ${celeb()} ${animal()} ${hero()}::4 ${await wiki()}${n()} in a ${color()} ${climate()}${n()} in the style of ${game()}${n()} taken by ${photographer()}${n()} by ${artist()}${n()} stylized like ${style()} and ${rank()}${n()} --stylize ${_.random(\r\n    1000,\r\n    3000\r\n  )} --uplight --aspect 16:9 --iw ${iw()}`\r\n\r\n  let prompt = _.sample([fnsPrompt])\r\n\r\n  await exitIfNotDiscord()\r\n\r\n  await setSelectedText(prompt)\r\n  log(prompt)\r\n\r\n  await wait(1000)\r\n\r\n  await exitIfNotDiscord() //I try to be extra careful when scripting the `Enter` key\r\n\r\n  await keyboard.pressKey(Key.Enter)\r\n  await keyboard.releaseKey(Key.Enter)\r\n  await wait(250) // Discord needs a sec after paste+enter to recorgnize it as a command\r\n\r\n  await exitIfNotDiscord()\r\n\r\n  await keyboard.pressKey(Key.Enter)\r\n  await keyboard.releaseKey(Key.Enter)\r\n}\r\n\r\nlet i = 0\r\n\r\nwhile (i < count) {\r\n  i++\r\n  await go()\r\n  await wait(1000)\r\n}\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-28T17:42:26Z"},{"name":"download-youtube-video","description":"","author":"Lucas Sierota","twitter":"lucasemanuelss","avatar":"https://avatars.githubusercontent.com/u/29212286?u=c4624542d0bc199d0ffe258edc9b2ed5ab55b1e6&v=4","user":"kseikyo","discussion":"https://github.com/johnlindquist/kit/discussions/852","url":"","title":"Download an youtube video","command":"download-an-youtube-video","content":"This script lets you download an youtube video into your Downloads folder using [youtube-dl-exec](https://www.npmjs.com/package/youtube-dl-exec).\r\n\r\nAll you have to do is grab the url and paste that into the script.\r\n\r\nAlso, if anyone knows of a better way to provide feedback other than the widgets, let me know 😄 \r\n\r\n```javascript\r\n// Name: download-youtube-video\r\n// Description: Downloads an youtube video using the url\r\n// Author: Lucas Sierota\r\n// Twitter: @lucasemanuelss\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport youtubeDlExec from \"youtube-dl-exec\";\r\n\r\nconst response = await widget(\r\n  `\r\n  <div class=\"w-full h-full text-center flex items-center justify-center\">\r\n    <h1 :class=\"responseClass\">{{ content }}</h1>\r\n  <div>\r\n  `\r\n);\r\nasync function downloadVideo() {\r\n  try {\r\n    const videoSrc = await arg(\"Video url:\");\r\n    const videoName = await arg(\"File name: (don't include extension)\");\r\n    const videoPath = \"Downloads\"\r\n\r\n    const fileName = videoName !== \"\" ? videoName : videoSrc;\r\n    // setting path to be downloaded and including file extension\r\n    const path = home(videoPath, path.basename(fileName) + \".mp4\");\r\n\r\n    // set loading state on widget\r\n    response.setState({\r\n      content: `Downloading...`,\r\n      responseClass: \"text-yellow-600\",\r\n    });\r\n\r\n    const res = await youtubeDlExec(videoSrc, { output: path });\r\n    console.log(res);\r\n    response.setState({\r\n      content: `✅ ${fileName} downloaded at ${path} ✅`,\r\n      responseClass: \"text-green-600\",\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    if (\r\n      err.stderr.includes(\"'NoneType' object has no attribute 'decompress'\") ||\r\n      err.stderr.includes(\"is not a valid URL\")\r\n    ) {\r\n      response.setState({\r\n        content: `🔴 Error: The url provided is not an youtube video 🔴`,\r\n        responseClass: \"text-red-600\",\r\n      });\r\n    } else {\r\n      response.setState({\r\n        content: `🔴 Error ${err} 🔴`,\r\n        responseClass: \"w-full h-full text-red-600\",\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nawait downloadVideo();\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-26T16:08:39Z"},{"name":"Translate with DeepL","author":"Jon E. Eguiluz","twitter":"viroide","avatar":"https://avatars.githubusercontent.com/u/713362?u=a7f6a7564b0aac91fd29ef2ae338d9e390c936fb&v=4","user":"Viroide","discussion":"https://github.com/johnlindquist/kit/discussions/851","url":"https://gist.githubusercontent.com/Viroide/0b1c7653b49c7fd05831d3f306611a7b/raw/08a438d0d45a2519ad133262be4e34cb652e1534/translate.js","title":"Translate using DeepL","command":"translate-using-deepl","content":"A simple script to use [DeepL](https://www.deepl.com/translator) to do translations.\r\n\r\nIt will ask you for a token the DeepL and from which language to which language you want to translate. I have added the function to choose between different translations but as far as I can see it is always returning only one,\r\n\r\n[link to install 🔥](https://scriptkit.com/api/new?name=translate&url=https://gist.githubusercontent.com/Viroide/0b1c7653b49c7fd05831d3f306611a7b/raw/08a438d0d45a2519ad133262be4e34cb652e1534/translate.js)\r\n\r\n```js\r\n// Name: Translate with DeepL\r\n// Author: Jon E. Eguiluz\r\n// Twitter: @viroide\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\n\r\nlet DEEPL_API_KEY = await env(\"DEEPL_API_KEY\", {\r\n    hint: md(\r\n        `Get a [DEEPL_API_KEY API Key](https://www.deepl.com/account/summary)`\r\n    ),\r\n    ignoreBlur: true,\r\n    secret: true,\r\n});\r\n\r\nlet SOURCE_LANG = await env(\"SOURCE_LANG\", {\r\n    hint: md(\r\n        `What language do you write in? (EN, ES... [Full list](https://www.deepl.com/es/docs-api/translating-text/request/))`\r\n    ),\r\n});\r\n\r\nlet TARGET_LANG = await env(\"TARGET_LANG\", {\r\n    hint: md(\r\n        `What language do you want to translate into? (EN, ES... [Full list](https://www.deepl.com/es/docs-api/translating-text/request/))`\r\n    ),\r\n});\r\n\r\nconst query = (input) => \r\n    `https://api-free.deepl.com/v2/translate?text=${encodeURIComponent(input)}&source_lang=${SOURCE_LANG}&target_lang=${TARGET_LANG}&auth_key=${DEEPL_API_KEY}`;\r\n\r\nlet lastTimestamp = null;\r\n\r\nlet selectedTranslation = await arg(\r\n    \"Translate with DeepL\",\r\n    async input => {\r\n        // input check\r\n        if (!input || input.length < 4) return []\r\n\r\n        // delay check\r\n        if (lastTimestamp && Date.now() - lastTimestamp < 200) return []\r\n        lastTimestamp = Date.now()\r\n\r\n        const query_url = query(input);\r\n        let { data } = await get(query_url);\r\n\r\n        return data.translations.map(translation => {\r\n            return {\r\n                name: translation.text,\r\n                preview: md(`${translation.text}`),\r\n                value: translation.text\r\n            }\r\n        })\r\n    }\r\n);\r\n\r\nawait setSelectedText(selectedTranslation);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-26T14:15:34Z"},{"avatar":"https://avatars.githubusercontent.com/u/17277419?u=47eab23e934a39e580b892ae2af00a5ab7c056b1&v=4","user":"eminvergil","author":"eminvergil","twitter":"eminvergil","discussion":"https://github.com/johnlindquist/kit/discussions/847","url":"","title":"Verify phone number","command":"verify-phone-number","content":"Hi, i created new script for phone verification.\r\n\r\nHere is the implementation\r\n\r\n```js\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet envOptions = {\r\n  hint: md(\r\n    `You need to [sign up](https://rapidapi.com/Veriphone/api/veriphone/) to get cridential key`\r\n  ),\r\n  ignoreBlur: true,\r\n  secret: true,\r\n};\r\n\r\nlet rapid_api_key =  await env(\"RAPID_API_KEY\", envOptions);\r\n\r\nconst options = {\r\n  method: \"GET\",\r\n  headers: {\r\n    \"X-RapidAPI-Key\": rapid_api_key,\r\n    \"X-RapidAPI-Host\": \"veriphone.p.rapidapi.com\",\r\n  },\r\n};\r\n\r\nlet phone_number = await arg(\"type your phone number\")\r\n\r\nlet verify_response = await fetch(`https://veriphone.p.rapidapi.com/verify?phone=${phone_number}`, options);\r\nlet response = await verify_response.json();\r\nlet isSuccessfull = response.status_code === 200;\r\n\r\n{isSuccessfull && await div(\r\n`<h1 class=\"p-10 text-4xl text-center\">${response.status === \"success\" ? \"verified\" : \"not verified\"}</h1>`\r\n)}\r\n\r\n{!isSuccessfull && await div(\r\n`<h1 class=\"p-10 text-4xl text-center\">some error occurred.</h1>`\r\n)}\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-21T20:59:52Z"},{"avatar":"https://avatars.githubusercontent.com/u/17277419?u=47eab23e934a39e580b892ae2af00a5ab7c056b1&v=4","user":"eminvergil","author":"eminvergil","twitter":"eminvergil","discussion":"https://github.com/johnlindquist/kit/discussions/846","url":"","title":"Spotify api albums search script","command":"spotify-api-albums-search-script","content":"Hi, i created a script for searching albums by artist name.\r\nHere is the implementation\r\n\r\n```js\r\n\r\nlet envOptions = {\r\n  hint: md(\r\n    `You need to [create an app](https://developer.spotify.com/dashboard/applications) to client_id and client_secret`\r\n  ),\r\n  ignoreBlur: true,\r\n  secret: true,\r\n};\r\n\r\nlet client_id =  await env(\"SPOTIFY_CLIENT_ID\", envOptions);\r\nlet client_secret = await env(\"SPOTIFY_CLIENT_SECRET\", envOptions);\r\n\r\nvar token = await fetch(\"https://accounts.spotify.com/api/token\", {\r\n  method: \"POST\",\r\n  headers: {\r\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n    Accept: \"application/json\",\r\n    Authorization:\r\n      \"Basic \" + new Buffer(client_id + \":\" + client_secret).toString(\"base64\"),\r\n  },\r\n\r\n  body: \"grant_type=client_credentials\",\r\n}).then((res) => res.json());\r\n\r\n\r\nlet GetAlbums = async (artist_name) => {\r\n\r\n  let tokenResponse = await token.json();\r\n\r\n  let response = await fetch(\r\n    `https://api.spotify.com/v1/search?type=album&include_external=audio&q=${artist_name}`,\r\n    {\r\n      headers: {\r\n        Authorization: \"Bearer \" + tokenResponse.res.access_token,\r\n        \"Content-type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n  let data = await response.json();\r\n};\r\n\r\nlet artist_name = await args(\"artist name...\");\r\nlet albums = await GetAlbums(artist_name);\r\n\r\nawait div(\r\n\t`\r\n\t<div className=\"grid lg:grid-cols-4 md:grid-cols-2 grid-cols-1 gap-10  p-5 justify-center items-center mx-auto\">\r\n      {albums.map((album: any) => (\r\n        <div className=\"flex flex-col gap-10  p-5 justify-center items-center mx-auto shadow-sm hover:shadow-2xl transition-shadow duration-500 ease-in-out\">\r\n          <img src={album.images[0].url} alt=\"album\" />\r\n          <h3>{album.name}</h3>\r\n          <p>{album.artists[0].name}</p>\r\n        </div>\r\n      ))}\r\n    </div>\t\r\n\t`\r\n\t)\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-21T20:30:16Z"},{"menu":"Toggle Reduced Motion","description":"","author":"ollie w","twitter":"pxlprfct","avatar":"https://avatars.githubusercontent.com/u/3811773?u=c71763512bbf356be5d11ec540d9ca08f8ba70c0&v=4","user":"pxlprfct","discussion":"https://github.com/johnlindquist/kit/discussions/842","url":"","title":"Toggle prefers reduced motion","command":"toggle-prefers-reduced-motion","content":"\r\n[Open toggle-prefers-reduced-motion in Script Kit](https://scriptkit.com/api/new?name=toggle-prefers-reduced-motion&url=https://gist.githubusercontent.com/pxlprfct/aaa4c05ae0a101c69d6c3558514abe72/raw/d9639afb58bdc60c6bb82e6e31d0af366ef893e2/toggle-prefers-reduced-motion.ts\")\r\n\r\n```js\r\n// Menu: Toggle Reduced Motion\r\n// Description: Switches osx \"prefers reduced motion\" flag\r\n// Author: Ollie W\r\n// Twitter: @pxlprfct\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Credit (https://stackoverflow.com/users/6844169/wch1zpink) -> https://stackoverflow.com/a/60571303\r\nawait applescript(`\r\ntell application \"System Events\"\r\n    repeat until exists of checkbox \"Reduce motion\" of tab group 1 of ¬\r\n        group 1 of window \"Accessibility\" of application process \"System Preferences\"\r\n        delay 0.1\r\n    end repeat\r\n    click checkbox \"Reduce motion\" of tab group 1 of ¬\r\n        group 1 of window \"Accessibility\" of application process \"System Preferences\"\r\nend tell`);\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-17T19:48:40Z"},{"description":"","author":null,"avatar":"https://avatars.githubusercontent.com/u/31288986?u=bb86ac247154b334d321634636e154d5f753f920&v=4","user":"AChandel01071994","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/837","url":"https://gist.githubusercontent.com/AChandel01071994/6fe50ce583e705ac61eb6945c2356235/raw/ba66335de1f842e367f3563fbb3438f8c998ed25/google.js","title":"Easy Google Search","command":"easy-google-search","content":"\r\n[Open google in Script Kit](https://scriptkit.com/api/new?name=google&url=https://gist.githubusercontent.com/AChandel01071994/6fe50ce583e705ac61eb6945c2356235/raw/ba66335de1f842e367f3563fbb3438f8c998ed25/google.js\")\r\n\r\n```js\r\nimport \"@johnlindquist/kit\"\r\n //Name: Google   \r\n// Description: Put your query and  switch to chrome with google search results\r\n// Author: Abhishek Chandel \r\n\r\nlet text = await arg(\"search...\")\r\nbrowse(`https://www.google.com/search?q=${encodeURI(text)}`)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-16T22:57:21Z"},{"menu":"caniuse","description":"","author":"ollie w","twitter":"pxlprfct","avatar":"https://avatars.githubusercontent.com/u/3811773?u=c71763512bbf356be5d11ec540d9ca08f8ba70c0&v=4","user":"pxlprfct","discussion":"https://github.com/johnlindquist/kit/discussions/834","url":"","title":"Search caniuse.com","command":"search-caniusecom","content":"\r\n[Open caniuse in Script Kit](https://scriptkit.com/api/new?name=caniuse&url=https://gist.githubusercontent.com/pxlprfct/0e4d0a94e985ba43b364bca340330409/raw/f7de68241e94639f1d8d381086efb4e18e36b7ae/caniuse.ts\")\r\n\r\n```js\r\n// Menu: caniuse\r\n// Description: Search caniuse.com for browser feature support\r\n// Author: Ollie W\r\n// Twitter: @pxlprfct\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nexport interface Agents {\r\n  [browser: string]: Agent;\r\n}\r\n\r\nexport interface Agent {\r\n  browser: string;\r\n  long_name: string;\r\n  abbr: string;\r\n  prefix: string;\r\n  type: string;\r\n  usage_global?: {\r\n    string: number;\r\n  };\r\n  versions: Array<null | string>;\r\n}\r\n\r\nexport interface Data {\r\n  [browser: string]: Feature;\r\n}\r\n\r\nexport interface Feature {\r\n  title: string;\r\n  description: string;\r\n  spec: string;\r\n  status: string;\r\n  links: Link[];\r\n  categories: string[];\r\n  stats: Stats[];\r\n  notes?: string;\r\n  notes_by_num?: { [num: string]: string };\r\n}\r\n\r\nexport interface Link {\r\n  url: string;\r\n  title: string;\r\n}\r\n\r\nexport interface Stats {\r\n  [browser: string]: null | string;\r\n}\r\n\r\n// ----------------------------------------------------------------------------\r\n\r\nconst TABLE_HEADER = `\r\n| Browser (Latest version) | Can I Use? |\r\n| ------------------------ | ---------- |`;\r\n\r\nconst PRETTY_SUPPORT = new Map([\r\n  [\"y\", \"Yes\"],\r\n  [\"n\", \"No\"],\r\n]);\r\n\r\nconst GLOBAL_BROWSER_USAGE_CUT_OFF = 0.5;\r\n\r\n// ----------------------------------------------------------------------------\r\n\r\nconst pretty_formatted_support = (caniuse: string) => {\r\n  const support = PRETTY_SUPPORT.get(caniuse);\r\n  return support ? support : \"Caveats\";\r\n};\r\n\r\nconst get_latest_browser_version = (browser_versions: Stats) => {\r\n  const latest_browser = Object.keys(browser_versions)\r\n    .sort((a, b) => Number(a) - Number(b))\r\n    .pop();\r\n  return [latest_browser, browser_versions[latest_browser]];\r\n};\r\n\r\nconst create_table_row = (browser, version, support) =>\r\n  `| ${pretty_browser_agents.get(\r\n    browser\r\n  )} *(${version})* | ${pretty_formatted_support(support)} |`;\r\n\r\nconst create_browser_support_rows = (feature: Stats[]) =>\r\n  Object.entries(feature)\r\n    .reduce((rows, [browser, browser_versions]) => {\r\n      const [version, support] = get_latest_browser_version(browser_versions);\r\n\r\n      if (pretty_browser_agents.has(browser)) {\r\n        rows.push(create_table_row(browser, version, support));\r\n      }\r\n\r\n      return rows;\r\n    }, [])\r\n    .join(\"\\n\");\r\n\r\nconst create_browser_support_table = (stats: Stats[]) =>\r\n  [TABLE_HEADER, create_browser_support_rows(stats)].join(\"\\n\");\r\n\r\nconst create_preview = (feature: Feature) =>\r\n  md(\r\n    [\r\n      `## ${feature.title}`,\r\n      \"\",\r\n      `${feature.description}`,\r\n      `${create_browser_support_table(feature.stats)}`,\r\n    ].join(\"\\n\")\r\n  );\r\n\r\n// ----------------------------------------------------------------------------\r\n\r\nconst { agents, data } = await get<{ agents: Agents; data: Data }>(\r\n  `https://raw.githubusercontent.com/Fyrd/caniuse/master/data.json`\r\n).then((response) => response.data);\r\n\r\nconst pretty_browser_agents = new Map(\r\n  Object.entries(agents).reduce((acc, [browser, data]) => {\r\n    const total_usage = Object.values(data.usage_global).reduce(\r\n      (sum, value) => sum + value || 0,\r\n      0\r\n    );\r\n\r\n    if (total_usage >= GLOBAL_BROWSER_USAGE_CUT_OFF) {\r\n      acc.push([browser, data.browser]);\r\n    }\r\n\r\n    return acc;\r\n  }, [])\r\n);\r\n\r\nconst choices = Object.entries(data).map(([feature, feature_value]) => ({\r\n  name: feature_value.title,\r\n  description: feature_value.description,\r\n  value: feature,\r\n  preview: () => create_preview(feature_value),\r\n}));\r\n\r\nconst query = await arg(\"Search for browser feature\", choices);\r\n\r\nbrowse(`https://caniuse.com/?search=${query}`);\r\n```\r\n\r\n\r\nhttps://user-images.githubusercontent.com/3811773/179373944-2126faf3-bc4f-4995-af4d-f2084438eaa8.mp4\r\n\r\nBased on https://github.com/willfarrell/alfred-caniuse-workflow\r\n\r\nFirst thing I've made with scriptkit - very slick! \r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-16T22:44:12Z"},{"name":"Get Hero Icons","description":"","author":"Benjamin Modayil","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/12306850?u=51152dab74c9158efeb6a84a65acf2464cf84218&v=4","user":"benjaminmodayil","discussion":"https://github.com/johnlindquist/kit/discussions/832","url":"","title":"Grab Icon from TailwindLabs's HeroIcons set","command":"grab-icon-from-tailwindlabss-heroicons-set","content":"This script lets you copy a solid/outline icon variant from [TailwindLab's Hero Icons set](https://github.com/tailwindlabs/heroicons).\r\n\r\nI created this as I wanted a fast way to find a specific icon while working in Sketch without referencing the site to copy the svgs. This script uses the \"optimized\" versions of the SVGs. These are good for development, but I've had some bugs with the optimized SVGs (not script related) when pasting it in Sketch. I think if you want to have the uncompressed/less performant version of the SVGs for design programs, you just need to change the GitHub API/paths from the `optimized` folder to the `src` folder.\r\n\r\nhttps://user-images.githubusercontent.com/12306850/179084850-6702912c-7b66-4165-a6df-f878e9bd2f98.mov\r\n\r\n```JavaScript\r\n// Name: Get Hero Icons\r\n// Description: Copies a Hero Icon from TailwindLabs open-sourced repository.\r\n// Author: Benjamin Modayil\r\n// Twitter: @modayilme\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nconst baseRoute = 'https://api.github.com/repos/tailwindlabs/heroicons/contents/optimized';\r\nlet outlineFolderPath = `${baseRoute}/outline`;\r\nlet solidFolderPath = `${baseRoute}/solid`;\r\n\r\nlet outlineFiles;\r\nlet solidFiles;\r\n\r\nconst headers = {\r\n  'User-Agent': 'scriptkit/hero-icons'\r\n};\r\n\r\ntry {\r\n  let outlineResponse = await get(outlineFolderPath, headers);\r\n  let solidResponse = await get(solidFolderPath, headers);\r\n  outlineFiles = outlineResponse.data;\r\n  solidFiles = solidResponse.data;\r\n} catch (error) {\r\n  notify(error);\r\n}\r\n\r\nconst outlineRemotePath =\r\n  'https://raw.githubusercontent.com/tailwindlabs/heroicons/master/optimized/outline';\r\nconst solidRemotePath =\r\n  'https://raw.githubusercontent.com/tailwindlabs/heroicons/master/optimized/solid';\r\n\r\n// We only loop over the outline folder files as the only difference in folders is the icon style type, solid versus outline, (230 files in each folder).\r\nconst options = outlineFiles.map((file) => {\r\n  return {\r\n    name: file.name,\r\n    description: file.path,\r\n    value: file.name,\r\n    preview: `\r\n      <div class=\"bg-white flex\">\r\n        <figure class=\"flex flex-col items-center flex-auto w-40 m-0\">\r\n          <img class=\"w-40\" src=\"${outlineRemotePath}/${file.name}\" alt=\"outline \">\r\n          <figcaption class=\"center text-black\">outline</figcaption>\r\n        </figure>\r\n        <figure class=\"flex flex-col items-center flex-auto w-40 m-0\">\r\n          <img class=\"w-40\" src=\"${solidRemotePath}/${file.name}\" alt=\"solid \">\r\n          <figcaption class=\"center text-black\">solid</figcaption>\r\n        </figure>\r\n      </div>\r\n    `\r\n  };\r\n});\r\n\r\nconst fileName = await arg('Search for an icon:', options);\r\nconst typeOptions = [\r\n  {\r\n    name: 'outline',\r\n    value: `${outlineRemotePath}/${fileName}`,\r\n    preview: `\r\n      <div>\r\n        <figure class=\"bg-white flex flex-col items-center flex-auto w-40 m-0\">\r\n          <img class=\"w-40\" src=\"${outlineRemotePath}/${fileName}\" alt=\"outline ${fileName}\">\r\n          <figcaption class=\"center text-black\">outline</figcaption>\r\n        </figure>\r\n      </div>\r\n    `\r\n  },\r\n  {\r\n    name: 'solid',\r\n    value: `${solidRemotePath}/${fileName}`,\r\n    preview: () => `\r\n      <div>\r\n        <figure class=\"bg-white flex flex-col items-center flex-auto w-40 m-0\">\r\n          <img class=\"w-40\" src=\"${solidRemotePath}/${fileName}\" alt=\"solid ${fileName}\">\r\n          <figcaption class=\"center text-black\">solid</figcaption>\r\n        </figure>\r\n      </div>\r\n    `\r\n  }\r\n];\r\n\r\nconst downloadLink = await arg('Which type?', typeOptions);\r\nconst type = downloadLink.includes('outline') ? 'outline' : 'solid';\r\ntry {\r\n  let buffer = await download(downloadLink, headers);\r\n  await copy(buffer.toString());\r\n  notify(`Copied ${type} ${fileName} icon to clipboard`);\r\n} catch (error) {\r\n  notify(error);\r\n}\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-07-14T20:58:26Z"},{"shortcut":"command option p","menu":"P.I.G","version":"1.0.0","description":"","author":"PRAMOD A JINGADE","twitter":"avj2352","avatar":"https://avatars.githubusercontent.com/u/6997529?u=3d91e8ea523b78a844f1f3974975b34684e4bc05&v=4","user":"avj2352","discussion":"https://github.com/johnlindquist/kit/discussions/780","url":"","title":"Generate PWA assets and splash screens from Logo image","command":"generate-pwa-assets-and-splash-screens-from-logo-image","content":"Handy script to generate all mobile assets and favicon related to Progressive Web Applications based on a logo image\r\n\r\n> NOTE: works best if the logo is square shaped. \r\n\r\n```typescript\r\n// Shortcut: command option p\r\n// Menu: P.I.G \r\n// version: 1.0.0\r\n// Description: 🌆 Generate favicons, assets and splash screens for Progressive Web Apps\r\n// Author: Pramod Jingade\r\n// Twitter: @avj2352\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst Jimp = await npm(\"jimp\");\r\n\r\n// allowed file extensions\r\nconst allowImageExtensions: string[] = [\".png\", \".jpg\"];\r\n\r\n// Read source icon\r\nlet imagePath: string = await getSelectedFile();\r\nif (!imagePath || imagePath === \"\")\r\n  imagePath = await selectFile(`Choose icon to generate PWA assets:`);\r\n\r\n// Check if extension is .PNG or .JPG\r\nlet extension: string = path.extname(imagePath);\r\n\r\n// guard check - extension\r\nwhile (!allowImageExtensions.includes(extension)) {\r\n  let fileName: string = path.basename(imagePath);\r\n  imagePath = await selectFile(`${fileName} wasn't an image:`);\r\n  if (!imagePath) {\r\n    exit();\r\n  }\r\n  // get file extension\r\n  extension = path.extname(imagePath);\r\n}\r\n\r\n// Create image list - android\r\nconst createAndroidImageList: Promise<string>[] = [\r\n  createImage(imagePath, 16, \"android\"),\r\n  createImage(imagePath, 32, \"android\"),\r\n  createImage(imagePath, 72, \"android\"),\r\n  createImage(imagePath, 96, \"android\"),\r\n  createImage(imagePath, 128, \"android\"),\r\n  createImage(imagePath, 144, \"android\"),\r\n  createImage(imagePath, 152, \"android\"),\r\n  createImage(imagePath, 192, \"android\"),\r\n  createImage(imagePath, 384, \"android\"),\r\n  createImage(imagePath, 512, \"android\"),\r\n];\r\n\r\n// Create image list - windows\r\nconst creaeMicrosoftImageList: Promise<string>[] = [\r\n  createImage(imagePath, 70, \"ms-icon\"),\r\n  createImage(imagePath, 150, \"ms-icon\"),\r\n  createImage(imagePath, 310, \"ms-icon\"),\r\n];\r\n\r\n// Create image list - iOS\r\nconst createiOSImageList: Promise<string>[] = [\r\n  createImage(imagePath, 120, \"ios\"),\r\n  createImage(imagePath, 152, \"ios\"),\r\n  createImage(imagePath, 167, \"ios\"),\r\n  createImage(imagePath, 180, \"ios\"),\r\n  createImage(imagePath, 192, \"ios\"),\r\n  createImage(imagePath, 512, \"ios\"),\r\n];\r\n\r\n// Create splash screens\r\nconst createSplashScreenList: Promise<string>[] = [\r\n  createSplashScreenWithLogo(imagePath, 1536, 2048),\r\n  createSplashScreenWithLogo(imagePath, 2436, 1125),\r\n  createSplashScreenWithLogo(imagePath, 1620, 2160),\r\n  createSplashScreenWithLogo(imagePath, 2532, 1170),\r\n  createSplashScreenWithLogo(imagePath, 1668, 2224),\r\n  createSplashScreenWithLogo(imagePath, 1668, 2388),\r\n  createSplashScreenWithLogo(imagePath, 2688, 1242),\r\n  createSplashScreenWithLogo(imagePath, 2732, 2048),\r\n  createSplashScreenWithLogo(imagePath, 1125, 2436),\r\n  createSplashScreenWithLogo(imagePath, 1792, 828),\r\n  createSplashScreenWithLogo(imagePath, 2778, 1284),\r\n  createSplashScreenWithLogo(imagePath, 1136, 640),\r\n  createSplashScreenWithLogo(imagePath, 2046, 1536),\r\n  createSplashScreenWithLogo(imagePath, 1170, 2532),\r\n  createSplashScreenWithLogo(imagePath, 2048, 2732),\r\n  createSplashScreenWithLogo(imagePath, 750, 1334),\r\n  createSplashScreenWithLogo(imagePath, 1242, 2208),\r\n  createSplashScreenWithLogo(imagePath, 2160, 1620),\r\n  createSplashScreenWithLogo(imagePath, 828, 1792),\r\n  createSplashScreenWithLogo(imagePath, 1242, 2688),\r\n  createSplashScreenWithLogo(imagePath, 2208, 1242),\r\n  createSplashScreenWithLogo(imagePath, 1284, 2778),\r\n  createSplashScreenWithLogo(imagePath, 2224, 1668),\r\n  createSplashScreenWithLogo(imagePath, 1334, 750),\r\n  createSplashScreenWithLogo(imagePath, 2388, 1668),\r\n];\r\n\r\n// Create favicon\r\ncreateFavicon(imagePath);\r\n// Create assets\r\nPromise.all(createAndroidImageList);\r\nPromise.all(creaeMicrosoftImageList);\r\nPromise.all(createiOSImageList);\r\nPromise.all(createSplashScreenList);\r\n\r\n/**\r\n * Reusable function to create image\r\n * @param {string} imagePath - complete file path\r\n * @param {number} width - width of image\r\n */\r\nasync function createImage(\r\n  imagePath: string,\r\n  width: number,\r\n  folder: string = \"android\"\r\n): Promise<string> {\r\n  let image = await Jimp.read(imagePath);\r\n  const dirName: string = path.parse(imagePath).dir;\r\n\r\n  const newHeight = Math.floor(\r\n    image.bitmap.height * (width / image.bitmap.width)\r\n  );\r\n\r\n  const resizedImageName = `${folder}-icon-${width}x${width}${extension}`;\r\n\r\n  await image\r\n    .resize(width, newHeight)\r\n    .write(`${dirName}/${folder}/${resizedImageName}`);\r\n  return `Created image: ${imagePath}-${width}${extension}`;\r\n}\r\n\r\n/**\r\n * Create splash screen with logo in center\r\n * @param {string} imagePath - complete file path\r\n * @param {number} canvasWidth - width of splash screen\r\n * @param {number} canvasHeight - height of splash screen\r\n */\r\nasync function createSplashScreenWithLogo(\r\n  imagePath: string,\r\n  canvasWidth: number,\r\n  canvasHeight: number,\r\n  color = \"#FFFFFF\",\r\n  folder = \"ios\"\r\n): Promise<string> {\r\n  const dirName: string = path.parse(imagePath).dir;\r\n  const resizedImageName = `${folder}-splash-${canvasWidth}x${canvasHeight}${extension}`;\r\n\r\n  let image = await Jimp.read(imagePath);\r\n  const imageCanvas = new Jimp(canvasWidth, canvasHeight, color);\r\n  // composite\r\n  imageCanvas\r\n    .composite(\r\n      image,\r\n      alignImageCenter(canvasWidth, image.bitmap.width),\r\n      alignImageCenter(canvasHeight, image.bitmap.height)\r\n    )\r\n    .write(`${dirName}/${folder}/${resizedImageName}`);\r\n  return `Created splash screen!`;\r\n}\r\n\r\n/**\r\n * util function to offset image to the center of canvas\r\n * @param {number} canvasSize\r\n * @param {number} imageSize\r\n * @returns {number} offset size\r\n */\r\nfunction alignImageCenter(canvasSize: number, imageSize: number): number {\r\n  return (canvasSize - imageSize) / 2;\r\n}\r\n\r\n/**\r\n * Create favicon.ico file at the root of the folder\r\n * @param {string} imagePath \r\n */\r\nasync function createFavicon(imagePath: string) {\r\n  const dirName: string = path.parse(imagePath).dir;  \r\n  let image = await Jimp.read(imagePath);\r\n  const resizedImageName = `favicon.ico`;\r\n  await image.resize(16, 16).write(`${dirName}/${resizedImageName}`);\r\n  return `Created Favicon!`;\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-06-13T08:52:50Z"},{"name":"xstate widget","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/778","url":"","title":"XState Widget","command":"xstate-widget","content":"\r\n[Open xstate-widget in Script Kit](https://scriptkit.com/api/new?name=xstate-widget&url=https://gist.githubusercontent.com/johnlindquist/3168217af9fd93002f3b050783bb88e8/raw/af39e3534e659ceb9297413e75b5110a63c37287/xstate-widget.ts\")\r\n\r\n```js\r\n// Name: xstate widget\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet { createMachine, interpret } = await npm(\"xstate\")\r\n\r\nlet initial = 'inactive'\r\nlet toggleMachine = createMachine({\r\n    id: 'toggle',\r\n    initial,\r\n    states: {\r\n        inactive: { on: { TOGGLE: 'active' } },\r\n        active: { on: {TOGGLE: 'inactive'}}\r\n    }\r\n})\r\n\r\n// Widgets use \"petite-vue\" templating with state on the root\r\n// This allows to send a state object\r\nlet w = await widget(`\r\n<div class=\"p-4 text-4xl\">\r\n    <button>Click</button>\r\n    <div>{{ value === \"active\" ? \"💚\" : \"💔\"}}<div>\r\n</div>`, {\r\n    state: {\r\n        value: initial\r\n    }\r\n})\r\n\r\nlet toggleService = interpret(toggleMachine)\r\n    .onTransition(state => {\r\n        log(state) // ~/.kenv/logs/xstate-widget.log\r\n        w.setState(state)\r\n    })\r\n    .start()\r\n\r\nw.onClick(() => {\r\n    toggleService.send('TOGGLE')\r\n})\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-06-06T23:33:23Z"},{"name":"Eject External Drive","avatar":"https://avatars.githubusercontent.com/u/3693735?v=4","user":"ohana54","author":"Tomer Ohana","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/772","url":"https://gist.githubusercontent.com/ohana54/ad6c3269ccc036daaec2d7036260404a/raw/32c800da6ea9871bd99f06e5867d3648118d9db6/eject-external-drive.js","title":"Eject External Drive","command":"eject-external-drive","content":"\r\n[Open eject-external-drive in Script Kit](https://scriptkit.com/api/new?name=eject-external-drive&url=https://gist.githubusercontent.com/ohana54/ad6c3269ccc036daaec2d7036260404a/raw/32c800da6ea9871bd99f06e5867d3648118d9db6/eject-external-drive.js\")\r\n\r\n```js\r\n// Name: Eject External Drive\r\n\r\nimport \"@johnlindquist/kit\"\r\nimport os from 'os'\r\n\r\nconst {stdout} = await $`diskutil list | grep \"(external\"`\r\n\r\nconst firstDisk = stdout.split(os.EOL)[0]\r\nconst firstDiskPath = firstDisk.split(' ')[0]\r\n\r\nawait $`diskutil eject ${firstDiskPath}`\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-05-20T22:12:26Z"},{"name":"Open Pull Requests","author":"Manan Joshi","twitter":"manan__joshi","avatar":"https://avatars.githubusercontent.com/u/12088143?u=8dfbb9a55ec09ac267e17424d3fdffc46aa3408d&v=4","user":"manan30","discussion":"https://github.com/johnlindquist/kit/discussions/763","url":"","title":"List all open PR's across all repos. Includes ones created by you as well as ones requesting your review","command":"list-all-open-prs-across-all-repos-includes-ones-created-by-you-as-well-as-ones-requesting-your-review","content":"Shows a list of all open PR's across all of your Github repos. Includes ones created by you as well as ones requesting your review. Selecting a pull request will open it directly in the browser\r\n\r\n```js\r\n// Name: Open Pull Requests\r\n// Author: Manan Joshi\r\n// Twitter: @manan__joshi\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport { Choice } from \"@johnlindquist/kit\";\r\n\r\nconst GITHUB_ACCESS_TOKEN = \"<YOUR_GITHUB_ACCESS_TOKEN>\";\r\nconst GITHUB_GRAPHQL_ENDPOINT = \"https://api.github.com/graphql\";\r\n\r\nconst myRequests = async () =>\r\n  await fetch(GITHUB_GRAPHQL_ENDPOINT, {\r\n    headers: { Authorization: `token ${GITHUB_ACCESS_TOKEN}` },\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      query: `\r\n        query {\r\n          viewer {\r\n            pullRequests(\r\n              first: 100\r\n              orderBy: { field: CREATED_AT, direction: DESC }\r\n              states: OPEN\r\n            ) {\r\n              nodes {\r\n                author {\r\n                  login\r\n                  avatarUrl\r\n                }\r\n                url\r\n                title\r\n                body\r\n                repository {\r\n                  nameWithOwner\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      `,\r\n    }),\r\n  });\r\n\r\nconst reviewRequests = async () =>\r\n  await fetch(GITHUB_GRAPHQL_ENDPOINT, {\r\n    headers: { Authorization: `token ${GITHUB_ACCESS_TOKEN}` },\r\n    method: \"POST\",\r\n    body: JSON.stringify({\r\n      query: `\r\n        query {\r\n          search(\r\n            query: \"is:pr is:open review-requested:<your_github_username>\"\r\n            type: ISSUE\r\n            first: 100\r\n          ) {\r\n            nodes {\r\n              ... on PullRequest {\r\n                title\r\n                url\r\n                body\r\n                author {\r\n                  login\r\n                  avatarUrl\r\n                }\r\n                repository {\r\n                  nameWithOwner\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      `,\r\n    }),\r\n  });\r\n\r\n[\"Mine\", \"Requested\"].forEach((type) => {\r\n  onTab(type, async () => {\r\n    const pullRequestUrl = await arg(\"Select a Pull Request\", async () => {\r\n      let requests = [];\r\n\r\n      if (type === \"Mine\") {\r\n        const data = await myRequests();\r\n        requests = (await data.json()).data.viewer.pullRequests.nodes;\r\n      } else {\r\n        const data = await reviewRequests();\r\n        requests = (await data.json()).data.search.nodes;\r\n      }\r\n\r\n      return requests.map(\r\n        (request) =>\r\n          ({\r\n            name: request.title,\r\n            description: `${request.repository.nameWithOwner} | ${request.author.login}`,\r\n            value: request.url,\r\n            icon: request.author.avatarUrl,\r\n            preview: md(`# ${request.title}`).concat(md(request.body)),\r\n          } as Choice<string>)\r\n      );\r\n    });\r\n\r\n    exec(`open ${pullRequestUrl}`);\r\n  });\r\n});\r\n```\r\n\r\n![pika-2022-05-01T09_04_11 591Z](https://user-images.githubusercontent.com/12088143/166139324-a03b6bfe-43d3-4deb-9592-5a1e60c052a2.png)","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-05-01T09:06:31Z"},{"name":"Copy text sans brackets","description":"","shortcut":"cmd + [","author":"Ian Jones","twitter":"_jonesian","avatar":"https://avatars.githubusercontent.com/u/4407263?u=fa7f37727ea98fd7f24e8409d0fda4c451c48eae&v=4","user":"theianjones","discussion":"https://github.com/johnlindquist/kit/discussions/757","url":"","title":"Copy Logseq/Roam Research content to clipboard without `[[]]` brackets","command":"copy-logseqroam-research-content-to-clipboard-without-brackets","content":"Remove wiki links (from logseq or roam) when you want to copy paste notes our of your editor:\r\n\r\n[Install kit link](https://scriptkit.com/api/new?name=remove-brackets&url=https://gist.githubusercontent.com/theianjones/ba3457aba8dd7efeafa804f83bbcbf39/raw/9ac61e8191d56de9a4d87fb4455b2872ed0ab3a9/remove-brackets.ts)\r\n\r\n```ts\r\n// Name: Copy text sans brackets\r\n// Description: Remove wiki links from selected text\r\n// Shortcut: cmd + [\r\n// Author: Ian Jones\r\n// Twitter: @_jonesian\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst text = await getSelectedText()\r\nconst newText = text.split(\"\\n\").map(text => {\r\n    return text.split(' ').map((word, i, arr) => {\r\n        if(!word) {\r\n            return\r\n        }\r\n        const FULL_BRACES_MATCH = /\\[\\[(.*?)\\]\\]/\r\n        const LEFT_MATCH = /\\[\\[/\r\n        const RIGHT_MATCH = /\\]\\]/\r\n        const [_, fullMatch] = word.match(FULL_BRACES_MATCH) ?? []\r\n        const [leftMatch] = word.match(LEFT_MATCH) ?? []\r\n        const [rightMatch] = word.match(RIGHT_MATCH) ?? []\r\n        \r\n        if(!!fullMatch){\r\n            return fullMatch\r\n        } else if (!!leftMatch) {\r\n            const restOfArr = arr.slice(i + 1)\r\n            const restOfLink = restOfArr.reduce((acc, curr) => {\r\n                if(acc.endFound){\r\n                    return acc\r\n                }\r\n                const [rightMatch] = curr.match(RIGHT_MATCH) ?? []\r\n\r\n                return {endFound: !!rightMatch, str: acc.str + \" \" + curr}\r\n            }, {endFound: false, str: ''}).str\r\n            const [_, match] =  (word + restOfLink).match(FULL_BRACES_MATCH) ?? []\r\n            return match\r\n        } else if (rightMatch){\r\n            return\r\n        }else {\r\n            return word\r\n        }\r\n    }).join(' ')\r\n}).join(\"\\n\")\r\n\r\nif(newText){\r\n    await copy(newText)\r\n}\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-04-15T17:47:29Z"},{"menu":"Get Current Weather","description":"","author":"Daniel Chapman","twitter":"ds_chapman","avatar":"https://avatars.githubusercontent.com/u/36767987?u=e03b3d34a5882f34dfb8d6e11609dd94836e3696&v=4","user":"dschapman","discussion":"https://github.com/johnlindquist/kit/discussions/752","url":"","title":"Find Current Weather","command":"find-current-weather","content":"Inspired by [this script](https://github.com/johnlindquist/kit/discussions/489) I created a script that uses https://weather.gov and the [locateme](https://formulae.brew.sh/formula/locateme) script to find the weather in your current location. You can also find the weather by City, State or Zip code.\r\n\r\nThis script requires you to install locateme (`brew install locateme`) and grant it permission to use your location in Security & Privacy.\r\n\r\n<img width=\"987\" alt=\"Screen Shot 2022-03-25 at 10 22 11 AM\" src=\"https://user-images.githubusercontent.com/36767987/160138999-fdc14c88-f90a-45c4-8e27-65e0f9e959f9.png\">\r\n\r\n```javascript\r\n// Menu: Get Current Weather\r\n// Description: Forecast provided by weather.gov\r\n// Author: Daniel Chapman\r\n// Twitter: @ds_chapman\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet input = await arg(\"Get the Weather\", [\"For My Current Location\", \"For a Different Location\"])\r\nvar location;\r\nif (input == \"For My Current Location\") {\r\n  // Requires LocateMe installed on the path \r\n  // '$ brew install locateme'\r\n  // Also make sure to allow locateme in privacy/security\r\n  location = await $`locateme -f \"lat={LAT}&lon={LON}\"`;\r\n  div(\r\n  `<iframe src=\"https://forecast.weather.gov/MapClick.php?${location}\" height=1280px width=100% />`, \r\n);\r\n} else if (input == \"For a Different Location\") {\r\n  location = await arg(\"City, State or Zip\")\r\n\r\n  div(`<iframe src=\"https://forecast.weather.gov/zipcity.php?inputstring=${location}\" height=1280px width=100% />`)\r\n\r\n\r\n}\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-03-25T14:25:18Z"},{"name":"Website Tools","description":"","author":"Daniel Chapman","twitter":"ds_chapman","avatar":"https://avatars.githubusercontent.com/u/36767987?u=e03b3d34a5882f34dfb8d6e11609dd94836e3696&v=4","user":"dschapman","discussion":"https://github.com/johnlindquist/kit/discussions/751","url":"https://gist.githubusercontent.com/dschapman/23e3121f227b827409389a4822ed91f4/raw/f6f2a8e5b979ee19353adbab691ec86b1308ee15/publish-website.js","title":"Tools for Managing a Markdown Based Website with Git Submodules","command":"tools-for-managing-a-markdown-based-website-with-git-submodules","content":"[Install Script](https://scriptkit.com/api/new?name=publish-website&url=https://gist.githubusercontent.com/dschapman/23e3121f227b827409389a4822ed91f4/raw/f6f2a8e5b979ee19353adbab691ec86b1308ee15/publish-website.js)\r\n\r\nI put together a toolbox of scripts to help me manage my website -- a Gatsby based website that includes two different submodules of markdown content (One for my public notes, and one for my website's content). Some scripts are pretty straightforward (open VSCode, open the website in the browser) but the publish scripts take care of all of the git commands necessary to publish changes for me, including updating the git submodules.\r\n\r\n<img width=\"880\" alt=\"Screen Shot 2022-03-25 at 9 54 41 AM\" src=\"https://user-images.githubusercontent.com/36767987/160134094-4bf70455-6727-407a-a0d3-ab528283fa45.png\">\r\n<img width=\"880\" alt=\"Screen Shot 2022-03-25 at 9 55 21 AM\" src=\"https://user-images.githubusercontent.com/36767987/160134204-177e87e1-0b5c-4e16-a05a-dc1fb2a7017d.png\">\r\n\r\n\r\n\r\n```javascript\r\n// Name: Website Tools\r\n// Description: Tools for maintaining my website (dschapman.com)\r\n// Author: Daniel Chapman\r\n// Twitter: @ds_chapman\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet website_content = \"/Users/danielchapman/Library/Mobile Documents/iCloud~md~obsidian/Documents/dschapman-com-content\"\r\nlet website_notes = \"/Users/danielchapman/Library/Mobile Documents/iCloud~md~obsidian/Documents/My notes\"\r\nlet website_dir = \"/Users/danielchapman/github/dschapman/dschapman-com\"\r\n\r\nlet today = Date()\r\nlet output = []\r\nlet input = await arg(\"Select an Option\", [{ name: \"Publish\", description: \"Update the git repositories necessary to publish an update to my website\", value: \"Publish\" }, { name: \"Open Website in VSCode\", description: \"Open a vscode environment for dschapman-com\", value: \"VSCode\" }, { name: \"Edit Website Content\", description: \"Open the website's content in Obsidian\", value: \"Edit Website Content\" }, { name: \"Open Website\", description: \"Open https://dschapman.com in the browser\", value: \"Open Website\" }, { name: \"View on Github\", description: \"View website code on Github\", value: \"Github\" }].sort((a, b) => { return (a.name > b.name ? 1 : -1) }))\r\n\r\nswitch (input) {\r\n    case \"Publish\":\r\n        input = await arg(\"Publish\", [{ name: \"Website Content\", description: \"Publish any changes to poems, articles or blog posts\", \"value\": \"Website Content\" }, { name: \"Website Notes\", description: \"Publish any changes to public notes\", value: \"Website Notes\" }, { name: \"All Content\", description: \"Publish it all\", value: \"All Content\" }])\r\n        // -C allows git to be run from any directory\r\n        switch (input) {\r\n            case \"Website Content\":\r\n                output.push(await exec(`git -C \"${website_content}\" add -A`))\r\n                output.push(await exec(`git -C \"${website_content}\" commit -m \"Publish content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_content}\" push`))\r\n                output.push(await exec(`git -C \"${website_dir}\" submodule update --remote`))\r\n                output.push(await exec(`git -C \"${website_dir}\" add dschapman-com-content`))\r\n                output.push(await exec(`git -C \"${website_dir}\" commit -m \"Publish content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_dir}\" push`))\r\n                break;\r\n            case \"Website Notes\":\r\n                output.push(await exec(`git -C \"${website_notes}\" add -A`))\r\n                output.push(await exec(`git -C \"${website_notes}\" commit -m \"Publish content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_notes}\" push`))\r\n                output.push(await exec(`git -C \"${website_dir}\" submodule update --remote`))\r\n                output.push(await exec(`git -C \"${website_dir}\" add My-notes`))\r\n                output.push(await exec(`git -C \"${website_dir}\" commit -m \"Publish notes: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_dir}\" push`))\r\n                break;\r\n            case \"All\":\r\n                output.push(await exec(`git -C \"${website_content}\" add -A`))\r\n                output.push(await exec(`git -C \"${website_content}\" commit -m \"Publish content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_content}\" push`))\r\n                output.push(await exec(`git -C \"${website_notes}\" add -A`))\r\n                output.push(await exec(`git -C \"${website_notes}\" commit -m \"Publish content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_notes}\" push`))\r\n                output.push(await exec(`git -C \"${website_dir}\" submodule update --remote`))\r\n                output.push(await exec(`git -C \"${website_dir}\" add My-notes dschapman-com-content`))\r\n                output.push(await exec(`git -C \"${website_dir}\" commit -m \"Publish all content: ${today.toString()}\"`))\r\n                output.push(await exec(`git -C \"${website_dir}\" push`))\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        break;\r\n    case \"VSCode\":\r\n        exec(`code \"${website_dir}\"`);\r\n        break;\r\n    case \"Edit Website Content\":\r\n        input = await arg(\"Open\", [{ name: \"Articles, Poems, and Blog Posts\", value: \"content\" }, { name: \"Digital Notes\", value: \"notes\" }])\r\n        switch (input) {\r\n            case \"content\":\r\n                console.log(\"Content\")\r\n                browse(`\"obsidian://open?vault=dschapman-com-content\"`)\r\n                break;\r\n            case \"notes\":\r\n                console.log(\"Notes\")\r\n                browse(`\"obsidian://open?vault=My%20notes\"`)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n       break;\r\n    case \"Open Website\":\r\n        browse(\"https://dschapman.com\")\r\n        break;\r\n    case \"Github\":\r\n        browse(\"https://github.com/dschapman/dschapman-com\")\r\n        break;\r\n    default:\r\n        break;\r\n}\r\noutput.forEach(item => {\r\n    if (item.stdout)\r\n        console.log(item.stdout)\r\n})\r\n\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-03-25T13:55:56Z"},{"menu":"Watch slack status","description":"","avatar":"https://avatars.githubusercontent.com/u/12891645?u=eb9ed13c1bc9eeccf0b87ddbeea8778c7c32c05a&v=4","user":"JoepKockelkorn","author":"Joep Kockelkorn","twitter":"JoepKockelkorn","discussion":"https://github.com/johnlindquist/kit/discussions/748","url":"https://gist.githubusercontent.com/JoepKockelkorn/cc1dccf0cdc03bbca494d6afe1012124/raw/a122668ebc1471c329a1987329e1a98504dfde0c/slack-status.js","title":"Slack status in a refreshing widget","command":"slack-status-in-a-refreshing-widget","content":"\r\n[Open slack-status in Script Kit](https://scriptkit.com/api/new?name=slack-status&url=https://gist.githubusercontent.com/JoepKockelkorn/cc1dccf0cdc03bbca494d6afe1012124/raw/a122668ebc1471c329a1987329e1a98504dfde0c/slack-status.js\")\r\n\r\n```js\r\n// Menu: Watch slack status\r\n// Description: Open a refreshing widget which shows any slack incidents\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nconst intervalInMinutes = 2;\r\nconst intervalInMs = 2 * 60 * 1000;\r\nconst { incidentTitle, updatedFormatted, nextUpdateFormatted } = await getData(\r\n  intervalInMs\r\n);\r\n\r\nconst w = await widget(\r\n  `\r\n    <div class=\"p-4\">\r\n        <h1>Slack status</h1>\r\n        <h2>{{ incidentTitle }}</h2>\r\n        <p>Updated at: {{ updatedFormatted }}</p>\r\n        <p>Next update: {{ nextUpdateFormatted }}</p>\r\n    </div>\r\n`,\r\n  {\r\n    alwaysOnTop: true,\r\n    state: { incidentTitle, updatedFormatted, nextUpdateFormatted },\r\n  }\r\n);\r\n\r\nconst interval = setInterval(async () => {\r\n  const state = await getData(intervalInMs);\r\n  w.setState(state);\r\n}, intervalInMs);\r\n\r\nw.onClose(() => clearInterval(interval));\r\n\r\nasync function getData(intervalInMs) {\r\n  const { active_incidents: incidents } = (\r\n    await get(\"https://status.slack.com/api/v2.0.0/current\")\r\n  ).data;\r\n  const updated = new Date();\r\n  const updatedFormatted = updated.toLocaleTimeString(\"nl-NL\");\r\n  const nextUpdate = new Date(updated);\r\n  nextUpdate.setMilliseconds(updated.getMilliseconds() + intervalInMs);\r\n  const nextUpdateFormatted = nextUpdate.toLocaleTimeString(\"nl-NL\");\r\n  const incidentTitle = incidents[0]?.title\r\n    ? `⚠️ ${incidents[0].title}`\r\n    : \"All good in the hood 🤘\";\r\n  return { incidentTitle, updatedFormatted, nextUpdateFormatted };\r\n}\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-03-09T16:05:00Z"},{"menu":"Emoji picker","shortcut":"option cmd e","twitter":"vjthlk","author":"Vojta Holik","avatar":"https://avatars.githubusercontent.com/u/25487857?u=1c81cf15334c751c49f61fe7e0e84b0618eb0e0e&v=4","user":"vojtaholik","discussion":"https://github.com/johnlindquist/kit/discussions/733","url":"https://gist.githubusercontent.com/vojtaholik/f097a40be15c6b21d5f8435120fda371/raw/daa43bc4320a8f1846f4f2a18d0e99507f9f45b5/emoji.js","title":"Emoji picker","command":"emoji-picker","content":"\r\n[Open emoji picker in Script Kit](https://scriptkit.com/api/new?name=emoji&url=https://gist.githubusercontent.com/vojtaholik/f097a40be15c6b21d5f8435120fda371/raw/daa43bc4320a8f1846f4f2a18d0e99507f9f45b5/emoji.js\")\r\n\r\n```js\r\n// Menu: Emoji picker\r\n// Shortcut: option cmd e\r\n// Twitter: @vjthlk\r\n// Author: Vojta Holik\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst { emojis, write } = await db(\"emojis-db\", {\r\n  emojis: [],\r\n});\r\n\r\nlet emojiPath = tmpPath(`emoji.json`);\r\n\r\nif (!(await isFile(emojiPath))) {\r\n  await download(\r\n    `https://raw.githubusercontent.com/github/gemoji/master/db/emoji.json`,\r\n    tmpPath()\r\n  );\r\n}\r\n\r\nlet emojiJson = await readJson(emojiPath);\r\n\r\nlet emojiJsonHistory = emojis.map((e) => {\r\n  return _.find(emojiJson, { emoji: e });\r\n});\r\n\r\nconst mode = (arr) =>\r\n  arr.reduce(\r\n    (a, b, i, arr) =>\r\n      arr.filter((v) => v === a).length >= arr.filter((v) => v === b).length\r\n        ? a\r\n        : b,\r\n    null\r\n  );\r\n\r\nlet mostUsed = mode(emojiJsonHistory);\r\n\r\nlet history = _.uniq(\r\n  [...emojiJsonHistory]\r\n    .filter((e) => e.description !== mostUsed.description)\r\n    .reverse()\r\n);\r\n\r\nlet emojiList = [\r\n  ...history.slice(0, 1),\r\n  mostUsed,\r\n  ...history.slice(1, 5),\r\n  ...emojiJson.filter((e) => {\r\n    return !history.includes(e);\r\n  }),\r\n];\r\n\r\nlet selectedEmoji = await arg(\r\n  \"Search\",\r\n  emojiList.map((e) => {\r\n    return {\r\n      name: `${e.emoji} ${e.description}`,\r\n      description: `${e.category} ${!_.isEmpty(e.tags) ? \"-\" : \"\"} ${e.tags.map(\r\n        (tag) => ` ${tag}`\r\n      )}`,\r\n      value: e.emoji,\r\n      shortcode: e.tags.map((tag) => ` ${tag}`),\r\n    };\r\n  })\r\n);\r\n\r\nemojis.push(!selectedEmoji.name && selectedEmoji);\r\nawait write();\r\n\r\nawait setSelectedText(selectedEmoji);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-02-16T15:31:40Z"},{"menu":"Battery Monitor","description":"","author":"Richard Dyce","twitter":null,"schedule":"0,15,20,45 5-22 * * *","avatar":"https://avatars.githubusercontent.com/u/1810481?u=f54707fef953fe4447b6860d598793836675c027&v=4","user":"dickiedyce","discussion":"https://github.com/johnlindquist/kit/discussions/731","url":"https://gist.githubusercontent.com/johnlindquist/3c21deb6d0d9dd9d06d8268fdd4baa30/raw/5837f8365aab810906323fbd0430e32f544ee7db/monitor-battery.js","title":"Check if AC should be disconnected? (Poorman's AlDente)","command":"check-if-ac-should-be-disconnected-poormans-aldente","content":"I have a MacBook Retina, 12-inch, 2017, which makes using a tool like AlDente (for keeping the battery in good condition) impossible.\r\n\r\nThis is a scheduled script that notifies me to manually unplug when I reach 80% charge, and again manually plug it back in when the charge drops to 40%.\r\n\r\n[Open monitor-battery in Script Kit](https://scriptkit.com/api/new?name=monitor-battery&url=https://gist.githubusercontent.com/johnlindquist/3c21deb6d0d9dd9d06d8268fdd4baa30/raw/5837f8365aab810906323fbd0430e32f544ee7db/monitor-battery.js\")\r\n\r\n```js\r\n// Menu: Battery Monitor\r\n// Description: Check if AC should be disconnected? Poorman's AlDente\r\n// Author: Richard Dyce\r\n// Twitter: @dickiedyce\r\n// schedule: 0,15,20,45 5-22 * * *\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst result = await exec(`pmset -g batt`)\r\n\r\nconst charge = 1 * result.stdout.match(/(\\d+)\\%/)[1]\r\nconst state = result.stdout.match(/(discharging|charging)/)[0]\r\nconst source = result.stdout.match(/(Battery Power|AC Power)/)[0]\r\n\r\nif(charge > 80 && source == 'AC Power' ) {\r\n    notify(`UNPLUG! The laptop is ${state} from ${source}, at ${charge}%`)\r\n} else if (charge < 40 && source == 'Battery Power') {\r\n    notify(`PLUG-IN! The laptop is ${state} from ${source}, at ${charge}%`)\r\n} else {\r\n   // notify(`The laptop is ${state} from ${source}, at ${charge}%`)\r\n}\r\n```\r\n\r\n\r\n_Future plans: I have a Wemo WiFI Smart Plug on order, so if I can't stop the battery charging, I should be able to turn the charger off at the wall. ;-)_","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-02-13T19:57:14Z"},{"name":"simpsons","description":"","author":"Daniel O.","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/2836281?v=4","user":"denieler","discussion":"https://github.com/johnlindquist/kit/discussions/720","url":"","title":"New episode of Simpsons everyday","command":"new-episode-of-simpsons-everyday","content":"If you are fun of Simpsons you can get everyday a new episode 😃 \r\n\r\n```js\r\n// Name: simpsons\r\n// Description: Show next episode of Simpsons\r\n// Author: Daniel Ostapenko\r\n// Twitter: @denieler\r\n\r\nimport '@johnlindquist/kit'\r\n\r\nconst simpsonsDB = await db('simpsons', {\r\n    season: 7,\r\n    episode: 0,\r\n    episodesData: []\r\n})\r\n\r\nif (!simpsonsDB.episodesData.length) {\r\n    const wtf = await npm('wtf_wikipedia')\r\n    const doc = await wtf.fetch('List of The Simpsons episodes')\r\n    let episodes = doc.section('Episodes')\r\n    let episodesText = episodes.text()\r\n\r\n    const episodesRegexp = /episodes(\\d*) = (\\d*)/g\r\n    let episodesData = episodesText.match(episodesRegexp)\r\n\r\n    episodesData = episodesData.map(x => {\r\n        const [_season, _numberOfEpisodes] = x // episodes1 = 13\r\n            .replace('episodes', '') // '1 = 13'\r\n            .split(' = ') // ['1', '13']\r\n        \r\n        return {\r\n            season: parseInt(_season),\r\n            numberOfEpisodes: parseInt(_numberOfEpisodes)\r\n        }\r\n    })    \r\n\r\n    simpsonsDB.episodesData = episodesData\r\n    await simpsonsDB.write()\r\n}\r\n\r\nlet season = simpsonsDB.season\r\nlet episode = simpsonsDB.episode\r\n\r\nconst seasonEpisodes = simpsonsDB.episodesData.find(x => x.season === season)\r\n\r\nif (episode + 1 > seasonEpisodes.numberOfEpisodes) {\r\n    const seasonNumbers = simpsonsDB.episodesData\r\n        .map(x => x.season)\r\n    const maxSeason = seasonNumbers[seasonNumbers.length - 1]\r\n    if (season + 1 > maxSeason) {\r\n        season = 7\r\n        episode = 1\r\n    } else {\r\n        season = season + 1\r\n        episode = 1\r\n    }\r\n} else {\r\n    episode = episode + 1\r\n}\r\n\r\nsimpsonsDB.season = season\r\nsimpsonsDB.episode = episode\r\n\r\nawait simpsonsDB.write()\r\n\r\nconst episodeUrl = `https://www.wcofun.com/the-simpsons-season-${season}-episode-${episode}`\r\nbrowse(episodeUrl)\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-02-05T21:46:08Z"},{"name":"Download Chrome Video","description":"","author":"John Lindquist","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","discussion":"https://github.com/johnlindquist/kit/discussions/718","url":"","title":"Download Chrome Video","command":"download-chrome-video","content":"\r\n\r\nhttps://user-images.githubusercontent.com/36073/152449075-40781148-9ad5-4b0e-a650-01d8d9b41d69.mp4\r\n\r\n\r\n\r\n\r\n[Open download-chrome-video in Script Kit](https://scriptkit.com/api/new?name=download-chrome-video&url=https://gist.githubusercontent.com/johnlindquist/b5db801d9a318a834261914067c42790/raw/a14e0f241f39ab8c20613b08b1547c92a60400e6/download-chrome-video.ts\")\r\n\r\n```js\r\n// Name: Download Chrome Video\r\n// Description: Downloads the video of the current Chrome page\r\n// Author: John Lindquist\r\n// Twitter: @johnlindquist\r\n// REQUIRES https://formulae.brew.sh/formula/youtube-dl\r\n\r\nimport \"@johnlindquist/kit\"\r\nimport Stream from \"stream\"\r\n\r\nlet writeableStream = new Stream.Writable()\r\nwriteableStream._write = (chunk, encoding, next) => {\r\n    console.log(chunk.toString().trim())\r\n    next()\r\n}\r\n\r\ncd(await path())\r\n\r\nlet url = await getActiveTab()\r\n\r\nsetChoices(null)\r\nsetDescription(`Downloading ${url}...`)\r\nsetInput(``)\r\nsetPlaceholder(`Please wait...`)\r\n\r\nexec(`/opt/homebrew/bin/youtube-dl ${url}`, {all: true}).all.pipe(writeableStream)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-02-03T23:57:43Z"},{"name":"Homebrew Search","description":"","author":"John Lindquist","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","discussion":"https://github.com/johnlindquist/kit/discussions/716","url":"","title":"Homebrew Search and Install","command":"homebrew-search-and-install","content":"\r\n[Open homebrew in Script Kit](https://scriptkit.com/api/new?name=homebrew&url=https://gist.githubusercontent.com/johnlindquist/a83dd7c4463ac6869666108ec2c3137b/raw/0072c2e370e91ad6968f879516985f72fea92d81/homebrew.ts\")\r\n\r\n```js\r\n// Name: Homebrew Search\r\n// Description: Search and Install Homebrew Formulae\r\n// Author: John Lindquist\r\n// Twitter: @johnlindquist\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet response = await get(`https://formulae.brew.sh/api/formula.json`)\r\n\r\nlet homebrewChoices = response.data.map(({name, tap}) => {\r\n    return {\r\n        name,\r\n        value: name,\r\n        description: tap,\r\n        preview: async ()=> {\r\n            let response = await get(`https://formulae.brew.sh/api/formula/${name}.json`)\r\n            let {full_name, tap, desc, homepage, versions, urls} = response.data\r\n            return md(`## ${full_name}\r\n### ${tap}\r\n\r\n${desc}\r\n[${homepage}](${homepage})\r\n\r\n* Version - ${versions?.stable}\r\n* URLs - ${urls?.stable?.url}\r\n\r\n\r\n `)\r\n        }\r\n\r\n    }\r\n})\r\n\r\nlet formula = await arg(\"Search homebrew\", homebrewChoices)\r\n\r\nlet bins = await readdir(`/opt/homebrew/bin`)\r\n\r\nlet installed = bins.includes(formula)\r\n\r\nif(installed){\r\n    setDescription(`${formula} already installed`)\r\n}\r\n\r\nlet message = `${installed ? `Uninstall` : `Install`} ${formula}?`\r\n\r\nlet confirm = await arg(message, [\r\n    {name: `[y]es`, value: true},\r\n    {name: `[n]o`, value: false}\r\n])\r\n\r\nsetChoices(null)\r\nsetPlaceholder(`Please wait...`)\r\n\r\n\r\nif(confirm){\r\n    setDescription(`${installed ? `Uninstalling` : `Installing`} ${formula}`)\r\n    await exec(`/opt/homebrew/bin/brew ${installed ? `uninstall` : `install`} ${formula}`)\r\n}\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-02-02T20:06:28Z"},{"name":"Heroku Status","description":"","author":"Jacob Swain","twitter":"jacobswain","avatar":"https://avatars.githubusercontent.com/u/1879320?u=072338233a3b35207379493f17593a09a77548c8&v=4","user":"jacobswain","discussion":"https://github.com/johnlindquist/kit/discussions/712","url":"","title":"Heroku Status","command":"heroku-status","content":"## Display the details and status of Heroku Apps. \r\n\r\nInstall [heroku-status](\r\nhttps://scriptkit.com/api/new?name=heroku-status&url=https://gist.githubusercontent.com/jacobswain/967b469fa164ad4ba5e97669a8e1f007/raw/978ac0f82b367fd5619628b253bd3822d3bb507f/heroku-status.js\r\n)\r\n\r\n\r\n### Generate a Heroku API Key: \r\n\r\n- Install the [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli#download-and-install) \r\n- Run `heroku login`\r\n- Run `heroku authorizations:create`\r\n- Enter the token into [ScriptKit](https://www.scriptkit.com/) when prompted\r\n\r\n### Script\r\n\r\n```javascript \r\n// Name: Heroku Status\r\n// Description: Displays the status of Heroku apps\r\n// Author: Jacob  Swain\r\n// Twitter: @jacobswain\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst Heroku = await npm(\"heroku-client\");\r\nlet token = await env(\"HEROKU_API_TOKEN\");\r\n\r\nconst heroku = new Heroku({ token });\r\n\r\nconst preview = ({ name, stack, web_url, git_url, updated_at, status }) =>\r\n  md(`\r\n## ${name}\r\n- Updated: ${updated_at}\r\n- Status: ${status}  \r\n- Stack: ${stack}\r\n\r\n### Links\r\n${git_url ? `- [git](${git_url})` : \"\"}\r\n${web_url ? `- [web](${web_url})` : \"\"}\r\n    `);\r\n\r\nconst byDateDesc = (a, b) => {\r\n  if (a.created_at < b.created_at) {\r\n    return 1;\r\n  }\r\n  if (a.created_at > b.created_at) {\r\n    return -1;\r\n  }\r\n  return 0;\r\n};\r\n\r\nconst apps = await heroku.get(\"/apps\").then((apps) =>\r\n  apps.map(({ id, name, web_url, git_url, updated_at }) => ({\r\n    name,\r\n    description: web_url,\r\n    value: `https://dashboard.heroku.com/apps/${name}`,\r\n    preview: async () => {\r\n      const setups = await heroku\r\n        .get(`/apps/${id}/builds`)\r\n        .then((builds) => builds.sort(byDateDesc));\r\n\r\n      if (!setups || !setups.length) return md(`No builds found`);\r\n\r\n      return preview({ ...setups[0], name, web_url, git_url });\r\n    },\r\n  }))\r\n);\r\n\r\nlet url = await arg(\"Select Heroku App:\", apps);\r\n\r\nawait $`open ${url}`;\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-30T21:04:15Z"},{"menu":"Hex Elixir Package Search","description":"","author":"Joe Martinez","twitter":"capitalist","originalAuthor":"Jacob A. Swain","originalTwitter":"@jacobswain","avatar":"https://avatars.githubusercontent.com/u/1639?v=4","user":"capitalist","discussion":"https://github.com/johnlindquist/kit/discussions/709","url":"","title":"Hex Elixir Package Search","command":"hex-elixir-package-search","content":"I modified Jacob Swain's NPM Search to search for elixir packages on Hex. I'm not sure the proper way to do that attributution so I added `OriginalAuthor`\r\n\r\n```js\r\n// Menu: Hex Elixir Package Search\r\n// Description: Search Hex for Elixir packages\r\n// Author: Joe Martinez\r\n// Twitter: @capitalist\r\n// I based this script on the NPM search done by Jacob Swain\r\n// OriginalAuthor: Jacob A. Swain\r\n// OriginalTwitter: @jacobswain\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst baseUrl = \"https://hex.pm/api/packages?sort=downloads&search=\";\r\nconst toData = (res) => res.data;\r\n\r\nconst term = await arg(\"Package name:\");\r\n\r\nlet preview = async ({ name, description, version, links }) =>\r\n  await md(`\r\n  ## ${name}\r\n  - Description: ${description}  \r\n  - Version: ${version}  \r\n\r\n  #### Links\r\n  ${links.docs ? `- [Docs](${links.docs})` : \"\"}\r\n  ${links.Changelog ? `- [Changelog](${links.Changelog})` : \"\"}\r\n  ${links.GitHub ? `- [GitHub](${links.GitHub})` : \"\"}\r\n`);\r\n\r\nconst results = await get(`${baseUrl}${term}`)\r\n  .then(toData)\r\n  .then((results) =>\r\n    results.map(({ name, meta, latest_version, html_url, docs_html_url }) => ({\r\n      name,\r\n      description: meta.description,\r\n      value: html_url,\r\n      preview: async () =>\r\n        preview({\r\n          name,\r\n          description: meta.description,\r\n          version: latest_version,\r\n          links: { docs: docs_html_url, ...meta.links },\r\n        }),\r\n    }))\r\n  );\r\n\r\nlet url = await arg(\"Select package:\", results);\r\n\r\nawait $`open ${url}`;\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-30T14:13:47Z"},{"menu":"NPM Search","description":"","author":"Jacob Swain","twitter":"jacobswain","email":"jacobswain@gmail.com","avatar":"https://avatars.githubusercontent.com/u/1879320?u=072338233a3b35207379493f17593a09a77548c8&v=4","user":"jacobswain","discussion":"https://github.com/johnlindquist/kit/discussions/707","url":"https://gist.githubusercontent.com/jacobswain/5f111af4d0d2684d4873702340b4f42a/raw/9abb698673b9ed68399014fcda0f5436f2f26fa6/search-npm.js","title":"NPM Search Script with Preview","command":"npm-search-script-with-preview","content":"Here's a script to display search results from [npm](https://www.npmjs.com/) along with a preview of the package details and associated links. \r\n\r\n[Install search-npm](https://scriptkit.com/api/new?name=search-npm&url=https://gist.githubusercontent.com/jacobswain/5f111af4d0d2684d4873702340b4f42a/raw/9abb698673b9ed68399014fcda0f5436f2f26fa6/search-npm.js)\r\n\r\n\r\n\r\n```javascript\r\n// Menu: NPM Search\r\n// Description: Search NPM for packages\r\n// Author: Jacob A. Swain\r\n// Twitter: @jacobswain\r\n// Email: jacobswain@gmail.com\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst baseUrl = \"https://www.npmjs.com/search/suggestions?q=\";\r\nconst toData = (res) => res.data;\r\n\r\nconst term = await arg(\"Package name:\");\r\n\r\nlet preview = async ({ name, description, version, links }) =>\r\n  await md(`\r\n  ## ${name}\r\n  - Description: ${description}  \r\n  - Version: ${version}  \r\n\r\n  #### Links\r\n  ${links.npm ? `- [npm](${links.npm})` : \"\"}\r\n  ${links.repository ? `- [repository](${links.repository})` : \"\"}\r\n  ${links.repository ? `- [homepage](${links.homepage})` : \"\"}\r\n`);\r\n\r\nconst results = await get(`${baseUrl}${term}`)\r\n  .then(toData)\r\n  .then((results) =>\r\n    results.map(({ name, description, version, links }) => ({\r\n      name,\r\n      description,\r\n      value: links.npm,\r\n      preview: async () => preview({ name, description, version, links }),\r\n    }))\r\n  );\r\n\r\nlet url = await arg(\"Select package:\", results);\r\n\r\nawait $`open ${url}`;\r\n```\r\n\r\n\r\nHere's a screenshot:\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/1879320/151686953-66bf90b5-850d-45c9-96cf-68c688c7cd80.png)\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-30T04:46:39Z"},{"name":"Toggle Desktop Icons","author":"John Lindquist","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","discussion":"https://github.com/johnlindquist/kit/discussions/699","url":"","title":"Toggle Desktop Icons","command":"toggle-desktop-icons","content":"\r\n[Open toggle-desktop-icons in Script Kit](https://scriptkit.com/api/new?name=toggle-desktop-icons&url=https://gist.githubusercontent.com/johnlindquist/d6887def27a998c1facd9430b725f32b/raw/af1f6a97e347270f4ae49661738aaa58052bce22/toggle-desktop-icons.ts\")\r\n\r\n```js\r\n// Name: Toggle Desktop Icons\r\n// Author: John Lindquist\r\n// Twitter: @johnlindquist\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet visible = true\r\n\r\ntry{\r\n    // This command fails if icons are hidden\r\n    let {stdout} = await exec(`defaults read com.apple.finder CreateDesktop`)\r\n    visible = stdout === 1\r\n}catch{}\r\n\r\nlet command = `defaults ${visible ? \"write\" : \"delete\"} com.apple.finder CreateDesktop ${visible ? \"-bool FALSE\" : \"\"};killall Finder`\r\n\r\nawait exec(command)\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-26T15:25:27Z"},{"shortcut":"command option b","menu":"Bible Search 🔍","description":"","author":"PRAMOD A JINGADE","twitter":"avj2352","avatar":"https://avatars.githubusercontent.com/u/6997529?u=3d91e8ea523b78a844f1f3974975b34684e4bc05&v=4","user":"avj2352","discussion":"https://github.com/johnlindquist/kit/discussions/698","url":"","title":"Search Scriptures from the Bible","command":"search-scriptures-from-the-bible","content":"Use Bible API to search for a scripture and copy it to clipboard\r\n\r\n```javascript\r\n// Shortcut: command option b\r\n// Menu: Bible Search 🔍\r\n// Description: 📖 Launch scripture based on input book, chapter, verse\r\n// Author: Pramod Jingade\r\n// Twitter: @avj2352\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\n/**\r\n * Bible API key credentials.\r\n */\r\nconst bibleAPIHeaders = {\r\n    'x-rapidapi-host': 'ajith-holy-bible.p.rapidapi.com',\r\n    'x-rapidapi-key': '08fb250872msh61199006cfd5075p1455c9jsn3e783f6773e5'\r\n};\r\n\r\n/**\r\n * Async API call to fetch bible Verse\r\n * @param {*} verses \r\n * @returns \r\n */\r\nasync function getBibleVerse(book, chapter, verse) {\r\n    const query = `https://ajith-holy-bible.p.rapidapi.com/GetVerseOfaChapter?Book=${book}&Chapter=${chapter}&Verse=${verse}`;\r\n    return await get(query, {\r\n        headers: {\r\n            ...bibleAPIHeaders\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Function to validate verses\r\n * @param {string} verses \r\n * @returns [] numbers\r\n */\r\nfunction parseVerses(verses) {\r\n    if (Boolean(verses) && verses.includes('-')) {\r\n        const list = [];\r\n        const lowEnd = Number(verses.split('-')[0]);\r\n        const highEnd = Number(verses.split('-')[1]);\r\n        for (let i = lowEnd; i <= highEnd; i++) {\r\n            list.push(i);\r\n        }\r\n        return list;\r\n    } else if (Boolean(verses) && verses.includes(',')) {\r\n        const list = verses.split(',').map(item => Number(item));\r\n        return list;\r\n    } else if (Boolean(verses)) {\r\n        return [Number(verses)];\r\n    } else {\r\n        throw new Error;\r\n    }\r\n}\r\n\r\n/**\r\n * Function to validate input string\r\n * @param {string} input\r\n * @returns [{chapter: string, verse: string}]\r\n */\r\nfunction parseScripture(input) {\r\n    // Validate edge cases\r\n    const text = input.trim();\r\n    if (text === '') throw new Error;\r\n    else if (!text.includes(':')) throw new Error;\r\n    let chapter = text.split(':')[0];\r\n    const verses = text.split(':')[1];\r\n    if (!chapter || !verses || chapter === ' ' || verses === '') throw new Error;\r\n    // Parse Verses\r\n    chapter = Number(chapter);\r\n    const verseList = parseVerses(verses);\r\n    // return object\r\n    if (Boolean(verseList.length > 0)) {\r\n        return verseList.map(item => ({\r\n            chapter,\r\n            verse: item\r\n        }));\r\n    } else return [];\r\n}\r\n\r\n/**\r\n * Return a list of scripture response with End Search or Copy to clipboard option\r\n * @param {string} book \r\n * @param {Object} versObj \r\n * @param {string} chapterVerseString \r\n * @returns [{name, description, preview, value}]\r\n */\r\nasync function getScriptureResponseList(book, versObj, chapterVerseString) {\r\n    // Promise.all(apiCallList).then(response => inspect(response));\r\n    // doesn't work\r\n    // inspect(versObj);\r\n    let textList = [];\r\n    for (let i = 0; i < versObj.length; i++) {\r\n        const api = await getBibleVerse(book, versObj[i].chapter, versObj[i].verse);\r\n        textList.push(`${versObj[i].verse}.${api.data.Output}`);\r\n    }\r\n    const textString = textList.join('\\n');\r\n    return [{\r\n            name: `${book} ${chapterVerseString}`,\r\n            description: `${textString.substring(0,100)}...`,\r\n            preview: textString,\r\n            value: `# ${book} ${chapterVerseString}\\n\\n${textString}`\r\n        },        \r\n        {\r\n            name: `End Search ?`,\r\n            description: ``,\r\n            value: 'n'\r\n        }\r\n    ];\r\n}\r\n\r\n/**\r\n * Main Function\r\n * Repeatedly execute\r\n */\r\nwhile (true) {\r\n    try {\r\n        const book = await arg(\"Which Book?\", prepBookList());\r\n        const chapterVerseString = await arg(\"Enter chapter verse [ch:verse]\");\r\n        if (chapterVerseString === '') throw new Error;\r\n        // get scripture verseinput list\r\n        const versObj = parseScripture(chapterVerseString);\r\n        // call api and get bible text\r\n        const textResponse = await arg(\r\n                        `Scripture (NIV)...`, await getScriptureResponseList(book, versObj, chapterVerseString));\r\n        if (textResponse === \"n\") break;        \r\n        else copy(textResponse);\r\n    } catch (err) {\r\n        const yesOrNo = await arg(`📖 Unable to find scripture, try again [y/n]?`);\r\n        if (yesOrNo !== \"y\") break;\r\n    }\r\n}\r\n\r\n/**\r\n * Prepopulate Books in the Bible: 66 books\r\n * @returns [{name: Book, value: Book description, with API book param value}]\r\n */\r\nfunction prepBookList() {\r\n    return [{\r\n            name: \"📜 Genesis\",\r\n            description: `Old Testament - Frist book of the Pentateuch. \r\n                          Describes the creation; history of the old world`,\r\n            value: \"Genesis\"\r\n        },\r\n        {\r\n            name: \"📜 Exodus\",\r\n            description: `Old Testament - Second book of the Pentateuch. \r\n                          Israel's departure from Egypt; the giving of the law; the tabernacle.`,\r\n            value: \"Exodus\"\r\n        },\r\n        {\r\n            name: \"📜 Leviticus\",\r\n            description: `Old Testament - Third book of the Pentateuch.\r\n                          The ceremonial law.`,\r\n            value: \"Leviticus\"\r\n        },\r\n        {\r\n            name: \"📜 Numbers\",\r\n            description: `Old Testament - Fourth book of the Pentateuch.\r\n                          The census of the people; the story of the wanderings in the wilderness.`,\r\n            value: \"Numbers\"\r\n        },\r\n        {\r\n            name: \"📜 Deuteronomy\",\r\n            description: `Old Testament - Fifth book of the Pentateuch.\r\n                          The law rehearsed; the death of Moses.`,\r\n            value: \"Deuteronomy\"\r\n        },\r\n        {\r\n            name: \"📜 Joshua\",\r\n            description: `Old Testament - The story of the conquest and partition of Canaan.`,\r\n            value: \"Joshua\"\r\n        },\r\n        {\r\n            name: \"📜 Judges\",\r\n            description: `Old Testament - The history of the nation from Joshua to Samson.`,\r\n            value: \"Judges\"\r\n        },\r\n        {\r\n            name: \"📜 Ruth\",\r\n            description: `Old Testament - The story of the ancestors of the royal family of Judah.`,\r\n            value: \"Ruth\"\r\n        },\r\n        {\r\n            name: \"📜 1 Samuel\",\r\n            description: `Old Testament - The story of the nation during the \r\n                            judgeship of Samuel and the reign of Saul.`,\r\n            value: \"1 Samuel\"\r\n        },\r\n        {\r\n            name: \"📜 2 Samuel\",\r\n            description: `Old Testament - Story of the reign of David.`,\r\n            value: \"2 Samuel\"\r\n        },\r\n        {\r\n            name: \"📜 1 Kings\",\r\n            description: `Old Testament - exclusive of the reigns of Saul and David.`,\r\n            value: \"1 Kings\"\r\n        },\r\n        {\r\n            name: \"📜 2 Kings\",\r\n            description: `Old Testament - they comprehend the whole time of the Israelitish monarchy.`,\r\n            value: \"2 Kings\"\r\n        },\r\n        {\r\n            name: \"📜 1 Chronicles\",\r\n            description: `Old Testament - they are the official histories of the kingdoms of Judah & Israel.`,\r\n            value: \"1 Chronicles\"\r\n        },\r\n        {\r\n            name: \"📜 2 Chronicles\",\r\n            description: `Old Testament - they are the official histories of the kingdoms of Judah & Israel.`,\r\n            value: \"2 Chronicles\"\r\n        },\r\n        {\r\n            name: \"📜 Ezra\",\r\n            description: `Old Testament - The story of the return of the Jews from the Babylonish captivity, \r\n                            and of the rebuilding of the temple.`,\r\n            value: \"Ezra\"\r\n        },\r\n        {\r\n            name: \"📜 Nehemiah\",\r\n            description: `Old Testament - A further account of the rebuilding of the temple and city, \r\n                            and of the obstacles encountered and overcome.`,\r\n            value: \"Nehemiah\"\r\n        },\r\n        {\r\n            name: \"📜 Esther\",\r\n            description: `Old Testament - The story of a Jewess who becomes queen of Persia.`,\r\n            value: \"Esther\"\r\n        },\r\n        {\r\n            name: \"📜 Job\",\r\n            description: `Old Testament - The story of the trials and patience of a holy man of Edom.`,\r\n            value: \"Job\"\r\n        },\r\n        {\r\n            name: \"📜 Psalms\",\r\n            description: `Old Testament - A collection of sacred poems intended \r\n                            for use in the worship of Jehovah. \r\n                            Chiefly the productions of David.`,\r\n            value: \"Psalms\"\r\n        },\r\n        {\r\n            name: \"📜 Proverbs\",\r\n            description: `Old Testament - The wise sayings of Solomon.`,\r\n            value: \"Proverbs\"\r\n        },\r\n        {\r\n            name: \"📜 Ecclesiastes\",\r\n            description: `Old Testament - A poem respecting the vanity of earthly things.`,\r\n            value: \"Ecclesiastes\"\r\n        },\r\n        {\r\n            name: \"📜 Song of Solomon\",\r\n            description: `Old Testament - An allegory relating to the church.`,\r\n            value: \"Song of Solomon\"\r\n        },\r\n        {\r\n            name: \"📜 Isaiah\",\r\n            description: `Old Testament - Prophecies respecting Christ and his kingdom.`,\r\n            value: \"Isaiah\"\r\n        },\r\n        {\r\n            name: \"📜 Jeremiah\",\r\n            description: `Old Testament - Prophecies announcing the captivity of Judah, its sufferings, \r\n                            and the final overthrow of its enemies.`,\r\n            value: \"Jeremiah\"\r\n        },\r\n        {\r\n            name: \"📜 Lamentations\",\r\n            description: `Old Testament - The utterance of Jeremiah's sorrow upon the capture of \r\n                            Jerusalem and the destruction of the temple.`,\r\n            value: \"Lamentations\"\r\n        },\r\n        {\r\n            name: \"📜 Ezekiel\",\r\n            description: `Old Testament - Messages of warning and comfort to the Jews in their captivity.`,\r\n            value: \"Ezekiel\"\r\n        },\r\n        {\r\n            name: \"📜 Daniel\",\r\n            description: `Old Testament - A narrative of some of the occurrences of \r\n                            the captivity, and a series of prophecies concerning Christ.`,\r\n            value: \"Daniel\"\r\n        },\r\n        {\r\n            name: \"📜 Hosea\",\r\n            description: `Old Testament - Prophecies relating to Christ and the latter days.`,\r\n            value: \"Hosea\"\r\n        },\r\n        {\r\n            name: \"📜 Joel\",\r\n            description: `Old Testament - Prediction of woes upon Judah,`,\r\n            value: \"Joel\"\r\n        },\r\n        {\r\n            name: \"📜 Amos\",\r\n            description: `Old Testament - Prediction that Israel and other neighboring \r\n                        nations will be punished by conquerors from the north`,\r\n            value: \"Amos\"\r\n        },\r\n        {\r\n            name: \"📜 Obadiah\",\r\n            description: `Old Testament - Prediction of the desolation of Edom.`,\r\n            value: \"Obadiah\"\r\n        },\r\n        {\r\n            name: \"📜 Jonah\",\r\n            description: `Old Testament - Prophecies relating to Nineveh.`,\r\n            value: \"Jonah\"\r\n        },\r\n        {\r\n            name: \"📜 Micah\",\r\n            description: `Old Testament - Predictions relating to the invasions of \r\n                            Shalmaneser and Sennacherib, the Babylonish captivity.`,\r\n            value: \"Micah\"\r\n        },\r\n        {\r\n            name: \"📜 Nahum\",\r\n            description: `Old Testament - Prediction of the downfall of Assyria.`,\r\n            value: \"Nahum\"\r\n        },\r\n        {\r\n            name: \"📜 Habakkuk\",\r\n            description: `Old Testament - A prediction of the doom of the Chaldeans.`,\r\n            value: \"Habakkuk\"\r\n        },\r\n        {\r\n            name: \"📜 Zephaniah\",\r\n            description: `Old Testament - A prediction of the overthrow of Judah for \r\n                            its idolatry and wickedness.`,\r\n            value: \"Zephaniah\"\r\n        },\r\n        {\r\n            name: \"📜 Haggai\",\r\n            description: `Old Testament - Prophecies concerning the rebuilding of the temple.`,\r\n            value: \"Haggai\"\r\n        },\r\n        {\r\n            name: \"📜 Zechariah\",\r\n            description: `Old Testament - Prophecies relating to the rebuilding of the temple and the Messiah.`,\r\n            value: \"Zechariah\"\r\n        },\r\n        {\r\n            name: \"📜 Malachi\",\r\n            description: `Old Testament - Prophecies relating to the calling of the Gentiles \r\n                                and the coming of Christ.`,\r\n            value: \"Malachi\"\r\n        },\r\n        {\r\n            name: \"📜 Matthew\",\r\n            description: `New Testament - First of the four gospels, A brief history of the life of Christ.`,\r\n            value: \"Matthew\"\r\n        },\r\n        {\r\n            name: \"📜 Mark\",\r\n            description: `New Testament - Second of the four gospels, incluses incidents omitted by St. Matthew.`,\r\n            value: \"Mark\"\r\n        },\r\n        {\r\n            name: \"📜 Luke\",\r\n            description: `New Testament - Third of the four gospels, especial reference \r\n                        to His most important acts and discourses.`,\r\n            value: \"Luke\"\r\n        },\r\n        {\r\n            name: \"📜 John\",\r\n            description: `New Testament - Fourth of the four gospels, The life of Christ, \r\n                            giving important discourses not related by the other evangelists.`,\r\n            value: \"John\"\r\n        },\r\n        {\r\n            name: \"📜 Acts (of the Apostles)\",\r\n            description: `New Testament - The history of the labors of the apostles and \r\n                                of the foundation of the Christian Church.`,\r\n            value: \"Acts\"\r\n        },\r\n        {\r\n            name: \"📜 Romans\",\r\n            description: `New Testament - A treatise by St. Paul on the doctrine of justification by Christ.`,\r\n            value: \"Romans\"\r\n        },\r\n        {\r\n            name: \"📜 1 Corinthians\",\r\n            description: `New Testament - A letter from St. Paul to the Corinthians, correcting \r\n                                errors into which they had fallen.`,\r\n            value: \"1 Corinthians\"\r\n        },\r\n        {\r\n            name: \"📜 2 Corinthians\",\r\n            description: `New Testament - St. Paul confirms his disciples in their faith, \r\n                                and vindicates his own character.`,\r\n            value: \"2 Corinthians\"\r\n        },\r\n        {\r\n            name: \"📜 Galatians\",\r\n            description: `New Testament - St. Paul maintains that we are justified by faith, and not by rites.`,\r\n            value: \"Galatians\"\r\n        },\r\n        {\r\n            name: \"📜 Ephesians\",\r\n            description: `New Testament - A treatise by St. Paul on the power of divine grace.`,\r\n            value: \"Ephesians\"\r\n        },\r\n        {\r\n            name: \"📜 Philippians\",\r\n            description: `New Testament - St. Paul sets forth the beauty of Christian kindness.`,\r\n            value: \"Philippians\"\r\n        },\r\n        {\r\n            name: \"📜 Colossians\",\r\n            description: `New Testament - St. Paul warns his disciples against errors, and exhorts to certain duties.`,\r\n            value: \"Colossians\"\r\n        },\r\n        {\r\n            name: \"📜 1 Thessalonians\",\r\n            description: `New Testament - St. Paul exhorts his disciples to continue in \r\n                            the faith and in holy conversation.`,\r\n            value: \"1 Thessalonians\"\r\n        },\r\n        {\r\n            name: \"📜 2 Thessalonians\",\r\n            description: `New Testament - St. Paul corrects an error concerning the speedy \r\n                            coming of Christ the second time.`,\r\n            value: \"2 Thessalonians\"\r\n        },\r\n        {\r\n            name: \"📜 1 Timothy\",\r\n            description: `New Testament - St. Paul instructs Timothy in the duty of a pastor, \r\n                            and encourages him in the work of the ministry.`,\r\n            value: \"1 Timothy\"\r\n        },\r\n        {\r\n            name: \"📜 2 Timothy\",\r\n            description: `New Testament - St. Paul instructs Timothy in the duty of a pastor, \r\n                            and encourages him in the work of the ministry.`,\r\n            value: \"2 Timothy\"\r\n        },\r\n        {\r\n            name: \"📜 Titus\",\r\n            description: `New Testament - Epistle to Titus. St. Paul encourages Titus in the \r\n                            performance of his ministerial duties.`,\r\n            value: \"Titus\"\r\n        },\r\n        {\r\n            name: \"📜 Philemon\",\r\n            description: `New Testament - An appeal to a converted master to receive a converted \r\n                            escaped slave with kindness.`,\r\n            value: \"Philemon\"\r\n        },\r\n        {\r\n            name: \"📜 Hebrews\",\r\n            description: `New Testament - St. Paul maintains that Christ is the substance of the ceremonial law.`,\r\n            value: \"Hebrews\"\r\n        },\r\n        {\r\n            name: \"📜 James\",\r\n            description: `New Testament - A treatise on the efficacy of faith united with good works.`,\r\n            value: \"James\"\r\n        },\r\n        {\r\n            name: \"📜 1 Peter\",\r\n            description: `New Testament - Exhortations to a Christian life, with various warnings and predictions.`,\r\n            value: \"1 Peter\"\r\n        },\r\n        {\r\n            name: \"📜 2 Peter\",\r\n            description: `New Testament - Exhortations to a Christian life, with various warnings and predictions.`,\r\n            value: \"2 Peter\"\r\n        },\r\n        {\r\n            name: \"📜 1 John\",\r\n            description: `New Testament - Respecting the person of our Lord, and an \r\n                            exhortation to Christian love and conduct.`,\r\n            value: \"1 John\"\r\n        },\r\n        {\r\n            name: \"📜 2 John\",\r\n            description: `New Testament - St. John warns a converted lady against false teachers.`,\r\n            value: \"2 John\"\r\n        },\r\n        {\r\n            name: \"📜 3 John\",\r\n            description: `New Testament - A letter to Gaius, praising him for his hospitality.`,\r\n            value: \"3 John\"\r\n        },\r\n        {\r\n            name: \"📜 Jude\",\r\n            description: `New Testament - Epistle of St. Jude.\r\n                          Warnings against deceivers.`,\r\n            value: \"Jude\"\r\n        },\r\n        {\r\n            name: \"📜 Revelation\",\r\n            description: `New Testament - Final book in the Bible.\r\n                          The future of the Church foretold.`,\r\n            value: \"Revelation\"\r\n        }\r\n    ];\r\n}\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-26T06:07:41Z"},{"name":"Grab Caption","avatar":"https://avatars.githubusercontent.com/u/36073?u=1617518acc4e480c94d57308adfedebcd936ffd1&v=4","user":"johnlindquist","author":"John Lindquist","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/695","url":"","title":"Grab Captions from Disney+","command":"grab-captions-from-disney","content":"> 📝 Requires \"Allow JavaScript From Apple Events\" (see image at bottom)\r\n\r\nhttps://user-images.githubusercontent.com/36073/150913892-7fb80f2d-8ea9-4835-ad60-2bfe39f9916b.mp4\r\n\r\n\r\n[Open grab-caption in Script Kit](https://scriptkit.com/api/new?name=grab-caption&url=https://gist.githubusercontent.com/johnlindquist/b1d146e0308089002e2a48377af0e59d/raw/0697ca4ea5f67a5302279214b3dda002f9889a5c/grab-caption.ts\")\r\n\r\n```js\r\n// Name: Grab Caption\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\n// This query selector is specific to Disney plus\r\nlet js = `\r\n\r\nArray.from(document.querySelectorAll('.dss-subtitle-renderer-line')).map(el => el.innerText)\r\n\r\n`\r\n\r\nlet value = await applescript(`\r\ntell application \"Google Chrome\" to tell window 1\r\n\tset str to execute active tab javascript \"${js}\"\r\n\treturn str\r\nend tell\r\n`)\r\n\r\nawait div(md(`## ${value}`))\r\n\r\n// To copy to clipboard, use:\r\n// copy(value)\r\n```\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/36073/150914006-5f64c3e1-194a-48aa-807e-1c8370044c1f.png)\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-25T05:02:03Z"},{"name":"What time is it","description":"","author":"Francois","github":"fbuys","avatar":"https://avatars.githubusercontent.com/u/3785596?u=efa47d357ee33acea7c5abeec5d1d88713c5a773&v=4","user":"fbuys","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/694","url":"","title":"What time is it","command":"what-time-is-it","content":"Here is my very first kit script.\r\n\r\nI made it in less than an hour.\r\n\r\nAny improvement ideas will be greatly appreciated.\r\n\r\n```\r\n// Name: What time is it\r\n// Description: View current time in a few timezones that I care about\r\n// Author: Francois Buys\r\n// Github: fbuys\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet estTime = await get(\"https://timeapi.io/api/Time/current/zone?timeZone=America/New_York\")\r\nlet baTime = await get(\"https://timeapi.io/api/Time/current/zone?timeZone=America/Argentina/Buenos_Aires\")\r\nlet brTime = await get(\"https://timeapi.io/api/Time/current/zone?timeZone=America/Sao_Paulo\")\r\n\r\nlet { format } = await npm(\"date-fns\")\r\n\r\nconst formatString = \"eeee, h:mm aaa\"\r\nconst local = format(new Date(), formatString)\r\nconst est = format(new Date(estTime.data[\"dateTime\"]), formatString)\r\nconst ba = format(new Date(baTime.data[\"dateTime\"]), formatString)\r\nconst br = format(new Date(brTime.data[\"dateTime\"]), formatString)\r\n\r\nawait div(`\r\n  <p>🇿🇦    &nbsp; My Time is <strong>${local}</strong></p>\r\n  <p>🇺🇸    &nbsp; Time in EST zone is <strong>${est}</strong></p>\r\n  <p>🇦🇷    &nbsp; Time in Argentina is <strong>${ba}</strong></p>\r\n  <p>🇧🇷    &nbsp; Time in Brazil is <strong>${br}</strong></p>\r\n`, 'p-10')\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-21T21:11:23Z"},{"name":"Gitlab","menu":"Gitlab Boilerplate Repository","description":"","shortcut":"command option g","author":"Joël Grimberg","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/2995294?u=b757330296df6c0482bedf7d8000adaab4a24894&v=4","user":"joelgrimberg","discussion":"https://github.com/johnlindquist/kit/discussions/692","url":"https://gist.githubusercontent.com/joelgrimberg/4839ac89860519d965eebeaf1b798e94/raw/66c618730a8c238d66058d574eaae1e157c0d206/boilerplate-gitlab.js","title":"Create Gitlab Boilerplate Repository","command":"create-gitlab-boilerplate-repository","content":"[Open boilerplate-gitlab in Script Kit](https://scriptkit.com/api/new?name=boilerplate-gitlab&url=https://gist.githubusercontent.com/joelgrimberg/4839ac89860519d965eebeaf1b798e94/raw/66c618730a8c238d66058d574eaae1e157c0d206/boilerplate-gitlab.js\")\r\n\r\n```js\r\n// Name: Gitlab\r\n// Menu: Gitlab Boilerplate Repository\r\n// Description: Create a new Gitlab repository\r\n// Shortcut: command option g\r\n// Author: Joël Grimberg\r\n// Twitter: @joelgrimberg\r\n\r\nimport \"@johnlindquist/kit\";\r\nimport fs from \"fs\";\r\n\r\nconst filenamify = await npm(\"filenamify\");\r\n/** @type {typeof import(\"filenamify\")} */\r\n\r\nconst GITLAB_USER = await env(\r\n  \"GITLAB_USER\",\r\n  \"please enter your Gitlab username\"\r\n);\r\n\r\nconst GITLAB_AUTH_TOKEN = await env(\r\n  \"GITLAB_AUTH_TOKEN\",\r\n  \"please enter your Gitlab Auth token\"\r\n);\r\n\r\nconst GITLAB_BOILERPLATE_FOLDER = await env(\r\n  \"gitlabBoilerplateFolder\",\r\n  \"please enter the location you want to save your boilerplate folder\"\r\n);\r\n\r\nconst NPM_AUTHOR_NAME = await env(\r\n  \"NPM_AUTHOR_NAME\",\r\n  \"please enter your NPM author name\"\r\n);\r\n\r\nconst boilerplateProject = await arg({\r\n  pleaceholder: \"please enter the name of your project\",\r\n  hint: \"name of repository\",\r\n});\r\n\r\nconst project = filenamify(boilerplateProject);\r\n\r\nconst boilerplateDescription = await arg({\r\n  placeholder: `project description`,\r\n  hint: \"a description oneliner\",\r\n});\r\n\r\nconst pwd = `${GITLAB_BOILERPLATE_FOLDER}/${project}`;\r\n//TODO\r\nfs.mkdirSync(pwd);\r\ncd(pwd);\r\n\r\nawait $`npm init -y -init-author-name='${NPM_AUTHOR_NAME}'`;\r\n\r\nawait $`git init`;\r\n\r\nawait $`echo \"/node_modules\" > .gitignore`;\r\n\r\nawait $`npm install cypress --save-dev`;\r\n\r\nawait $`echo '\r\n  <h1 align=\"center\"><a href=\"https://blog.joelgrimberg.dev\">🚀 ${project}</a></h1>' > README.md`;\r\n\r\nawait $`git add .`;\r\n\r\nawait $`git commit -m 'initial commit'`;\r\n\r\nawait $`git remote add origin git@gitlab.com:${GITLAB_USER}/${project}.git`;\r\n\r\nawait $`curl --silent --header \"PRIVATE-TOKEN: ${GITLAB_AUTH_TOKEN}\" \\\r\n-XPOST \"https://gitlab.com/api/v4/projects?name=${project}&visibility=private&initialize_with_readme=false\" | jq '.id'`;\r\n\r\nawait $`git push --set-upstream origin main`;\r\n\r\nedit(`README.md`, pwd);\r\nbrowse(`https://gitlab.com/${GITLAB_USER}/${project}`);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-20T19:02:33Z"},{"menu":"Boilerplate repository","description":"","shortcut":"command option control b","author":"Joël Grimberg","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/2995294?u=b757330296df6c0482bedf7d8000adaab4a24894&v=4","user":"joelgrimberg","discussion":"https://github.com/johnlindquist/kit/discussions/690","url":"https://gist.github.com/joelgrimberg/c70d8c1272b0384d8c7501642e098cc7/boilerplate.js","title":"Create a Boilerplate Github Repository","command":"create-a-boilerplate-github-repository","content":"I just created my first script with ScriptKit.\r\nThis script boilerplates a repo and pushes it to my GitHub account.\r\n\r\n[Open Boilerplate Repo in Script Kit](https://scriptkit.com/api/new?name=fade-video-clip&url=https://gist.github.com/joelgrimberg/c70d8c1272b0384d8c7501642e098cc7/boilerplate.js)\r\n\r\n\r\n\r\nthis is my 0.1 version, so still iterating.\r\n\r\n``` javascript\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Menu: Boilerplate repository\r\n// Description: Create a new github repository\r\n// Shortcut: command option control b\r\n// Author: Joël Grimberg\r\n// Twitter: @joelgrimberg\r\n\r\nimport fs from \"fs\";\r\nconst open = await npm(\"open\");\r\n\r\nconst { Octokit } = await npm(\"@octokit/rest\");\r\nconst simpleGit = await npm(\"simple-git\");\r\n\r\nconst boilerplateFolder = await env(\r\n  \"BOILERPLATE_DIR\",\r\n  `What's the path to the boilerplate directory on this machine?`\r\n);\r\n\r\nconst githubAuthToken = await env(\r\n  \"githubAuthToken\",\r\n  `Please enter the GitHub token`\r\n);\r\n\r\nconst octokit = new Octokit({\r\n  auth: githubAuthToken,\r\n});\r\n\r\nconst project = await arg({\r\n  placeholder: `What is the name of the project?`,\r\n  hint: \"repo-name\",\r\n  ignoreBlur: true,\r\n});\r\n\r\nconst description = await arg({\r\n  placeholder: `What is the description of the project?`,\r\n  hint: \"description\",\r\n  ignoreBlur: true,\r\n});\r\n\r\noctokit.rest.repos.createForAuthenticatedUser({\r\n  name: project,\r\n});\r\n\r\nif (!fs.existsSync(boilerplateFolder)) {\r\n  fs.mkdirSync(boilerplateFolder);\r\n}\r\n\r\nconst pwd = `${boilerplateFolder}/${project}`;\r\nfs.mkdirSync(pwd);\r\n\r\nconst options = {\r\n  baseDir: pwd,\r\n  binary: \"git\",\r\n  maxConcurrentProcesses: 6,\r\n};\r\n\r\nconst git = simpleGit(options);\r\n\r\nawait git\r\n  .init()\r\n  .addRemote(\"origin\", `git@github.com:joelgrimberg/${project}.git`);\r\n\r\nawait $`cd ${pwd} && npm init -y -init-author-name='Joël Grimberg <joel@joelgrimberg.nl> (https://blog.joelgrimberg.dev)'`;\r\n\r\nawait $`cd ${pwd} && npm install cypress --save-dev`;\r\n\r\nawait $`cd ${pwd} && echo '\r\n  <h1 align=\"center\"><a href=\"https://blog.joelgrimberg.dev\">🚀 ${project}</a></h1>' > README.md`;\r\n\r\nawait $`cd ${pwd} && echo -n \"## ${description}\" >> README.md`;\r\n\r\nawait $`echo \"node_modules/\" > ${pwd}/.gitignore`;\r\n\r\nawait git.add(\".\").commit(\"initial commit\");\r\nawait $`cd ${pwd} && git push --set-upstream origin main`;\r\n\r\nedit(`${pwd}/README.md`, pwd);\r\nbrowse(`https://github.com/joelgrimberg/${project}`);\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-18T10:07:26Z"},{"shortcut":"opt+9","name":"fade-video-clip","avatar":"https://avatars.githubusercontent.com/u/2262858?u=d02ad0d859aa1c3f879b70061bf7e4a4338ba150&v=4","user":"tayiorbeii","author":"Taylor Bell","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/689","url":"https://gist.githubusercontent.com/tayiorbeii/4cfa685f68a306a3ea0c036a06999bff/raw/9804598bae8f844077e237d2c9d3e54afbe442c4/fade-video-clip.js","title":"Add a fade in and fade out transitions to video file","command":"add-a-fade-in-and-fade-out-transitions-to-video-file","content":"Select a video file in Finder, hit the shortcut, and this script will create a copy of the file with fade in and fade out transitions.\r\n\r\nRequires ffmpeg to be installed locally.\r\nSet `fadeLength` to a time in seconds of your choice.\r\n\r\n[Open fade-video-clip in Script Kit](https://scriptkit.com/api/new?name=fade-video-clip&url=https://gist.githubusercontent.com/tayiorbeii/4cfa685f68a306a3ea0c036a06999bff/raw/9804598bae8f844077e237d2c9d3e54afbe442c4/fade-video-clip.js\")\r\n\r\n```js\r\n// shortcut: opt+9\r\nimport \"@johnlindquist/kit\"\r\n    \r\n// Name: fade-video-clip\r\n\r\nlet fadeLength = 1.25\r\n\r\nlet videoFile = await getSelectedFile()\r\n\r\nlet basePath = await path.basename(videoFile)\r\n\r\nlet { stdout } = await exec(`ffprobe -loglevel error -show_entries format=duration -of default=nk=1:nw=1 \"${videoFile}\"`)\r\n\r\nlet totalDuration = stdout\r\n\r\nlet offset = totalDuration - fadeLength\r\n\r\nlet editedVideo = await exec(`ffmpeg -i \"${videoFile}\" -codec:v libx264 -crf 18 -filter_complex \"[0:v]fade=type=in:duration=${fadeLength},fade=type=out:duration=${fadeLength}:start_time='${offset}'[v];[0:a]afade=type=in:duration=${fadeLength},afade=type=out:duration=${fadeLength}:start_time='${offset}'[a]\" -map \"[v]\" -map \"[a]\" \"${videoFile}_fade.mp4\"`)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-13T20:07:37Z"},{"name":"Random Video From YouTube Channel","description":"","author":"Monica Powell","twitter":"indigitalcolor","gitHub":"@m0nica","avatar":"https://avatars.githubusercontent.com/u/6998954?u=78ef436473b15f90ae2a50e64883ebf39c0c1b1d&v=4","user":"M0nica","discussion":"https://github.com/johnlindquist/kit/discussions/684","url":"","title":"Open a Random Video from a Specific YouTube Channel","command":"open-a-random-video-from-a-specific-youtube-channel","content":"\r\nI created a Script to open a random video from a specific YouTube Channel. The script prompts user for the name of the channel, uses the `scrapeSelector` to get videos from the channel and then selects a random one to open. \r\n\r\nhttps://user-images.githubusercontent.com/6998954/148695801-f5607143-265b-4fd5-aa48-de0182d36791.mov\r\n\r\n\r\n\r\nFuture enhancements: I'd like to add some error logging to help users if they enter an invalid channel name that returns a 404 or if a given channel exists but doesn't return any videos. I tried adding some console.logs but wasn't sure how to output helpful logs to ScriptKit users. \r\n\r\n```js\r\n// Name: Random Video From YouTube Channel\r\n// Description: Open a random video from a specific YouTube Channel\r\n// Author: Monica Powell\r\n// Twitter: @indigitalcolor\r\n// GitHub: @m0nica\r\n\r\n``\r\nimport \"@johnlindquist/kit\"\r\n\r\n\r\nlet channelName = await arg(\"YouTube Channel Name (e.g, yogawithadriene):\")\r\n\r\nlet videos = await scrapeSelector(\r\n    `https://www.youtube.com/c/${channelName}/videos`,\r\n    \"a#video-title\",\r\n    el => ({\r\n        name: el.innerText,\r\n        value: el.href,\r\n    })\r\n)\r\n\r\n\r\nlet randomVideo = videos[Math.floor(Math.random() * videos.length)]\r\n\r\nexec(`open \"${randomVideo.value}\"`)\r\n ```\r\n\r\nView gist: https://gist.github.com/M0nica/939bd4c3dfb2bf6fed08afb17ab16d19\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-09T18:38:37Z"},{"menu":"NASA's Astronomy Picture of the Day","description":"","author":"Asep Norzai","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/12707591?u=f068eaa4c9452be71b91f518fe630be1de423c1c&v=4","user":"Pashtunzoy","discussion":"https://github.com/johnlindquist/kit/discussions/677","url":"https://gist.githubusercontent.com/Pashtunzoy/e6cc24632eb237d3001df96c8253032d/raw/adc04ee8ccdaf4f726c1b300480da5a5bd03486e/nasa-astronomy-pic-of-the-day.js","title":"NASA's Astronomy Image Of The Day","command":"nasas-astronomy-image-of-the-day","content":"A simple script that shows you info about NASA's astronomy image of the day.\r\n\r\n[Open in ScriptKit](https://scriptkit.com/api/new?name=nasa-astronomy-pic-of-the-day&url=https://gist.githubusercontent.com/Pashtunzoy/e6cc24632eb237d3001df96c8253032d/raw/adc04ee8ccdaf4f726c1b300480da5a5bd03486e/nasa-astronomy-pic-of-the-day.js)\r\n\r\nExample:\r\n![nasa-astronomy-pic-of-the-day-500](https://user-images.githubusercontent.com/12707591/147915697-5744c6bf-e9a2-4d75-84de-ac88855754bc.png)\r\n\r\n\r\n## The Code:\r\n```js\r\n// Menu: NASA's Astronomy Picture of the Day\r\n// Description: Get NASA's APOTD\r\n// Suggested Schedule cron, run it everyday at 10AM local time: 0 10 * * *\r\n// Author: Asep Norzai\r\n// Twitter: @asepnorzai\r\n\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet {data: {copyright, date, explanation, title, hdurl}} = await get(`https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY`)\r\n\r\nshow(`\r\n\t<div style=\"padding: 1em\">\r\n\t\t<h1 style=\"text-align: center\">Astronomy Picture of the Day</h1>\r\n\t\t<p><strong>Title:</strong> <a href=\"https://apod.nasa.gov/apod/astropix.html\">${title}</a></p>\r\n\t\t<p><strong>Explanation:</strong> ${explanation}</p>\r\n\t\t<p><strong>Date:</strong> ${date}</p>\r\n\t\t<p><strong>Copyright:</strong> ${copyright}</p>\r\n\t\t<image src=\"${hdurl}\" style=\"margin-top: 0.5em\" title=\"${title}\"/>\r\n\t</div>`,\r\n{\r\n\ttitle,\r\n\twidth: 800,\r\n\theight: 1000\r\n})\r\n```\r\n\r\n## Extra Findings:\r\n\r\nI initially wanted to use `// Schedule: 0 10 * * *` to automatically show the image everyday, 10am local time, but somehow when opening the script through `https://scriptkit.com/api/new?name=`, the `schedule` value gets stripped off, leaving only `// Schedule:`?\r\nNot sure if it's a bug or by design?\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-03T09:42:30Z"},{"menu":"Shortcut Run","description":"","author":"Sunil Taneja","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/802896?u=707947982c865b61061ff071b3d46b6b8725e260&v=4","user":"suniltaneja","discussion":"https://github.com/johnlindquist/kit/discussions/676","url":"https://gist.githubusercontent.com/suniltaneja/b5755681d3da2fd2b7eacb44b70777ef/raw/01af76f2c96c54ec31457bd729211c6fc84a53a2/shortcutrun.js","title":"Shortcut Runner for Mac OSX Monterey","command":"shortcut-runner-for-mac-osx-monterey","content":"Shortcut Runner for Mac OSX Monterey\r\n\r\n[Install Shortcut runner for Mac OSX Monterey](https://scriptkit.com/api/new?name=shortcutrun&url=https://gist.githubusercontent.com/suniltaneja/b5755681d3da2fd2b7eacb44b70777ef/raw/01af76f2c96c54ec31457bd729211c6fc84a53a2/shortcutrun.js)\r\n\r\n```\r\n// Menu: Shortcut Run\r\n// Description: Shortcut runner for Mac OSX Monterey\r\n// Author: Sunil Taneja\r\n// Twitter: @suniltaneja\r\n\r\nimport \"@johnlindquist/kit\"\r\nconst list = await exec(`shortcuts list`)\r\nconst list_arr = list.stdout.split(\"\\n\")\r\nconst shortcut = await arg(\"Enter Shortcut\", list_arr)\r\nawait $`/usr/bin/shortcuts run ${shortcut}`\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2022-01-02T19:23:58Z"},{"menu":"Stock Quotes","description":"","author":"Sunil Taneja","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/802896?u=707947982c865b61061ff071b3d46b6b8725e260&v=4","user":"suniltaneja","discussion":"https://github.com/johnlindquist/kit/discussions/674","url":"https://gist.githubusercontent.com/suniltaneja/cdc153e687143a43b610f5fe97334450/raw/395040b18034df23fcba0fe56888defc317d967d/stocks.js","title":"Stocks and ETF lookup","command":"stocks-and-etf-lookup","content":"Stocks and ETF lookup -\r\n\r\nThis is a simple stock lookup script.\r\n\r\n[Open in Script Kit](https://scriptkit.com/api/new?name=stocks&url=https://gist.githubusercontent.com/suniltaneja/cdc153e687143a43b610f5fe97334450/raw/395040b18034df23fcba0fe56888defc317d967d/stocks.js)\r\n```js\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Menu: Stock Quotes\r\n// Description: Get realtime stock or etf quotes\r\n// Author: Sunil Taneja\r\n// Twitter: @suniltaneja\r\n\r\nlet stocks_array = ['AAPL', 'GOOG', 'MSFT', 'TSM', 'NVDA']\r\nlet stocks_data = []\r\n\r\nconst transformSymbol = (response) => {\r\n  let stock = {}\r\n  stock.latestPrice = response.data.latestPrice\r\n  stock.change = response.data.change\r\n  stock.symbol = response.data.symbol\r\n  stock.high = response.data.high ? response.data.high : `NA`\r\n  stock.peRatio = response.data.peRatio ? response.data.peRatio : `NA`\r\n  return stock\r\n}\r\n\r\nfor await (let stock of stocks_array){\r\n  // free api provided by finaza.io\r\n  let query_url = `https://www.finaza.io/api/v1/quote?symbol=${stock.toUpperCase()}&key=scriptkit`\r\n  let response = await get(\r\n    query_url\r\n  );\r\n  stocks_data.push(transformSymbol(response))\r\n}\r\n\r\n\r\nlet url = await arg(\r\n  `Select Stock:`,\r\n  stocks_data.map((e) => {\r\n    return {\r\n      name: `${e.symbol} ($${e.latestPrice})`,\r\n      description: `Change: ${e.change} High: ${e.high} PE Ratio: ${e.peRatio}`,\r\n      value: `${e.symbol}`\r\n    }\r\n  }\r\n  )\r\n)\r\n\r\nawait $`open https://www.finaza.io/stocks/${url}`;\r\n```\r\n\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-30T19:03:17Z"},{"name":"DeepL","author":"Jacob Cofman","twitter":"JCofman","description":"","avatar":"https://avatars.githubusercontent.com/u/2118956?u=dd12813efdeb91151f98fcecd5c078f29bed6ff9&v=4","user":"JCofman","discussion":"https://github.com/johnlindquist/kit/discussions/673","url":"https://gist.githubusercontent.com/JCofman/5e728d809d54f1f67249668c07fb205f/raw/e34a8588040fa496e85c8a0d962ecee3d35453d9/deepl.js","title":"Translate Text using DeepL","command":"translate-text-using-deepl","content":"\r\n[Open deepl in Script Kit](https://scriptkit.com/api/new?name=deepl&url=https://gist.githubusercontent.com/JCofman/5e728d809d54f1f67249668c07fb205f/raw/e34a8588040fa496e85c8a0d962ecee3d35453d9/deepl.js\")\r\n\r\n```js\r\n// Name: DeepL\r\n// Author: Jacob Cofman\r\n// Twitter: @jcofman\r\n// Description: Translates text using https://www.deepl.com/translator\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nlet DEEPL_AUTH_KEY = await env(\"DEEPL_AUTH_KEY\", {\r\n    hint: md(\r\n      `Get a [DeepL API Key](https://www.deepl.com/docs-api/accessing-the-api/)`\r\n    ),\r\n    ignoreBlur: true,\r\n    secret: true,\r\n  })\r\n\r\nlet text = await getSelectedText();\r\n\r\nlet targetLanguage = await arg(\"Select a traget Language e.g: DE or EN\")\r\n\r\nlet response = await post(\r\n  `https://api-free.deepl.com/v2/translate?auth_key=${DEEPL_AUTH_KEY}&text=${text}&target_lang=${targetLanguage}`\r\n)\r\n\r\nsetSelectedText(response.data.translations[0].text)\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-28T13:02:12Z"},{"name":"Frontend Masters","description":"","author":"Aseem Taneja","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/13627431?u=92a4e656c7fc2a7ad2a019df5051a65f082d470e&v=4","user":"atej","discussion":"https://github.com/johnlindquist/kit/discussions/672","url":"","title":"Turn any page into an API","command":"turn-any-page-into-an-api","content":"Find yourself visiting a page often just to see what's new?\r\n\r\nThe `list` helper gets you the latest posts right within the Kit app.\r\n\r\n## Get Started\r\n\r\n### Install\r\nIn your `~/.kenv`: `npm install @aseemtaneja/kit-list`\r\n\r\n### API-fy a page\r\nStep 1: Go to the page  \r\nStep 2: Open up the Elements tab in Dev Tools and gather the required CSS selectors  \r\nStep 3: Make a script and you're done  \r\n\r\nFor example, the following script allows you to browse Frontend Masters courses:\r\n```javascript\r\n// Name: Frontend Masters\r\n// Description: Browse courses from frontendmasters.com\r\n// Author: Aseem Taneja\r\n// Twitter: @aseemtaneja\r\n\r\nimport '@johnlindquist/kit';\r\nconst list = await npm('@aseemtaneja/kit-list');\r\n\r\nconst { choices } = await list('https://frontendmasters.com/courses/', {\r\n        containerSelector: '.MediaItem',\r\n        hrefSelector: 'h2 a',\r\n        descriptionSelector: '.description',\r\n        metaSelector: '.Instructor .name',\r\n      });\r\n\r\nconst itemUrl = await arg('Go to', choices);\r\n\r\nawait $`open ${itemUrl}`;\r\n```\r\n\r\nTo see everything you can do  👉🏽 [View the docs on GitHub](https://github.com/atej/kit-list/)","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-26T07:44:50Z"},{"menu":"Code Snippets","description":"","author":"Altrim Beqiri","twitter":"altrimbeqiri","avatar":"https://avatars.githubusercontent.com/u/602300?u=829729de725990e263a945fc10044b989c8558a1&v=4","user":"altrim","discussion":"https://github.com/johnlindquist/kit/discussions/671","url":"","title":"Code Snippets","command":"code-snippets","content":"\r\nA script to easily organize and use your code snippets. Creates a snippet from the contents of the clipboard.\r\n\r\n[Open code-snippets in Script Kit](https://scriptkit.com/api/new?name=code-snippets&url=https://gist.githubusercontent.com/altrim/547fa58073351c0392c0cac76d183b6c/raw/673c7ec92bf7cf692a7aed45f346ece3c9cfe0c1/code-snippets.ts\")\r\n\r\nhttps://user-images.githubusercontent.com/602300/147369687-4b396dee-b3c8-414d-97ae-0766c6ce7896.mp4\r\n\r\n\r\n```js\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Menu: Code Snippets\r\n// Description: Easily organize your code snippets\r\n// Author: Altrim Beqiri\r\n// Twitter: @altrimbeqiri\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst wrapCode = (html: string) => `<pre class=\"px-4\">\r\n<style type=\"text/css\">\r\n  code {\r\n    font-size: 0.75rem !important;\r\n    width: 100%;\r\n    white-space: pre-wrap;\r\n  }\r\n  pre {\r\n    display: flex;\r\n  }\r\n  p {\r\n    margin-bottom: 1rem;\r\n  }\r\n</style>\r\n  <code>\r\n${html.trim()}\r\n  </code>\r\n</pre>`;\r\n\r\nconst highlightCode = async ({ contents, language }): Promise<string> => {\r\n  const { default: highlight } = await npm(\"highlight.js\");\r\n  let highlightedContents = language\r\n    ? highlight.highlight(contents, { language }).value\r\n    : highlight.highlightAuto(contents).value;\r\n\r\n  return wrapCode(highlightedContents);\r\n};\r\n\r\ninterface Snippet {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  language?: string;\r\n  html?: any;\r\n  code?: any;\r\n  preview?: any;\r\n}\r\n\r\nconst { snippets, write }: { snippets: Snippet[]; write: any } = await db(\"code-snippets-db\", {\r\n  snippets: [],\r\n});\r\n\r\nconst onNoChoices = async (input) => {\r\n  if (input) {\r\n    setPanel(\r\n      md(`## Creating snippet <code>${input}</code>\r\n    \r\nCreates a new code snippet with the contents of the clipboard.`)\r\n    );\r\n  } else {\r\n    setPlaceholder(`Enter a snippet name`);\r\n  }\r\n};\r\n\r\nconst onChoices = async () => {\r\n  setPanel(``);\r\n};\r\n\r\nconst loadSnippets = async () => {\r\n  try {\r\n    return snippets.map((snippet) => {\r\n      snippet.preview = async () => {\r\n        if (snippet?.code) {\r\n          return await highlightCode({ contents: snippet?.code, language: snippet?.language });\r\n        }\r\n\r\n        return \"\";\r\n      };\r\n\r\n      return snippet;\r\n    });\r\n  } catch (error) {\r\n    return [error.message];\r\n  }\r\n};\r\n\r\nconst config = {\r\n  placeholder: \"Set snippet name\",\r\n  strict: false,\r\n  onChoices,\r\n  onNoChoices,\r\n  flags: {\r\n    rename: {\r\n      name: \"Description\",\r\n      description: \"Set a description for the selected script\",\r\n    },\r\n    language: {\r\n      name: \"Language\",\r\n      description: \"Set code language for the selected script\",\r\n    },\r\n  },\r\n};\r\n\r\nconst addSnippet = async () => {\r\n  const snippet: Snippet | string = await arg(config, await loadSnippets());\r\n\r\n  if (typeof snippet === \"string\") {\r\n    const clipboard = await paste();\r\n\r\n    snippets.push({\r\n      id: uuid(),\r\n      name: snippet,\r\n      code: clipboard.trim(),\r\n    });\r\n\r\n    await write();\r\n    await addSnippet();\r\n  } else if (snippet?.id) {\r\n    const foundSnippet = snippets.find((s) => s?.id === snippet.id);\r\n\r\n    if (flag?.rename) {\r\n      const description = await arg(\"Enter Description\");\r\n      foundSnippet.description = description;\r\n      await write();\r\n      await addSnippet();\r\n    }\r\n\r\n    if (flag?.language) {\r\n      const language = await arg(\"Enter Code Language\");\r\n      foundSnippet.language = language;\r\n      await write();\r\n      await addSnippet();\r\n    }\r\n\r\n    await setSelectedText(foundSnippet.code);\r\n  }\r\n};\r\n\r\nconst removeSnippet = async () => {\r\n  const snippet: Snippet = await arg(\"Remove snippet\", snippets);\r\n  const index = snippets.findIndex((s) => s?.id === snippet.id);\r\n  if (index > -1) {\r\n    snippets.splice(index, 1);\r\n  }\r\n  await write();\r\n  await removeSnippet();\r\n};\r\n\r\nonTab(\"Snippets\", addSnippet);\r\nonTab(\"Remove\", removeSnippet);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-24T19:09:09Z"},{"menu":"Compress Images","description":"","author":"Vojta Holik","twitter":"vjthlk","avatar":"https://avatars.githubusercontent.com/u/25487857?u=1c81cf15334c751c49f61fe7e0e84b0618eb0e0e&v=4","user":"vojtaholik","discussion":"https://github.com/johnlindquist/kit/discussions/670","url":"https://gist.githubusercontent.com/vojtaholik/1d37868f34c7686e4062a49c21a18dbb/raw/d9874dc3b6a0ecab7df9c1f8c7e8c9df838d2893/compress-images.js","title":"Compress images using imagemin","command":"compress-images-using-imagemin","content":"[Open compress-images in Script Kit](https://scriptkit.com/api/new?name=compress-images&url=https://gist.githubusercontent.com/vojtaholik/1d37868f34c7686e4062a49c21a18dbb/raw/d9874dc3b6a0ecab7df9c1f8c7e8c9df838d2893/compress-images.js\") \r\n\r\n```js \r\n// Menu: Compress Images\r\n// Description: Compress images using imagemin\r\n// Author: Vojta Holik\r\n// Twitter: @vjthlk\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nlet imagemin = await npm(\"imagemin\");\r\nlet imageminJpegtran = await npm(\"imagemin-jpegtran\");\r\nlet imageminJpegRecompress = await npm(\"imagemin-jpeg-recompress\");\r\nlet imageminPngquant = await npm(\"imagemin-pngquant\");\r\nlet imageminSvgo = await npm(\"imagemin-svgo\");\r\nlet imageminGifsicle = await npm(\"imagemin-gifsicle\");\r\n\r\nlet selectedFiles = await getSelectedFile();\r\nlet filePaths;\r\n\r\nif (selectedFiles) {\r\n  filePaths = selectedFiles.split(\"\\n\");\r\n} else {\r\n  let droppedFiles = await drop({ placeholder: \"Drop images to compress\" });\r\n  filePaths = droppedFiles.map((file) => file.path);\r\n}\r\n\r\nfor (let filePath of filePaths) {\r\n  let directory = path.dirname(filePath);\r\n  await imagemin([filePath], {\r\n    destination: directory,\r\n    plugins: [\r\n      imageminJpegtran({\r\n        arithmetic: true,\r\n        progressive: true,\r\n      }),\r\n      imageminJpegRecompress({ max: 85 }),\r\n      imageminSvgo(),\r\n      imageminGifsicle({\r\n        optimizationLevel: 2,\r\n      }),\r\n      imageminPngquant({\r\n        quality: [0.3, 0.5],\r\n      }),\r\n    ],\r\n  });\r\n}\r\n\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-24T12:50:49Z"},{"menu":"Incognito Browser","description":"","author":"Peter Holló","log":"false","avatar":"https://avatars.githubusercontent.com/u/1434873?v=4","user":"phollome","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/666","url":"https://gist.githubusercontent.com/phollome/6d09cba387703dd8d7b42137fb2e4b7f/raw/d41602bf048888554a3e51fdc448c6dd62479faa/incognito-browser.js","title":"Open Browser in incognito mode","command":"open-browser-in-incognito-mode","content":"Opens the selected browser in incognito mode and reuses your choice. Run the script with <kbd>cmd</kbd>+<kbd>Return</kbd> to reset your choice.\r\n\r\n[Open incognito-browser in Script Kit](https://scriptkit.com/api/new?name=incognito-browser&url=https://gist.githubusercontent.com/phollome/6d09cba387703dd8d7b42137fb2e4b7f/raw/d41602bf048888554a3e51fdc448c6dd62479faa/incognito-browser.js\")\r\n\r\n```js\r\n// Menu: Incognito Browser\r\n// Description: Open your favorite browser in incognito/private mode\r\n// Author: Peter Holló\r\n// Log: false\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst listOfBrowsers = [\r\n  {\r\n    name: \"[F]irefox\",\r\n    description: 'Opens Firefox with the \"-private-window\" flag',\r\n    value: \"Firefox\",\r\n    path: \"Firefox.app\",\r\n    command: 'open -na \"Firefox\" --args -private-window',\r\n  },\r\n  {\r\n    name: \"[B]rave\",\r\n    description: 'Opens Brave with the \"-incognito\" flag',\r\n    value: \"Brave\",\r\n    path: \"Brave Browser.app\",\r\n    command: 'open -na \"Brave Browser\" --args -incognito',\r\n  },\r\n  {\r\n    name: \"[S]afari\",\r\n    description: \"Runs an Apple Script which emulates key press\",\r\n    value: \"Safari\",\r\n    path: \"Safari.app\",\r\n    command: `\r\n      tell application \"Safari\"\r\n        activate\r\n        tell application \"System Events\"\r\n          keystroke \"n\" using {command down, shift down}\r\n        end tell\r\n      end tell`,\r\n  },\r\n  {\r\n    name: \"[C]hrome\",\r\n    description: 'Opens Chrome with the \"-incognito\" flag',\r\n    value: \"Chrome\",\r\n    path: \"Google Chrome.app\",\r\n    command: 'open -na \"Google Chrome\" --args -incognito',\r\n  },\r\n  {\r\n    name: \"[O]pera\",\r\n    description: 'Opens Opera with the \"-private\" flag',\r\n    value: \"Opera\",\r\n    path: \"Opera.app\",\r\n    command: 'open -na \"Opera\" --args -private',\r\n  },\r\n  {\r\n    name: \"[E]dge\",\r\n    description: 'Opens Edge with the \"-inprivate\" flag',\r\n    value: \"Edge\",\r\n    path: \"Microsoft Edge.app\",\r\n    command: 'open -na \"Microsoft Edge\" --args -inprivate',\r\n  },\r\n];\r\n\r\nasync function getFavoriteBrowser(availableBrowsers) {\r\n  const listOfAvailableBrowsers = listOfBrowsers.filter((browser) => {\r\n    const isBrowserAvailable = availableBrowsers.some(\r\n      (item) => item === browser.value\r\n    );\r\n    return isBrowserAvailable;\r\n  });\r\n  const selectedBrowser = await arg(\r\n    {\r\n      placeholder: \"Select a your favorite browser\",\r\n      hint: \"Press first letter for quick select\",\r\n    },\r\n    {\r\n      choices: listOfAvailableBrowsers,\r\n    }\r\n  );\r\n  return selectedBrowser;\r\n}\r\n\r\nconst data = await db({\r\n  availableBrowsers: [],\r\n});\r\n\r\nif (data.availableBrowsers.length === 0) {\r\n  for (let i = 0, length = listOfBrowsers.length; i < length; i++) {\r\n    const available = await isDir(`/Applications/${listOfBrowsers[i].path}`);\r\n    if (available) {\r\n      data.availableBrowsers.push(listOfBrowsers[i].value);\r\n    }\r\n  }\r\n  await data.write();\r\n}\r\n\r\nif (data.availableBrowsers.length === 0) {\r\n  const browserNames = listOfBrowsers.map((browser) => {\r\n    return browser.value;\r\n  });\r\n\r\n  await div(\r\n    `\r\n    <div class=\"p-4 font-mono text-sm\">\r\n      <p class=\"pb-2\">\r\n          No supported browser found!😬\r\n      </p>\r\n      <p>\r\n        Supported browsers are: ${browserNames.join(\", \")}.\r\n      <p>\r\n    </div>\r\n    `\r\n  );\r\n}\r\n\r\nconst favoriteBrowser = await env(\"FAVORITE_BROWSER\", {\r\n  reset: flag?.cmd,\r\n  choices: getFavoriteBrowser.bind(null, data.availableBrowsers),\r\n});\r\n\r\nconst { command } = listOfBrowsers.find((browser) => {\r\n  return browser.value === favoriteBrowser;\r\n});\r\n\r\nif (favoriteBrowser === \"Safari\") {\r\n  await applescript(command);\r\n} else {\r\n  await exec(command);\r\n}\r\n\r\n```\r\n\r\n## Initial description\r\nTo start writing scripts for this awesome tool I wanted to migrate an Alfred workflow I wrote ([alfred-incognito-browser\r\n](https://github.com/phollome/alfred-incognito-browser)). What I appreciate on this workflow is that it enhances the application launch feature of Alfred with the option to open your browser in incognito mode. Maybe launching an application could be a top level feature instead of being a single script?\r\n\r\nI would love get some feedback. I know there is some room for improvements (eg. the Safari script).\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-21T10:30:18Z"},{"name":"json-formatter","author":"Henry Black","twitter":"HAJBlack","avatar":"https://avatars.githubusercontent.com/u/15220184?u=3a0ef6d8df198c1b1397c353a09113b144faf895&v=4","user":"blackhaj","discussion":"https://github.com/johnlindquist/kit/discussions/664","url":"https://gist.githubusercontent.com/blackhaj/6651f50c6755db63e25f09f5cb9fbcaf/raw/c8a05d7266d46795d341dd4772bf9a3ad8e000c2/json-formatter.js","title":"A simple JSON formatter","command":"a-simple-json-formatter","content":"Hey folks - I made a little JSON formatter (my first attempt at a script)\r\n\r\nIt does the following:\r\n\r\nGrabs the latest item on your clipboard\r\nFormats it using prettier (this will have to install on your first time running the script)\r\nCopies the formatted JSON to your clipboard\r\nSuper simple but hopefully useful.\r\n\r\n[Open json-formatter in Script Kit](https://scriptkit.com/api/new?name=json-formatter&url=https://gist.githubusercontent.com/blackhaj/6651f50c6755db63e25f09f5cb9fbcaf/raw/c8a05d7266d46795d341dd4772bf9a3ad8e000c2/json-formatter.js\")\r\n\r\n```js\r\nimport '@johnlindquist/kit';\r\n\r\nconst prettier = await npm('prettier');\r\n\r\n// Name: json-formatter\r\n// Author: Henry Black\r\n// Twitter: @hajblack\r\n\r\nconst unformattedJson = await paste();\r\n\r\nlet result;\r\n\r\ntry {\r\n  result = await prettier.format(unformattedJson, {\r\n    parser: 'json',\r\n  });\r\n  await copy(result);\r\n} catch (err) {\r\n  arg(\"Couldn't format that string: \" + err);\r\n}\r\n\r\n```\r\n\r\nAny feedback very welcome - this is my first script on ScriptKit so I would love any pointers.","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-20T17:47:56Z"},{"menu":"Meet","description":"","author":"Valentin Hervieu","twitter":"ValentinHervieu","avatar":"https://avatars.githubusercontent.com/u/2678610?u=baddd0d28f54963a735b44c84f585f07811662ba&v=4","user":"ValentinH","discussion":"https://github.com/johnlindquist/kit/discussions/663","url":"","title":"Create new Google Meet and share URL on Slack","command":"create-new-google-meet-and-share-url-on-slack","content":"A simple script to create a new Google Meet and paste the generated URL on the current Slack chat.\r\n\r\n[Open meet in Script Kit](https://scriptkit.com/api/new?name=meet&url=https://gist.githubusercontent.com/ValentinH/9d2b6c1525f1eed38e6af964bad22406/raw/006894bf2da7b5b84d3afdc8fc08553eec26c136/meet.ts\")\r\n\r\n```js\r\n// Menu: Meet\r\n// Description: Start new meet and paste on Slack\r\n// Author: Valentin Hervieu\r\n// Twitter: @ValentinHervieu\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\nbrowse('https://meet.new')\r\nlet count = 1\r\nlet tab = ''\r\n\r\nwhile (count < 20) {\r\n  await wait(500)\r\n  tab = await getActiveTab(\"Brave\")\r\n  if (!tab.startsWith('https://meet.google.com/new') && !tab.startsWith('https://meet.new')) break\r\n  count += 1\r\n}\r\n\r\ntab = tab.split('?')[0]\r\n\r\nawait copy(tab)\r\nawait focusWindow('Slack', '')\r\nawait setSelectedText(tab)\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-20T16:17:55Z"},{"menu":"Translate Image","description":"","author":"Altrim Beqiri","twitter":"altrimbeqiri","avatar":"https://avatars.githubusercontent.com/u/602300?u=829729de725990e263a945fc10044b989c8558a1&v=4","user":"altrim","discussion":"https://github.com/johnlindquist/kit/discussions/639","url":"","title":"Translate Image","command":"translate-image","content":"Simple script to translate the text found on a selected image. It uses Google Cloud vision and translation apis. \r\nTo set it up locally you need to authenticate to Google Cloud API https://cloud.google.com/docs/authentication/getting-started\r\n\r\n[Install translate-image](https://scriptkit.com/api/new?name=translate-image&url=https://gist.githubusercontent.com/altrim/7c3f8de0a05375c48a4f9e2aad6e3def/raw/93d43dac52135e1154606b5898dc52c3e312a375/translate-image.ts\")\r\n\r\nhttps://user-images.githubusercontent.com/602300/144909681-71e31270-b542-4c96-b1a6-7e00c4280f26.mp4\r\n\r\n```js\r\nimport \"@johnlindquist/kit\";\r\n// Menu: Translate Image\r\n// Description: Translate text extracted from a selected image\r\n// Author: Altrim Beqiri\r\n// Twitter: @altrimbeqiri\r\n\r\nconst vision = await npm(\"@google-cloud/vision\");\r\nconst gtranslate = await npm(\"@google-cloud/translate\");\r\nconst { Translate } = gtranslate.v2;\r\n\r\nconst client = new vision.ImageAnnotatorClient();\r\nconst translate = new Translate();\r\n\r\nconst extractText = async (): Promise<string> => {\r\n  const file = await getSelectedFile();\r\n  const [result] = await client.textDetection(file);\r\n  return result.fullTextAnnotation.text;\r\n};\r\n\r\nconst translateText = async (text: string) => {\r\n  let [translations] = await translate.translate(text, \"en\");\r\n  translations = Array.isArray(translations) ? translations : [translations];\r\n  return translations.join(\" \");\r\n};\r\n\r\ndiv(md(\"Extracting and Translating...\"));\r\nconst text = await extractText();\r\nconst translation = await translateText(text);\r\n\r\nshow(\r\n  `\r\n<div>\r\n  <div class=\"max-w-2xl mx-auto sm:px-6 lg:px-8 text-gray-800 bg-white\">\r\n    <div class=\"overflow-hidden shadow-md\">\r\n      <div class=\"px-6 py-4 border-b border-gray-200 font-bold\">Extracted Text</div>\r\n      <div class=\"p-6 border-b border-gray-200\">${text}</div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"max-w-2xl mx-auto sm:px-6 lg:px-8 text-gray-800 bg-white\">\r\n    <div class=\"overflow-hidden shadow-md\">\r\n      <div class=\"px-6 py-4 border-b border-gray-200 font-bold\">Translation</div>\r\n      <div class=\"p-6 border-b border-gray-200\">${translation}</div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n`,\r\n  { width: 640, height: 420, transparent: true }\r\n);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-06T19:33:53Z"},{"menu":"Speed Test","description":"","author":"Altrim Beqiri","twitter":"altrimbeqiri","avatar":"https://avatars.githubusercontent.com/u/602300?u=829729de725990e263a945fc10044b989c8558a1&v=4","user":"altrim","discussion":"https://github.com/johnlindquist/kit/discussions/635","url":"","title":"Speed Test","command":"speed-test","content":"\r\n[Install speed-test](https://scriptkit.com/api/new?name=speed-test&url=https://gist.githubusercontent.com/altrim/42c80c208d129534b6dfde79df32db9e/raw/741eaf89114e64b34ab5cc6cc62bb5f221672319/speed-test.ts\")\r\n\r\nWas playing around with live data update on panels and wanted to see how one can customise the show() panel a bit, so I wrote this script to check internet download/upload speed.\r\n\r\nhttps://user-images.githubusercontent.com/602300/144672001-fff14bd5-e08a-4aa2-a98c-b0e742cb1547.mp4\r\n\r\n```js\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Menu: Speed Test\r\n// Description: Test the speed and performance of your internet connection\r\n// Author: Altrim Beqiri\r\n// Twitter: @altrimbeqiri\r\n\r\nconst speedTest = await npm(\"speedtest-net\");\r\n\r\ninterface SpeedTestResult {\r\n  timestamp: Date;\r\n  ping: { jitter: number; latency: number };\r\n  download: { bandwidth: number; bytes: number; elapsed: number };\r\n  upload: { bandwidth: number; bytes: number; elapsed: number };\r\n  packetLoss: number;\r\n  isp: string;\r\n  interface: {\r\n    internalIp: string;\r\n    name: string;\r\n    macAddr: string;\r\n    isVpn: boolean;\r\n    externalIp: string;\r\n  };\r\n  server: {\r\n    id: number;\r\n    name: string;\r\n    location: string;\r\n    country: string;\r\n    host: string;\r\n    port: number;\r\n    ip: string;\r\n  };\r\n  result: {\r\n    id: string;\r\n    url: string;\r\n  };\r\n}\r\n\r\nconst progressPanelInfo = ({ downloadSpeed = 0, uploadSpeed = 0 }: { downloadSpeed: number; uploadSpeed: number }) => {\r\n  return `\r\n  <div class=\"flex flex-col p-4\">\r\n    <p class=\"mb-2 text-xl font-mono text-center text-yellow-500\" style=\"font-variant-numeric: tabular-nums;\">\r\n     ${downloadSpeed.toFixed(2)} Mbps &darr; </p>\r\n    <p class=\"text-xl text-center font-mono text-yellow-500\" style=\"font-variant-numeric: tabular-nums;\">\r\n     ${uploadSpeed.toFixed(2)} Mbps &uarr;</p>\r\n  </div>\r\n`;\r\n};\r\nconst showResultsPanel = ({\r\n  datacenter,\r\n  downloadSpeed,\r\n  uploadSpeed,\r\n}: {\r\n  datacenter: string;\r\n  downloadSpeed: number;\r\n  uploadSpeed: number;\r\n}) => {\r\n  show(\r\n    `\r\n<div class=\"px-2 py-2 mx-auto\">\r\n  <h3 class=\"text-center bg-clip-text text-green-400\" style=\"background-image: linear-gradient(45deg, #2ed1c1, #3a86f4); color: transparent; -webkit-background-clip:text\">Datacenter ${datacenter}</h3>\r\n  <div class=\"grid grid-cols-2\" style=\"gap: 1rem;\">\r\n    <div class=\"flex flex-col justify-center p-4 bg-gray-800 rounded\">\r\n        <p class=\"text-3xl font-semibold font-mono text-center text-white\">${downloadSpeed.toFixed(2)}</p>\r\n        <p class=\"text-2xl font-semibold text-center text-gray-300\">Mbps</p>\r\n        <p class=\"text-center text-gray-400\">Download</p>\r\n    </div>\r\n\r\n    <div class=\"flex flex-col justify-center p-4 bg-gray-800 rounded\">\r\n        <p class=\"text-3xl font-semibold font-mono text-center text-white\">${uploadSpeed.toFixed(2)}</p>\r\n        <p class=\"text-2xl font-semibold text-center text-gray-300\">Mbps</p>\r\n        <p class=\"text-center text-gray-400\">Upload</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n`,\r\n    { width: 640, height: 170, transparent: true }\r\n  );\r\n};\r\n\r\ntry {\r\n  let downloadSpeed = 0;\r\n  let uploadSpeed = 0;\r\n\r\n  div(progressPanelInfo({ downloadSpeed, uploadSpeed }));\r\n\r\n  const testResult: SpeedTestResult = await speedTest({\r\n    acceptLicense: true,\r\n    acceptGdpr: true,\r\n    progress: (progress: any) => {\r\n      if (progress.type === \"download\") {\r\n        downloadSpeed = progress.download.bandwidth / 131072;\r\n      }\r\n      if (progress.type === \"upload\") {\r\n        uploadSpeed = progress.upload?.bandwidth / 131072;\r\n      }\r\n      setPanel(progressPanelInfo({ downloadSpeed, uploadSpeed }));\r\n    },\r\n  });\r\n\r\n  downloadSpeed = testResult.download.bandwidth / 131072;\r\n  uploadSpeed = testResult.upload.bandwidth / 131072;\r\n  let datacenter = `${testResult.server.name} ${testResult.server.location} - ${testResult.server.country}`;\r\n\r\n  showResultsPanel({ datacenter, downloadSpeed, uploadSpeed });\r\n} catch (err: any) {\r\n  console.log(err.message);\r\n}\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-12-03T21:06:36Z"},{"menu":"Notion Thoughts","description":"","author":"Altrim Beqiri","twitter":"altrimbeqiri","avatar":"https://avatars.githubusercontent.com/u/602300?u=829729de725990e263a945fc10044b989c8558a1&v=4","user":"altrim","discussion":"https://github.com/johnlindquist/kit/discussions/623","url":"","title":"Quick Thoughts with Script Kit and Notion","command":"quick-thoughts-with-script-kit-and-notion","content":"I use Notion daily for my work and after I saw the tweet by @johnlindquist on the Quick Thoughts script I got inspired to write one that integrates with the Notion API. I wrote a bit about it on my blog [Quick Thoughts with Script Kit and Notion](https://altrim.io/posts/quick-thoughts-with-script-kit-and-notion)\r\n\r\n[Install notion-thoughts](https://scriptkit.com/api/new?name=notion-thoughts&url=https://gist.githubusercontent.com/altrim/141e25b46ba5fc8be4adb1517fb6d16e/raw/b892176987fb2932dee85054010d5a7ee66b56bf/notion-thoughts.ts\")\r\n\r\nhttps://user-images.githubusercontent.com/602300/144701725-aaf3a8a8-becb-4c53-9ea9-5a0592af4971.mp4\r\n\r\n\r\n```js\r\nimport \"@johnlindquist/kit\";\r\n\r\n// Menu: Notion Thoughts\r\n// Description: Add quick thoughts to a notion journal page\r\n// Author: Altrim Beqiri\r\n// Twitter: @altrimbeqiri\r\n\r\n/** @type {typeof import(\"@notionhq/client\")} */\r\nconst { Client } = await npm(\"@notionhq/client\");\r\n/** @type {typeof import(\"date-fns\")} */\r\nconst { format, parseISO, formatISO, isSameMinute } = await npm(\"date-fns\");\r\n\r\nconst NOTION_URL = await env(\"NOTION_URL\");\r\nconst DATABASE_ID = await env(\"NOTION_DATABASE_ID\");\r\nconst TOKEN = await env(\"NOTION_TOKEN\");\r\n\r\nconst notion = new Client({\r\n  auth: TOKEN,\r\n});\r\n\r\n/**\r\n * Create a heading two block\r\n *\r\n * @param content\r\n * @returns block object https://developers.notion.com/reference/block#heading-two-blocks\r\n */\r\nconst createHeadingBlock = (content: string) => {\r\n  return {\r\n    object: \"block\",\r\n    type: \"heading_2\",\r\n    heading_2: {\r\n      text: [\r\n        {\r\n          type: \"text\",\r\n          text: {\r\n            content,\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * Create a bulleted litst item block\r\n *\r\n * @param content\r\n * @returns block object https://developers.notion.com/reference/block#bulleted-list-item-blocks\r\n */\r\nconst createBulletItemBlock = (content: string) => {\r\n  return {\r\n    object: \"block\",\r\n    type: \"bulleted_list_item\",\r\n    bulleted_list_item: {\r\n      text: [\r\n        {\r\n          type: \"text\",\r\n          text: {\r\n            content,\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * Query the database by the name and today's date\r\n *\r\n * https://developers.notion.com/reference/post-database-query\r\n * @returns database object https://developers.notion.com/reference/database\r\n */\r\nconst queryDatabase = async () =>\r\n  await notion.databases.query({\r\n    database_id: DATABASE_ID,\r\n    filter: {\r\n      and: [\r\n        {\r\n          property: \"Name\",\r\n          text: {\r\n            contains: \"Thoughts\",\r\n          },\r\n        },\r\n        {\r\n          property: \"Created\",\r\n          created_time: {\r\n            equals: formatISO(new Date(), { representation: \"date\" }),\r\n          },\r\n        },\r\n      ],\r\n    },\r\n    sorts: [\r\n      {\r\n        property: \"Created\",\r\n        direction: \"ascending\",\r\n      },\r\n    ],\r\n  });\r\n\r\n/**\r\n * Create a new page in the database with today's date and a Daily tag\r\n *\r\n * https://developers.notion.com/reference/create-a-database\r\n * @returns https://developers.notion.com/reference/page\r\n */\r\nconst createPage = async () =>\r\n  await notion.pages.create({\r\n    parent: {\r\n      database_id: DATABASE_ID,\r\n    },\r\n    icon: {\r\n      type: \"emoji\",\r\n      emoji: \"📝\",\r\n    },\r\n    properties: {\r\n      Name: {\r\n        title: [\r\n          {\r\n            text: {\r\n              content: `${format(new Date(), \"yyyy-MM-dd\")} - Thoughts`,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n      Tags: {\r\n        multi_select: [{ name: \"Daily\" }],\r\n      },\r\n    },\r\n    children: [createHeadingBlock(`${format(new Date(), \"HH:mm\")}`)],\r\n  });\r\n\r\nconst hasThoughtsForTheDay = (thoughts?: any[]) => thoughts && thoughts.length > 0;\r\n\r\n// Query the database for the page that contains the \"Thoughts\" label and the today's date\r\nconst { results: database } = await queryDatabase();\r\n// If we don't have a page for today we create a new one\r\nconst page = hasThoughtsForTheDay(database) ? database[0] : await createPage();\r\n\r\nwhile (true) {\r\n  const thought = await arg({\r\n    placeholder: \"Thought:\",\r\n    hint: `Type \"open\" to open journal in browser`,\r\n  });\r\n\r\n  // Will open the journal in a new tab in your default browser and exit the script\r\n  if (thought === \"open\") {\r\n    focusTab(`${NOTION_URL}/${DATABASE_ID}`);\r\n    break;\r\n  }\r\n\r\n  // List all the children in the page\r\n  const { results: children } = await notion.blocks.children.list({\r\n    block_id: page.id,\r\n    page_size: 42, // The number of items from the full list desired in the response. Maximum: 100\r\n  });\r\n\r\n  // Get last heading block we have on the page\r\n  const headingBlock = [...children].reverse().find((obj: any) => obj.type === \"heading_2\");\r\n\r\n  // Check if the last heading is not same time as the current time we need to create a new heading block\r\n  const isSameTime = isSameMinute(parseISO(headingBlock?.created_time), new Date());\r\n  if (!isSameTime) {\r\n    await notion.blocks.children.append({\r\n      block_id: page.id,\r\n      children: [createHeadingBlock(format(new Date(), \"HH:mm\"))],\r\n    });\r\n  }\r\n\r\n  // Append the item to the last heading block\r\n  await notion.blocks.children.append({\r\n    block_id: page.id,\r\n    children: [createBulletItemBlock(thought)],\r\n  });\r\n}\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-28T00:12:11Z"},{"menu":"Read Random link from a mardown file","description":"","author":"Horacio Herrera","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/725120?u=9a4ac0020d0e405b332b2c408ef77588c67bf8b2&v=4","user":"horacioh","discussion":"https://github.com/johnlindquist/kit/discussions/618","url":"","title":"Open a random link from a markdown file","command":"open-a-random-link-from-a-markdown-file","content":"I have a list of all the links I want to read in a markdown file. and I build this script to open a random link to start reading!\r\n\r\n```js\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\n// Menu: Read Random link from a mardown file\r\n// Description: Open a random link from a markdown file\r\n// Author: Horacio Herrera\r\n// Twitter: @hhg2288\r\n\r\n/** @type {typeof import(\"unified\")} */\r\nlet { unified } = await npm(\"unified\")\r\n/** @type {typeof import(\"remark-parse\").default} */\r\nlet remarkParse = await npm(\"remark-parse\")\r\n/** @type {typeof import(\"unist-util-visit\")} */\r\nlet { visit } = await npm(\"unist-util-visit\")\r\n\r\n// get the markdown file you want to parse\r\nlet file = home(`workspace/braindump/inbox.md`)\r\nlet contents = await readFile(file, \"utf-8\")\r\nlet tree = unified().use(remarkParse).parse(contents)\r\n\r\n// create an array of links\r\nlet links = []\r\nvisit(tree, \"link\", function linkVisitor(node) {\r\n  links.push(node)\r\n})\r\n\r\n// open a random url from the generated list\r\nlet index = Math.floor(Math.random() * (links.length - 1))\r\nexec(`open '${links[index].url}'`)\r\n\r\n```\r\n\r\nthere are some things I want to modify to make it better and more \"agnostic\":\r\n- [x] let de user set the file he/she wants to parse\r\n- [ ] store the remark AST result in the db, and maybe update it everytime I update the file (which I do using another script)\r\n- [ ] update the file and create another list of the links I \"visited\"\r\n\r\nany feedback and suggestion is welcome!\r\n\r\n\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-24T20:34:31Z"},{"avatar":"https://avatars.githubusercontent.com/u/17577332?v=4","user":"pomdtr","author":"Achille Lacoin","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/607","url":"","title":"Updated Raycast Integration","command":"updated-raycast-integration","content":"I've built a new extension to be able to launch my scripts from raycast. It would be cool to get a review from you @johnlindquist !\r\n\r\nLink to the pull request: https://github.com/raycast/extensions/pull/399\r\n\r\nhttps://user-images.githubusercontent.com/17577332/142733677-ae7fcd29-e267-4301-a4e7-1ac86b030c98.mp4","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-20T16:29:47Z"},{"menu":"Search Kent's Blog","avatar":"https://avatars.githubusercontent.com/u/5678065?u=e2e528a3ee58b5150a1947c7ded93695b35a8779&v=4","user":"Alarid","author":"Yohann Legrand","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/600","url":"https://gist.githubusercontent.com/Alarid/210958c034bfeda6f1baf1cc29eed91e/raw/7777c4ed25cbbc5a4f7a5bd3bd9b7a50435e8ee1/search-kent-blog.js","title":"Search Kent C. Dodds blog","command":"search-kent-c-dodds-blog","content":"Because we all love [Kent's blog](https://kentcdodds.com/blog) so much, I made a small script to quickly search for a blog post 😁\r\n\r\n[Install search-kent-blog](https://scriptkit.com/api/new?name=search-kent-blog&url=https://gist.githubusercontent.com/Alarid/210958c034bfeda6f1baf1cc29eed91e/raw/7777c4ed25cbbc5a4f7a5bd3bd9b7a50435e8ee1/search-kent-blog.js\")\r\n\r\n```js\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n// Menu: Search Kent's Blog\r\n\r\nconst query = await arg(\"Query\")\r\nexec(`open https://kentcdodds.com/s/${encodeURIComponent(query)}`)\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-18T11:43:51Z"},{"exclude":"true","avatar":"https://avatars.githubusercontent.com/u/5678065?u=e2e528a3ee58b5150a1947c7ded93695b35a8779&v=4","user":"Alarid","author":"Yohann Legrand","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/599","url":"https://gist.githubusercontent.com/Alarid/cc25e78cefa3ae73f6b3ed12bc50ca8c/raw/2fd224db495e10f557ccfe2b209ba624f69217e3/purge-unused-git-branches.js","title":"Purge unused Git branches","command":"purge-unused-git-branches","content":"[Install purge-unused-git-branches](https://scriptkit.com/api/new?name=purge-unused-git-branches&url=https://gist.githubusercontent.com/Alarid/cc25e78cefa3ae73f6b3ed12bc50ca8c/raw/2fd224db495e10f557ccfe2b209ba624f69217e3/purge-unused-git-branches.js)\r\n\r\n## Demo\r\nhttps://user-images.githubusercontent.com/5678065/142405828-21e7a439-b127-4fcb-af13-7cbe6d947400.mov\r\n\r\n## Purpose\r\nI find it quite annoying to keep old/unused Git branches in my local repositories. Most of the time, those branches have been merged some time ago, but I keep on forgetting to delete them manually. So I made this little utility to help me/you with that 😇\r\n\r\nIt will simply compare your local branches with the remote ones, and ask you if you wish to delete all the unused branches, or select the ones you want to remove manually. \r\n\r\n## Notes\r\nYou must use this script in your terminal, in a Git repository folder. This is why I excluded it from the Kit UI. Adding Kit scripts to your Path will make it easier to run this one from anywhere:\r\n```\r\n# Add this in your .zhsrc or .bashrc\r\nexport PATH=$HOME/.kenv/bin:$PATH\r\n```\r\nThen run the script from anywhere (in a Git repo):\r\n```\r\npurge-unused-git-branches\r\n```\r\n\r\n## Source\r\n```js\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n// Exclude: true\r\n\r\n$.verbose = false\r\n\r\nconst TOKENS_TO_REMOVE = [\"* \", \"origin/\", \"HEAD -> \"]\r\n\r\n// Utility to process ZX output by converting lines into an array and removing\r\n// some tokens from the branch names (so remote branches and local branches have\r\n// the same name)\r\nconst processOutput = (output) => [\r\n  ...new Set(\r\n    output\r\n      .split(\"\\n\")\r\n      .map((branch) => {\r\n        let res = branch.trim()\r\n        TOKENS_TO_REMOVE.forEach((token) => (res = res.replaceAll(token, \"\")))\r\n        return res\r\n      })\r\n      .filter((branch) => branch.length > 0)\r\n  ),\r\n]\r\n\r\n// Retrieve remote and local branches\r\nconsole.log(\"Parsing remote and local branches...\")\r\nconst remoteBranches = await $`git branch -r`.then((output) =>\r\n  processOutput(output.stdout)\r\n)\r\nconst localBranches = await $`git branch`.then((output) =>\r\n  processOutput(output.stdout)\r\n)\r\n\r\n// Compute the set of branches that are not used\r\nconst branchesToRemove = localBranches.filter(\r\n  (branch) => !remoteBranches.includes(branch)\r\n)\r\n\r\n// No branches to remove, nothing to do !\r\nif (branchesToRemove.length === 0) {\r\n  console.log(\"No branches to remove. All good 👌\")\r\n  exit()\r\n}\r\n\r\n// Output the list of branches to remove\r\nconsole.log(\r\n  `Found ${branchesToRemove.length} branches that only exist locally:`\r\n)\r\nbranchesToRemove.map((branch) => console.log(`  - ${branch}`))\r\nconsole.log()\r\n\r\n// Ask the user to confirm the list of branches to remove\r\nconst choice = await arg({\r\n  placeholder:\r\n    \"Do you wish to delete all thoses branches, or select some manually ?\",\r\n  hint: \"[a]ll/[s]elect\",\r\n})\r\nif (choice === \"a\") {\r\n  // Removing all branches at once\r\n  console.log(\"Deleting all branches...\")\r\n  for (const branch in branchesToRemove) {\r\n    await $`git branch -D ${branchesToRemove[branch]}`\r\n  }\r\n  console.log(\"✅ Done.\")\r\n} else if (choice === \"s\") {\r\n  // Ask the user to select branches to remove\r\n  for (const branch in branchesToRemove) {\r\n    const branchName = branchesToRemove[branch]\r\n    const answer = await arg({\r\n      placeholder: `Delete ${branchName}?`,\r\n      hint: `[y]es/[n]o/[e]xit`,\r\n    })\r\n    if (answer === \"y\") {\r\n      try {\r\n        await $`git branch -D ${branchName}`\r\n        console.log(`✅ Branch ${branchName} successfully deleted locally.`)\r\n      } catch (err) {\r\n        console.error(\r\n          `❌ Something went wrong while deleting your branch ${branchName}.`\r\n        )\r\n      }\r\n    } else if (answer === \"e\") {\r\n      console.log(\"Exiting...\")\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\nconsole.log(\"All done, bye 👋\")\r\n```\r\n\r\n[Install purge-unused-git-branches](https://scriptkit.com/api/new?name=purge-unused-git-branches&url=https://gist.githubusercontent.com/Alarid/cc25e78cefa3ae73f6b3ed12bc50ca8c/raw/2fd224db495e10f557ccfe2b209ba624f69217e3/purge-unused-git-branches.js)","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-18T11:34:12Z"},{"menu":"Weather Degree Converter","author":"Nadeem Khedr","twitter":"nadeemkhedr","avatar":"https://avatars.githubusercontent.com/u/180256?v=4","user":"nadeemkhedr","discussion":"https://github.com/johnlindquist/kit/discussions/597","url":"https://gist.githubusercontent.com/nadeemkhedr/cf249f4dc839e33010ad0bcf27970060/raw/76ee9bb18dcc1eac846d602edf27b2d01602ca19/weather-convert.js","title":"Weather converter °C/°F conversion","command":"weather-converter-cf-conversion","content":"I wanted to share a semi-useful script, primarily if you work between the states and other countries.\r\n\r\nHere I wanted to create a simple script that will run both in the CLI/UI. You enter weather in formats like `30c` or `90f,` which will convert it the other way.\r\n\r\nAlso, from the UI, it's real-time. So you will get the result while typing. \r\n\r\nThe output can improve (especially the error state). I might do it later.\r\n\r\n[Open weather-convert in Script Kit](https://scriptkit.com/api/new?name=weather-convert&url=https://gist.githubusercontent.com/nadeemkhedr/cf249f4dc839e33010ad0bcf27970060/raw/76ee9bb18dcc1eac846d602edf27b2d01602ca19/weather-convert.js\")\r\n\r\n```js\r\n// Menu: Weather Degree Converter\r\n// Author: Nadeem Khedr\r\n// Twitter: @nadeemkhedr\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nlet convertToF = (c) => {\r\n  return (c * 9) / 5 + 32;\r\n};\r\n\r\nconst convertToC = (f) => {\r\n  return ((f - 32) * 5) / 9;\r\n};\r\n\r\nconst getDegreeWithType = (input) => {\r\n  const matchRegex = /(\\d+)(f|c)/i;\r\n  const result = matchRegex.exec(input);\r\n  if (!result) {\r\n    // try to be smart, if the user enters a number \r\n    // we default degree to C if degree is < 50 and F if not\r\n    const numberOnly = parseInt(input, 10)\r\n    if (numberOnly) {\r\n      const degreeType = numberOnly <= 50 ? 'c' : 'f'\r\n      return {\r\n        degree: numberOnly,\r\n        type: degreeType,\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  return {\r\n    degree: parseInt(result[1], 10),\r\n    type: result[2].toLowerCase(),\r\n  };\r\n};\r\n\r\nconst degreeConverter = (input) => {\r\n  const degreeResult = getDegreeWithType(input);\r\n  if (!degreeResult) {\r\n    return \"You need to enter the unit in this format '30c' or '90f'\";\r\n  }\r\n\r\n  const { degree, type } = degreeResult;\r\n  let oDegree = null;\r\n  let oType = null;\r\n  if (type === \"c\") {\r\n    oDegree = convertToF(degree);\r\n    oType = \"F\";\r\n  } else {\r\n    oDegree = convertToC(degree);\r\n    oType = \"C\";\r\n  }\r\n  return `${oDegree.toFixed(1)}°${oType}`;\r\n};\r\n\r\nconst deg = await arg(\r\n  \"Enter degress in °C or °F\",\r\n  (input) =>\r\n    `<div class=\"text-2xl flex justify-center items-center p-5\">\r\n${input ? degreeConverter(input) : `Waiting for input`}\r\n</div>`\r\n);\r\n\r\ndiv(degreeConverter(deg));\r\n\r\n```","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-15T19:05:46Z"},{"menu":"Track Todo","description":"","author":"David Losert","twitter":"david_losert","avatar":"https://avatars.githubusercontent.com/u/4287128?u=70e8d6e39f4addac43ee9849c8d9c150363e460e&v=4","user":"davelosert","discussion":"https://github.com/johnlindquist/kit/discussions/559","url":"","title":"Start tracking a Todoist Todo with Toggl","command":"start-tracking-a-todoist-todo-with-toggl","content":"Select a task from `Todoist` (configured from tasks assigned to `today`) and start a `Toggl`-timer for it.\r\nIf both, `Todoist` and `Toggl` have a Project with the same name, that project is automatically linked in the Tracking-Entry.\r\n\r\nEven though this script is very opinionated to those two tools, it might inspire you to do something similar with the tools of your choice. 😉 \r\n\r\n```typescript\r\n// Menu: Track Todo\r\n// Description: Start the tracking timer of Toggl with a todo from today of Todoist.\r\n// Author: David Losert\r\n// Twitter: @david_losert\r\n\r\nimport \"@johnlindquist/kit\"\r\nimport { getTodosOfToday, getProjectById } from '../lib/Todoist';\r\nimport { startTimeTrackerFor } from '../lib/Toggl';\r\n\r\nconst todosToday = await getTodosOfToday();\r\n\r\nconst selectedTodo = await arg(\r\n  'Select Todo to start', \r\n  todosToday.map((todo) => ({\r\n    name: todo.content,\r\n    value: todo\r\n  })\r\n));\r\n\r\nlet projectName;\r\nif(selectedTodo.project_id) {\r\n  const project = await getProjectById(selectedTodo.project_id);\r\n  projectName = project.name;\r\n}\r\n\r\nconst result = await startTimeTrackerFor({ \r\n  description: selectedTodo.content,\r\n  projectName\r\n});\r\n\r\nawait notify({\r\n  title: 'Tracking Started.',\r\n  message: `Started Tracking for ${result.description}.`\r\n});\r\n```\r\n\r\nAs I am planing to write some more actions for Todoist as well as Toggl, I externalized accessing them into two modules (might put them into own npm modules when I have the time):\r\n\r\n## `../lib/Todoist.ts`:\r\n\r\n```typescript\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst axios = await npm('axios');\r\n\r\nconst todoistApiToken = await env('TODOIST_API_TOKEN');\r\n\r\n// Types omit properties not relevant right now\r\ntype TodoistTask = {\r\n    id: number,\r\n    project_id: number,\r\n    content: string,\r\n };\r\n\r\ntype TodoistProject = {\r\n  id: number,\r\n  name: string,\r\n};\r\n\r\nconst getTodosOfToday = async (): Promise<TodoistTask[]> => {\r\n  const response =  await axios({\r\n    method: 'GET',\r\n    url: 'https://api.todoist.com/rest/v1/tasks?filter=today',\r\n    headers: {\r\n      'Authorization': `Bearer ${todoistApiToken}`\r\n    }\r\n  });\r\n  return response.data;\r\n};\r\n\r\nconst getProjectById = async (id: number): Promise<TodoistProject> => {\r\n  const response =  await axios({\r\n    method: 'GET',\r\n    url: `https://api.todoist.com/rest/v1/projects/${id}`,\r\n    headers: {\r\n      'Authorization': `Bearer ${todoistApiToken}`\r\n    }\r\n  });\r\n  return response.data;\r\n};\r\n\r\nexport {\r\n  getTodosOfToday,\r\n  getProjectById\r\n};\r\n```\r\n\r\n## `../lib/Toggl.ts`\r\n\r\n```typescript\r\nimport \"@johnlindquist/kit\"\r\n\r\nconst axios = await npm('axios');\r\nconst togglApiToken = await env('TOGGL_API_TOKEN');\r\nconst togglWorkspaceId = await env('TOGGL_WORKSPACE_ID');\r\n\r\nconst auth = {\r\n      username: togglApiToken,\r\n      // not a real password - the token is the actual secret. For whatever reason, toggl expects it this way around.\r\n      password: 'api_token'\r\n };\r\n\r\n// Types omit properties not relevant right now\r\ntype TimeEntry = {\r\n    id: number,\r\n    description: string,\r\n};\r\n\r\ntype TogglProject = {\r\n  id: number,\r\n  name: string,\r\n}\r\n\r\nconst getProjectByName = async(name: string): Promise<TogglProject | undefined> => {\r\n  const response = await axios({\r\n    method: 'GET',\r\n    url: `https://api.track.toggl.com/api/v8/workspaces/${togglWorkspaceId}/projects`,\r\n    auth\r\n  });\r\n  return response.data.find((project: TogglProject): boolean => project.name === name)\r\n}\r\n\r\nconst startTimeTrackerFor = async (\r\n  {description, projectName}: { description: string, projectName?: string}\r\n): Promise<TimeEntry> => {\r\n  let projectId;\r\n  if(projectName) {\r\n    const project = await getProjectByName(projectName);\r\n    projectId = project.id;\r\n  }\r\n  \r\n  const response = await axios({\r\n    method: 'POST',\r\n    url: 'https://api.track.toggl.com/api/v8/time_entries/start',\r\n    data: {\r\n      time_entry: {\r\n        description,\r\n        pid: projectId,\r\n        created_with: 'script-kit'\r\n      }\r\n    },\r\n    auth\r\n  });\r\n  return response.data.data;\r\n}\r\n\r\nexport {\r\n  startTimeTrackerFor\r\n};\r\n\r\n\r\nexport {\r\n  startTimeTrackerFor\r\n};\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-08T16:45:55Z"},{"menu":"Change Wallpaper","description":"","author":"David Losert","twitter":"david_losert","avatar":"https://avatars.githubusercontent.com/u/4287128?u=70e8d6e39f4addac43ee9849c8d9c150363e460e&v=4","user":"davelosert","discussion":"https://github.com/johnlindquist/kit/discussions/501","url":"","title":"Change Wallpaper","command":"change-wallpaper","content":"Here is a little script I wrote to easily change the background-wallpaper. \r\n\r\nI use this as I have to set a certain wallpaper before doing webinars or screencasts for my clients.\r\n\r\n```typescript\r\n// Menu: Change Wallpaper\r\n// Description: Change your background wallpaper by selecting from a configured folder.\r\n// Author: David Losert\r\n// Twitter: @david_losert\r\n\r\nimport \"@johnlindquist/kit\"\r\n\r\n// Set to the folder where you keep all your wallpapers for easy selection\r\nconst wallpapersPath = await env('WALLPAPER_PATH');\r\n\r\nconst availableWallpapers = ls(wallpapersPath);\r\nconst selectedWallpaper = await arg('select', availableWallpapers.map(image => {\r\n  const imagePath = path.resolve(wallpapersPath, image);\r\n  return {\r\n    name: image,\r\n    preview: `<img src=\"${imagePath}\">`,\r\n    value: imagePath\r\n  };\r\n}));\r\n\r\nawait applescript(`tell application \"Finder\" to set desktop picture to POSIX file \"${selectedWallpaper}\"`);\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-11-02T07:54:32Z"},{"menu":"Say Hello World Shortcut","description":"","author":"James Henry","twitter":"MrJamesHenry","avatar":"https://avatars.githubusercontent.com/u/900523?u=ab7e35b384354f771ecd6d683d12dade83d221dd&v=4","user":"JamesHenry","discussion":"https://github.com/johnlindquist/kit/discussions/496","url":"https://gist.githubusercontent.com/JamesHenry/75292ec21a02dcb8918a96c018d47a37/raw/77182d0c994698de037c5b12cc6bc5b30949c0d6/macos-monterey-shortcuts-example.js","title":"🔥 Automation Overload - Example of running macOS Monterey Shortcuts via Script Kit","command":"automation-overload-example-of-running-macos-monterey-shortcuts-via-script-kit","content":"\r\n[Install macos-monterey-shortcuts-example](https://scriptkit.com/api/new?name=macos-monterey-shortcuts-example&url=https://gist.githubusercontent.com/JamesHenry/75292ec21a02dcb8918a96c018d47a37/raw/77182d0c994698de037c5b12cc6bc5b30949c0d6/macos-monterey-shortcuts-example.js\")\r\n\r\n```js\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\n// Menu: Say Hello World Shortcut\r\n// Description: Trigger macOS Monterey Shortcut from Script Kit\r\n// Author: James Henry\r\n// Twitter: @MrJamesHenry\r\n\r\n/**\r\n * I have created a Shortcut on my Mac running macOS Monterey called\r\n * \"Say Hello World\".\r\n *\r\n * There are a couple of options available when it comes to invoking\r\n * it programmatically (whether via Script Kit or in general).\r\n */\r\n\r\n/**\r\n * OPTION 1:\r\n *\r\n * You can use the `shortcuts` CLI that is preinstalled on macOS\r\n * Monterey to run named Shortcuts.\r\n */\r\nawait $`shortcuts run \"Say Hello World\"`;\r\n\r\n/**\r\n * OPTION 2:\r\n *\r\n * You can use AppleScript to communicate with the \"Shortcuts\"\r\n * application on macOS Monterey to run named Shortcuts.\r\n *\r\n * NOTE: I first tried to communicate with \"Shortcuts Events\" per this\r\n * video from WWDC 2021, but it does not work:\r\n * https://developer.apple.com/videos/play/wwdc2021/10232/?time=1539\r\n */\r\nawait applescript(`\r\n  tell application \"Shortcuts\"\r\n    run the shortcut named \"Say Hello World\"\r\n  end tell\r\n`);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-29T10:51:19Z"},{"menu":"Currency Converter using google","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/494","url":"https://gist.githubusercontent.com/hakubo/d4822cfc6e42d7dead70d4da73bfded9/raw/97afb98be93518b2550448e5b81d425b79642ed2/currency-converter.js","title":"Currency Converter using Google :)","command":"currency-converter-using-google","content":"Since most of currency converters are paid APIs - why not just use google for this task :)\r\n\r\nhttps://user-images.githubusercontent.com/1018759/138569135-4b682b44-8b8b-4e9b-bd30-64c180bd1d5f.mp4\r\n\r\n\r\n[Install currency-converter](https://scriptkit.com/api/new?name=currency-converter&url=https://gist.githubusercontent.com/hakubo/d4822cfc6e42d7dead70d4da73bfded9/raw/97afb98be93518b2550448e5b81d425b79642ed2/currency-converter.js\")\r\n\r\n```js\r\n// Menu: Currency Converter using google\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nconst from = await arg(\"from\", [\"pln\", \"usd\", \"eur\"]);\r\nconst to = await arg(\"to\", [\"usd\", \"pln\", \"eur\"]);\r\nconst query = await arg(\"amount\");\r\nconst value = await scrapeSelector(\r\n  `https://google.com/search?q=${encodeURIComponent(\r\n    query + \" \" + from + \" \" + to\r\n  )}`,\r\n  \"span[data-value]\"\r\n);\r\n\r\ndiv(query + \" \" + from + \" = \" + value + \" \" + to, \"p-4\");\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-23T19:33:03Z"},{"menu":"JA → EN","description":"","author":"Brandon Pittman","shortcut":"ctrl j","avatar":"https://avatars.githubusercontent.com/u/967145?u=a0c390fc6689da83a5fb10aa017ed9f58466673a&v=4","user":"brandonpittman","twitter":null,"discussion":"https://github.com/johnlindquist/kit/discussions/491","url":"","title":"Quick Google Translate","command":"quick-google-translate","content":"I whipped up a quick action to take some selected text and open Google Translate with it. Swap out the source, `sl`, and target, `tl`, with your most commonly used languages.\r\n\r\n[Install script](https://scriptkit.com/api/new?name=quick-translate&url=https://gist.githubusercontent.com/brandonpittman/18791a65c6721f822473b2f1900cfb50/raw/52b9db763ed4ab31139994611aaa57a0b871e46a/google-translate.ts)\r\n\r\n```ts\r\n// Menu: JA → EN\r\n// Description: Translate selected text into with Google Translate.\r\n// Author: Brandon Pittman\r\n// Shortcut: ctrl j\r\n\r\nimport \"@johnlindquist/kit\";\r\n\r\nconst origin = \"https://translate.google.com\";\r\nconst text = await getSelectedText();\r\nconst sl = \"ja\";\r\nconst tl = \"en\";\r\nconst op = \"translate\";\r\n\r\nconst url = encodeURI(`${origin}/?sl=${sl}&tl=${tl}&text=${text}&op=${op}`);\r\n\r\nexec(`open \"${url}\"`, { encoding: \"utf8\" });\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-21T22:46:51Z"},{"menu":"RCKIK mobile","description":"","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/490","url":"https://gist.githubusercontent.com/hakubo/947f4d98c74acaa041cb9944039e4479/raw/90a0ea842b9341e8592dd30dc5a8c1a29c91212f/rckik.js","title":"RCKIK mobile busses","command":"rckik-mobile-busses","content":"This is for Poznań, Poland only. Data taken from https://www.rckik.poznan.pl/najblizsze-wyjazdy\r\n\r\nIt'll show a list of next places where you can find a bus in which you can donate a blood in Poznań - filtered by given text so you can narrow list to locations closest to you.\r\n\r\nThis is WIP - I'll try to optimize it and maybe make the list easier to read.\r\n\r\n\r\n![Screenshot 2021-10-19 at 11 39 17](https://user-images.githubusercontent.com/1018759/137884912-27795174-e583-4c32-beed-14ea806b125a.png)\r\n\r\n\r\n[Install rckik](https://scriptkit.com/api/new?name=rckik&url=https://gist.githubusercontent.com/hakubo/947f4d98c74acaa041cb9944039e4479/raw/90a0ea842b9341e8592dd30dc5a8c1a29c91212f/rckik.js\")\r\n\r\n```js\r\n// Menu: RCKIK mobile\r\n// Description: Show filtered plan of mobile RCKIK busses\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\nfunction transform(node) {\r\n  // Edit that to filter locations that you're interested in\r\n  // has to be inside transform function - as it's being serialized and passed to browser\r\n  const filter = \"Poznań\";\r\n  const columns = [...node.querySelectorAll(\"td\")];\r\n\r\n  if (columns[3].innerHTML.startsWith(filter)) {\r\n    return (\r\n      columns[0].querySelector(\"a\").innerHTML +\r\n      \" \" +\r\n      columns[3].innerHTML +\r\n      \" \" +\r\n      columns[2].innerHTML\r\n    );\r\n  }\r\n}\r\n\r\nconst pagination = await scrapeSelector(\r\n  \"https://www.rckik.poznan.pl/najblizsze-wyjazdy?page=1\",\r\n  \".pagination li\"\r\n);\r\n\r\nconst numberOfPages = pagination.length;\r\nlet t = [];\r\n\r\nfor (let i = 1; i <= numberOfPages; i += 1) {\r\n  const result = await scrapeSelector(\r\n    `https://www.rckik.poznan.pl/najblizsze-wyjazdy?page=${i}`,\r\n    \"#calendarTable tr:not(.header):not(.canceled)\",\r\n    transform\r\n  );\r\n\r\n  t = t.concat(result);\r\n}\r\n\r\ndiv(\r\n  `<ul>${t\r\n    .filter(Boolean)\r\n    .map((date) => `<li>${date}</li>`)\r\n    .join(\"\")}</ul>`,\r\n  \"p-4\"\r\n);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-19T09:42:02Z"},{"menu":"Weather by yr.no","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/489","url":"https://gist.githubusercontent.com/hakubo/1fc8e04a0ab26a251c6e5113ae8e85ed/raw/ae24bf7daeea3127d9be6bd0a7cd48949921e743/weather.js","title":"Weather by yr.no","command":"weather-by-yrno","content":"Very simple weather forecast (as pdf 🤣  ) from yr.no bit manual to setup but should be simple an quick.\r\n\r\n![image](https://user-images.githubusercontent.com/1018759/137885137-d2e26e62-668c-4949-a389-b98b7425601c.png)\r\n\r\n[Install weather](https://scriptkit.com/api/new?name=weather&url=https://gist.githubusercontent.com/hakubo/1fc8e04a0ab26a251c6e5113ae8e85ed/raw/ae24bf7daeea3127d9be6bd0a7cd48949921e743/weather.js\")\r\n\r\n```js\r\n// Menu: Weather by yr.no\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\n/** @type {import(\"@johnlindquist/kit\")} */\r\n\r\n/**\r\n * 1. Open https://www.yr.no/\r\n * 2. Find your location\r\n * 3. Copy what comes AFTER https://www.yr.no/en/forecast/daily-table/ to location const\r\n */\r\n\r\nconst location = \"5-1233000/Poland/Poznan\";\r\n\r\ndiv(\r\n  `<iframe src=\"https://www.yr.no/en/print/forecast/${location}#toolbar=0\" height=800 width=600/>`,\r\n  \"p-2\"\r\n);\r\n\r\n```\r\n","extension":".md","dir":"","file":"","description":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-19T09:35:42Z"},{"shortcode":"asos","menu":"search-asos","description":"","author":"Vasilis Kortsimelidis","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/4882345?u=b84755144b8f4f75f19a42c33667dcc66819f7de&v=4","user":"vaskort","discussion":"https://github.com/johnlindquist/kit/discussions/485","url":"https://gist.githubusercontent.com/vaskort/2c7dcba1649783d51d1df2cb860ab2dd/raw/988c94b6eba344a61d9b9a0ee51c7b7e70870a07/search-asos.js","title":"Search ASOS","command":"search-asos","content":"It will search at ASOS.com\r\n\r\n[Install search-asos](https://scriptkit.com/api/new?name=search-asos&url=https://gist.githubusercontent.com/vaskort/2c7dcba1649783d51d1df2cb860ab2dd/raw/988c94b6eba344a61d9b9a0ee51c7b7e70870a07/search-asos.js)\r\n\r\n```js\r\n// Shortcode: asos\r\n// Menu: search-asos\r\n// Description: Search ASOS\r\n// Author: Vasilis Kortsimelidis\r\n// Twitter: @vas_kort\r\n\r\nlet searchTerm = await arg(\"ASOS term to search for:\")\r\nlet termWithEncodedSpaces = searchTerm.replace(/ /g, \"%20\");\r\n\r\nexec(`open https://www.asos.com/search/?q=${termWithEncodedSpaces}`)\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-12T12:22:49Z"},{"menu":"Record Screen","description":"","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/483","url":"https://gist.githubusercontent.com/hakubo/e3c8698169fede4baad7d9d938c37a25/raw/b8bba52ed97317eb7c8ced279d48765a04214d9e/record-screen.js","title":"Record screen","command":"record-screen","content":"This script just opens Quick Time Player and turns on recording of part of your screen.\r\n\r\nIt has a dependency on another script by @johnlindquist app-launcher: https://www.scriptkit.com/johnlindquist/app-launcher\r\n\r\n\r\n[Install record-screen](https://scriptkit.com/api/new?name=record-screen&url=https://gist.githubusercontent.com/hakubo/e3c8698169fede4baad7d9d938c37a25/raw/b8bba52ed97317eb7c8ced279d48765a04214d9e/record-screen.js\")\r\n\r\n```js\r\n// Menu: Record Screen\r\n// Description: Start QuickTime player and open screen recorder\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\nawait run(\"app-launcher\", \"QuickTime Player\");\r\nawait keystroke(\"command control n\");\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-11T18:54:36Z"},{"menu":"Ping","description":"","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/482","url":"https://gist.githubusercontent.com/hakubo/f499d770a72aeb944350c075e722701c/raw/c04fd12e149004bc23803458888bf87dfb4807c2/ping.js","title":"Ping","command":"ping","content":"Run ping to a destination and draw a chart of latest entries.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/1018759/136839677-7bdf6871-8742-4480-a8e1-54f064e6cc50.mp4\r\n\r\n\r\n\r\n[Install ping](https://scriptkit.com/api/new?name=ping&url=https://gist.githubusercontent.com/hakubo/f499d770a72aeb944350c075e722701c/raw/c04fd12e149004bc23803458888bf87dfb4807c2/ping.js\")\r\n\r\n```js\r\n// Menu: Ping\r\n// Description: Ping destination and show line graph of latest values\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\nconst jsdom = await npm(\"jsdom\");\r\nawait npm(\"canvas\");\r\nconst Chart = await npm(\"chart.js\");\r\n\r\nconst { JSDOM } = jsdom;\r\n\r\n// Edit the list to suit your needs\r\nconst destination = await arg(\"ping\", [\"8.8.8.8\", \"google.com\"]);\r\n\r\n// How many entries should the chart show\r\nconst entries = 20;\r\n\r\nconst command = `ping ${destination}`;\r\nconst child = exec(command, { async: true });\r\n\r\nconst dom = new JSDOM(\r\n  `<!DOCTYPE html><canvas id=\"bar-chart\" width=\"800\" height=\"450\"></canvas>`\r\n);\r\n\r\nglobal.window = dom.window;\r\n\r\nChart.defaults.color = \"white\";\r\nChart.defaults.font = { size: 24, weight: \"bold\" };\r\n\r\nconst labels = new Array(entries)\r\n  .fill()\r\n  .map((_, i) => i)\r\n  .reverse();\r\n\r\nlet output = [];\r\nconst chartData = {\r\n  labels: labels,\r\n  datasets: [\r\n    {\r\n      label: `${command}: - ms`,\r\n      backgroundColor: \"rgb(255, 99, 132)\",\r\n      borderColor: \"rgb(255, 99, 132)\",\r\n      data: output,\r\n    },\r\n  ],\r\n};\r\n\r\nconst chart = new Chart(dom.window.document.getElementById(\"bar-chart\"), {\r\n  type: \"line\",\r\n  data: chartData,\r\n  options: {\r\n    animation: false,\r\n    tooltips: { enabled: false },\r\n    hover: { mode: null },\r\n  },\r\n});\r\n\r\nlet firstLine = true;\r\n\r\nchild.stdout.on(\"data\", function (data) {\r\n  if (!firstLine) {\r\n    const value = +data.replace(/.*time=(.*)ms/, \"$1\");\r\n    output.push(value);\r\n\r\n    if (output.length > entries) {\r\n      output = output.slice(1);\r\n    }\r\n\r\n    chartData.datasets[0].label = `${command}: ${value}ms`;\r\n    chartData.datasets[0].data = output;\r\n    chart.update();\r\n\r\n    div(`<img src=\"${chart.toBase64Image(\"image/jpeg\", 1)}\"/>`, \"p-4\");\r\n  } else {\r\n    firstLine = false;\r\n  }\r\n});\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-11T18:50:33Z"},{"menu":"Open Jira ticket in browser","description":"","author":"Jakub Olek","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/1018759?v=4","user":"hakubo","discussion":"https://github.com/johnlindquist/kit/discussions/481","url":"https://gist.githubusercontent.com/hakubo/f73e67370a52d48ebc28bfbb09114a6a/raw/3d9b16915e3b968cbd899f885fbe58b9540b28fb/open-jira-ticket.js","title":"Open Jira ticket","command":"open-jira-ticket","content":"The script parses selections to find valid JIRA ticket and when found - opens it in browser\r\n\r\n\r\n[Install open-jira-ticket](https://scriptkit.com/api/new?name=open-jira-ticket&url=https://gist.githubusercontent.com/hakubo/f73e67370a52d48ebc28bfbb09114a6a/raw/3d9b16915e3b968cbd899f885fbe58b9540b28fb/open-jira-ticket.js\")\r\n\r\n```js\r\n// Menu: Open Jira ticket in browser\r\n// Description: Parses a valid ticket number from selection and opens it in browser\r\n// Author: Jakub Olek\r\n// Twitter: @JakubOlek\r\n\r\nconst jiraDomain = await env(\"JIRA_DOMAIN\");\r\nconst text = await getSelectedText();\r\nconst jiraTicket = text.match(/([A-Z]{2,5}-[0-9]+)/);\r\n\r\nif (jiraTicket) {\r\n  focusTab(`${jiraDomain}/browse/${jiraTicket[0]}`);\r\n}\r\n\r\n```\r\n","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-09T18:53:10Z"},{"menu":"Mouse Mover","description":"","author":"Benjamin Modayil","twitter":null,"avatar":"https://avatars.githubusercontent.com/u/12306850?u=51152dab74c9158efeb6a84a65acf2464cf84218&v=4","user":"benjaminmodayil","discussion":"https://github.com/johnlindquist/kit/discussions/467","url":"","title":"Mouse Mover (Python Script + ScriptKit)","command":"mouse-mover-python-script-scriptkit","content":"😅 This one is more of a Python script, but I use ScriptKit to launch it. There are moments where I have to leave my computer to address something in another room or need more time than the allotted 10 minutes that Slack provides before it makes it look like I'm unavailable. For the most part, even if I'm in another room, I am still available for conversation/inquiries, so I don't want my coworkers to think I can't be bothered if my status looks like I'm away, but in reality I just might be eating/cooking. So this keeps my computer + work messaging app status in the green so it doesn't look like I'm unavailable.\r\n\r\nThe Python script requires `pyautogui` and `time` modules. I'm not the best for Python troubleshooting as I just learned some Python through YouTube tutorials. All I remember from when I wrote this was that it was a pain to get my computer using the latest version of Python.\r\n\r\nFrom the Python script below, `pyautogui` lets you __exit the script from taking control of your mouse by running `ctrl + c` or moving your mouse to the top right corner of your screen__. Because you can't run `ctrl + c` into a non-existent terminal when using it through ScriptKit, you need to move your mouse to the top right corner of your monitor to exit. \r\n\r\n**Note:** Before connecting/disconnecting external displays while the script is active, you must exit the script first, otherwise you'll have to reconnect/disconnect your displays to the condition of your computer when you started the script to exit.\r\n\r\nYou'll have to squint to see the mouse once the script starts + I only run it for three seconds before closing... Sorry about that.\r\n\r\nhttps://user-images.githubusercontent.com/12306850/135878354-7ab7e798-c63d-4a5e-8ee8-78e938d66b9a.mp4\r\n\r\n```python\r\n\r\n#! /usr/bin/env python3\r\nimport pyautogui\r\nimport time\r\n\r\nwhile True:\r\n    pyautogui.moveRel(0, 50, duration=1.5)\r\n    time.sleep(1)\r\n    pyautogui.moveRel(0, -50, duration=1.5)\r\n    time.sleep(1)\r\n    pyautogui.moveRel(50, 0, duration=1.5)\r\n    time.sleep(1)\r\n    pyautogui.moveRel(-50, 0, duration=1.5)\r\n    time.sleep(1)\r\n\r\n# You can remove a bunch of the repetition above. I just like seeing the mouse move a lot to know it's working.\r\n\r\n```\r\n\r\nHere's the ScriptKit launcher. This will vary depending on your Python path + Python script path.\r\n\r\n```js\r\n// Menu: Mouse Mover\r\n// Description: Moves your mouse so you don't go inactive in Slack or Microsoft Teams\r\n// Author: Benjamin Modayil\r\n// Twitter: @24props\r\n\r\nawait exec(`/PATH-TO-PYTHON-EXECUTABLE/python3.9 /PATH-TO-SCRIPT/i-am-here.py`)\r\n```","extension":".md","dir":"","file":"","tag":"","section":"","i":"","sectionIndex":"","createdAt":"2021-10-04T15:26:08Z"}]
